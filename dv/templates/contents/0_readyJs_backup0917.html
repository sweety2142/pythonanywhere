<style>
    textarea {
        font-family: Courier New;
    }
</style>

<script>
    $("input").on("keydown", function(e) {

        if (e.keyCode == 13) {
            $(this).next().focus();
            return false;
        }
    });


    function clearInput() {
        $('#order_term:text').val("");

        $('#order_com1').val(""); // 13
        $('#order_com1_amount').val(""); // 14

        $('#order_com2').val(""); // 16
        $('#order_com2_amount').val(""); // 17

        $('#order_com3').val(""); // 19
        $('#order_com3_amount').val(""); // 20

        $('#order_com4').val(""); // 22
        $('#order_com4_amount').val(""); // 23

        $('#order_com_total').val(""); // 25

        $('#order_DN').val(""); // 27
        $('#order_LF').val(""); // 28

        $('#order_remark').val(""); // 30
        $('#order_suip').val(""); // 31
        $('#order_ponum').val(""); // 32
        $('#order_quantity').val(""); // 33


        $('#order_prc').val(""); // 36
        $('#order_cross_rate').val("1.0"); // 37
        $('#order_dollor').val(""); // 38
        $('#order_LC').val(""); // 39
        $('#order_receive_LC').val(""); // 40


        var length = document.getElementById("table_supply").rows.length;

        for (var i = 0; i < length - 1; i++) {
            var c2 = 'order_table_quantity_' + String(i);
            eval(c2).value = "";
            var c3 = 'order_table_fob_' + String(i);
            eval(c3).value = "";
            var c4 = 'order_table_amount_' + String(i);
            eval(c4).value = "";
        }

        $('#order_expect_price').val(""); // 44
        $('#order_etc_per').val(""); // 45
        $('#order_etc_amount').val(""); // 46
        $('#order_expect_margin').val(""); // 47
        $('#order_supplyremark').val(""); // 48
        $('#order_special').val(""); // 49
        $('#order_before_order').val(""); // 51


        /////////////////////////////////////////////////////
        // end order 
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start shipping
        /////////////////////////////////////////////////////
        $('#ship_BL').val(""); // 54
        $('#ship_size').val(""); // 56

        length = document.getElementById("tableSPL_ship").rows.length;
        //console.log('tableSPL_ship:',length);
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'ship_container' + String(i);
            eval(c1).value = "";
            var newc = 'ship_SealNo' + String(i);
            eval(newc).value = "";
            var c2 = 'ship_lotNo' + String(i);
            eval(c2).value = "";
            var c4 = 'ship_amount' + String(i);
            eval(c4).value = "";
            var c5 = 'ship_company' + String(i);
            eval(c5).value = "";
            var c6 = 'ship_name' + String(i);
            eval(c6).value = "";
            //2020-03-26
            //var c7 = 'ship_che'+ String(i);
            //eval(c7).value= "";
            //var c8 = 'ship_car'+ String(i);
            //eval(c8).value = "";
            var c9 = 'ship_FT2' + String(i);
            eval(c9).value = "";
            //var c10 = 'ship_FT4'+ String(i);
            //eval(c10).value = "";
            var c11 = 'ship_forward' + String(i);
            eval(c11).value = "";
        }

        /////////////////////////////////////////////////////
        // end shipment
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start nego
        /////////////////////////////////////////////////////

        $('#nego_ref').val(""); // 60
        $('#nego_InvNo').val(""); // 61
        $('#nego_quantity').val(""); // 62
        $('#nego_TT').val(""); // 64
        $('#nego_underV').val(""); // 65

        $('#nego_etc').val(""); // 67
        $('#nego_etc_dollor').val(""); // 68
        $('#neto_etc_exchange').val(""); // 69

        $('#nego_won').val(""); // 70
        $('#nego_cross').val(""); // 71

        $('#nego_cross_amount').val(""); // 72

        $('#nego_com1_rate').val(""); // 73
        $('#nego_com1_amount').val(""); // 74
        $('#nego_hwanga').val(""); // 75
        $('#nego_com2_rate').val(""); // 76
        $('#nego_com2_amount').val(""); // 77
        $('#nego_com_total').val(""); // 78

        $('#nego_uwon').val(""); // 79

        $('#nextnego_nego').val(""); // 80

        $('#nego_m1').val(""); // 81

        $('input[name=gender]:checked').val(""); // 82 radio button

        $('#nego_m3').val(""); // 83
        $('#nego_m4').val(""); // 85

        var array_table_nego = []; // 89
        length = document.getElementById("table_nego").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c2 = 'nego_deposit_amount' + String(i);
            eval(c2).value = "";
            var c3 = 'nego_deposit_content' + String(i);
            eval(c3).value = "";
        }

        $('#nego_incomplete_value').val(""); // 90
        $('#nego_comment').val(""); // 91

        /////////////////////////////////////////////////////
        // start local
        /////////////////////////////////////////////////////
        var array_table_local = []; // 92
        length = document.getElementById("table_local").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c2 = 'local_table_LC_' + String(i);
            eval(c2).value = "";
            var c3 = 'local_table_QTY_' + String(i);
            eval(c3).value = "";
            var c4 = 'local_table_PRC_' + String(i);
            eval(c4).value = "";
            var c5 = 'local_table_amount_dollor_' + String(i);
            eval(c5).value = "";
            var c6 = 'local_table_amount_won_' + String(i);
            eval(c6).value = "";

            var c8 = 'local_table_rate_' + String(i);
            eval(c8).value = "";
            var c9 = 'local_table_rate_amount_' + String(i);
            eval(c9).value = "";
        }

        $('#BillInvoice1').val(""); // 97
        $('#BillInvoice2').val(""); // 98
        $('#BillInvoice3').val(""); // 99
        $('#BillInvoice4').val(""); // 100
        $('#BillMoneyInvoice1').val(""); // 101
        $('#BillMoneyInvoice2').val(""); // 102
        $('#BillMoneyInvoice3').val(""); // 103
        $('#BillMoneyInvoice4').val(""); // 104
        $('#BillDollorInvoice1').val(""); // 105
        $('#BillDollorInvoice2').val(""); // 106
        $('#BillDollorInvoice3').val(""); // 107
        $('#BillDollorInvoice4').val(""); // 108

        $('#BillRate1').val(""); // 109
        $('#BillRate2').val(""); // 110
        $('#BillRate3').val(""); // 111
        $('#BillRate4').val(""); // 112
        $('#local_sunim').val(""); // 113
        $('#local_sunim2').val(""); // 114
        $('#local_demur').val(""); // 115
        $('#local_demur2').val(""); // 116
        $('#local_su').val(""); // 117
        $('#local_su2').val(""); // 118
        $('#local_jukwha').val(""); // 119
        $('#local_jukwha2').val(""); // 120
        $('#local_transport').val(""); // 121
        $('#local_transport2').val(""); // 122
        $('#local_comm').val(""); // 123
        $('#local_comm2').val(""); // 124
        $('#local_lc_open').val(""); // 127
        $('#local_lc_open2').val(""); // 128
        $('#local_receive_LC').val(""); // 129
        $('#local_receive_LC_won').val(""); // 130
        $('#local_u').val(""); // 131
        $('#local_u2').val(""); // 132
        $('#local_hwanhwan').val(""); // 133
        $('#local_hwanhwan2').val(""); // 134
        $('#local_delay').val(""); // 135
        $('#local_delay2').val(""); // 136
        $('#local_less').val(""); // 137
        $('#local_less2').val(""); // 138
        $('#local_insudelay').val(""); // 139
        $('#local_insudelay2').val(""); // 140
        $('#local_actual').val(""); // 141
        $('#local_actual2').val(""); // 142
        $('#local_special').val(""); // 143

        /////////////////////////////////////////////////////
        // end local
        /////////////////////////////////////////////////////
        /////////////////////////////////////////////////////
        // start fta
        /////////////////////////////////////////////////////


        /////////////////////////////////////////////////////
        /////////////////////////////////////////////////////
        // end fta
        /////////////////////////////////////////////////////
    }

    function clearSelect() {
        buyer_order.setValue(-1, false);
        agent_order.setValue(-1, false);

        term_order.setValue(-1, false);
        term_order.addItem("CIF"); // initialization
        item_order.setValue(-1, false);

        method_order.setValue(-1, false);
        method_order.addItem("FCL");

        document_order.setValue(-1, false);
        document_order.addItem("DAYS FROM B/L DATE");

        LS_order.setValue(-1, false);
        LS_order.addItem("SD");

        unit_nego_table.setValue(-1, false);
        payment_order.setValue(-1, false);

        bank_nego.setValue(-1, false);
        arrive_order.setValue(-1, false);

        order_com1_to.setValue(-1, false);
        order_com2_to.setValue(-1, false);
        order_com3_to.setValue(-1, false);
        order_com4_to.setValue(-1, false);



        QTY_order.setValue(-1, false);
        QTY_order.addItem("KG");

        PRC_order.setValue(-1, false);
        PRC_order.addItem("U$");
        var length = document.getElementById("table_supply").rows.length;

        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_order_' + String(i);
            eval(c1).setValue(-1, false);
            var c5 = 'method_opt_' + String(i);
            eval(c5).setValue(-1, false);
            eval(c5).addItem("FOB");
        }
        buyerbank_order.setValue(-1, false); // 50
        bank_nego.setValue(-1, false); // 58
        unit_nego.setValue(-1, false); // 63
        unit_nego.addItem('KG'); // added in 2020-03-18

        unit_nego_table.setValue(-1, false); // 66
        unit_nego_table.addItem('U$'); // added in 2020-03-18
        buymethod_nego.setValue(-1, false); // 84

        length = document.getElementById("table_local").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_table_local_' + String(i);
            eval(c1).setValue(-1, false);
        }
        item_fta.setValue(-1, false); // 145
        place_fta.setValue(-1, false); // 146
        place_fta.addItem('한국');
        cont_fta.setValue(-1, false); // 147
    }

    function clearDate() {
        $("#datepicker").val("");
        $("#datepicker").datepicker('setDate', 'today'); // 초기화
        $("#date_stand").val("");

        $('#date_delivery').val("");
        $('#date_SD').val("");
        $('#date_ED').val("");

        $('#inv_ship').val("");
        $('#actual_ship').val("");

        length = document.getElementById("tableSPL_ship").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c3 = 'ship_date_chul' + String(i);
            eval(c3).value = ("");
        }

        // nego
        $('#day_nego').val("");
        $('#actual_ship').val("");
        $('#ETA_ship').val("");
        $('#nextnego_nego').val("");
        $('#DueDate_nego').val("");
        $('#report_nego').val("");
        $('#get_nego').val("");

        length = document.getElementById("table_nego").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'nego_deposit_date' + String(i);
            eval(c1).value = "";
        }
        // local

        length = document.getElementById("table_local").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c7 = 'Datepay_local_' + String(i);
            eval(c7).value = "";
        }


        $("#paydate1_local").val("");
        $("#paydate2_local").val("");
        $("#paydate3_local").val("");
        $("#paydate4_local").val("");
        $("#paycomm_local").val("");
        $("#clean_local").val("");

        //fta
        $("#out_fta").val("");

    }

    function realsave() {
        var TotalData = [];

        var buyer_order = $('#buyer_order').val(); // 0
        TotalData.push(buyer_order);
        var OrderNo = $('#OrderNo').val(); // 1
        TotalData.push(OrderNo);
        var OrderGubun = $('#OrderGubun').val(); // 2
        TotalData.push(OrderGubun);
        var agent_order = $('#agent_order').val(); // 3
        TotalData.push(agent_order);
        var datepicker = $('#datepicker').val(); // 4
        TotalData.push(datepicker);
        var date_stand = $('#date_stand').val(); // 5
        TotalData.push(date_stand);
        var date_delivery = $('#date_delivery').val(); // 6
        TotalData.push(date_delivery);
        var term_order = $('#term_order').val(); // 7
        TotalData.push(term_order);
        var arrive_order = $('#arrive_order').val(); // 8
        TotalData.push(arrive_order);
        var payment_order = $('#payment_order').val(); // 9
        TotalData.push(payment_order);
        var order_term = $('#order_term').val(); // 10 - days
        TotalData.push(order_term);
        var method_order = $('#method_order').val(); // 11
        TotalData.push(method_order);
        var document_order = $('#document_order').val(); // 12
        TotalData.push(document_order);
        var order_com1 = $('#order_com1').val(); // 13
        TotalData.push(order_com1);
        var order_com1_amount = $('#order_com1_amount').val(); // 14
        TotalData.push(order_com1_amount);
        var order_com1_to = $('#order_com1_to').val(); // 15
        TotalData.push(order_com1_to);
        var order_com2 = $('#order_com2').val(); // 16
        TotalData.push(order_com2);
        var order_com2_amount = $('#order_com2_amount').val(); // 17
        TotalData.push(order_com2_amount);
        var order_com2_to = $('#order_com2_to').val(); // 18
        TotalData.push(order_com2_to);
        var order_com3 = $('#order_com3').val(); // 19
        TotalData.push(order_com3);
        var order_com3_amount = $('#order_com3_amount').val(); // 20
        TotalData.push(order_com3_amount);
        var order_com3_to = $('#order_com3_to').val(); // 21
        TotalData.push(order_com3_to);
        var order_com4 = $('#order_com4').val(); // 22
        TotalData.push(order_com4);
        var order_com4_amount = $('#order_com4_amount').val(); // 23
        TotalData.push(order_com4_amount);
        var order_com4_to = $('#order_com4_to').val(); // 24
        TotalData.push(order_com4_to);
        var order_com_total = $('#order_com_total').val(); // 25
        TotalData.push(order_com_total);
        var item_order = $('#item_order').val(); // 26
        TotalData.push(item_order);
        var order_DN = $('#order_DN').val(); // 27
        TotalData.push(order_DN);
        var order_LF = $('#order_LF').val(); // 28
        TotalData.push(order_LF);
        var LS_order = $('#LS_order').val(); // 29
        TotalData.push(LS_order);
        var order_remark = $('#order_remark').val(); // 30
        TotalData.push(order_remark);
        var order_suip = $('#order_suip').val(); // 31
        TotalData.push(order_suip);
        var order_ponum = $('#order_ponum').val(); // 32
        TotalData.push(order_ponum);
        var order_quantity = $('#order_quantity').val(); // 33
        TotalData.push(order_quantity);
        var QTY_order = $('#QTY_order').val(); // 34
        TotalData.push(QTY_order);
        var PRC_order = $('#PRC_order').val(); // 35
        TotalData.push(PRC_order);
        var order_prc = $('#order_prc').val(); // 36
        TotalData.push(order_prc);
        var order_cross_rate = $('#order_cross_rate').val(); // 37
        TotalData.push(order_cross_rate);
        var order_dollor = $('#order_dollor').val(); // 38
        TotalData.push(order_dollor);
        var order_LC = $('#order_LC').val(); // 39
        TotalData.push(order_LC);
        var order_receive_LC = $('#order_receive_LC').val(); // 40
        TotalData.push(order_receive_LC);
        var date_SD = $('#date_SD').val(); // 41
        TotalData.push(date_SD);
        var date_ED = $('#date_ED').val(); // 42
        TotalData.push(date_ED);

        var array_table_supply = []; // 43
        var length = document.getElementById("table_supply").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_order_' + String(i);
            array_table_supply.push(eval(c1).getValue());
            var c2 = 'order_table_quantity_' + String(i);
            array_table_supply.push(eval(c2).value);
            var c3 = 'order_table_fob_' + String(i);
            array_table_supply.push(eval(c3).value);
            var c4 = 'order_table_amount_' + String(i);
            array_table_supply.push(eval(c4).value);
            var c5 = 'method_opt_' + String(i);
            array_table_supply.push(eval(c5).getValue());
        }
        TotalData.push(array_table_supply);


        var order_expect_price = $('#order_expect_price').val(); // 44
        TotalData.push(order_expect_price);
        var order_etc_per = $('#order_etc_per').val(); // 45
        TotalData.push(order_etc_per);
        var order_etc_amount = $('#order_etc_amount').val(); // 46
        TotalData.push(order_etc_amount);
        var order_expect_margin = $('#order_expect_margin').val(); // 47
        TotalData.push(order_expect_margin);
        var order_supplyremark = $('#order_supplyremark').val(); // 48
        TotalData.push(order_supplyremark);
        var order_special = $('#order_special').val(); // 49
        TotalData.push(order_special);
        var buyerbank_order = $('#buyerbank_order').val(); // 50
        TotalData.push(buyerbank_order);
        var order_before_order = $('#order_before_order').val(); // 51
        TotalData.push(order_before_order);

        /////////////////////////////////////////////////////
        // end order 
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start shipping
        /////////////////////////////////////////////////////
        var inv_ship = $('#inv_ship').val(); // 52
        TotalData.push(inv_ship);
        var actual_ship = $('#actual_ship').val(); // 53
        TotalData.push(actual_ship);
        var ship_BL = $('#ship_BL').val(); // 54
        TotalData.push(ship_BL);
        var ETA_ship = $('#ETA_ship').val(); // 55
        TotalData.push(ETA_ship);
        var ship_size = $('#ship_size').val(); // 56
        TotalData.push(ship_size);

        var array_table_ship = []; // 57
        length = document.getElementById("tableSPL_ship").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'ship_container' + String(i);
            array_table_ship.push(eval(c1).value);

            var newc = 'ship_SealNo' + String(i);
            array_table_ship.push(eval(newc).value);


            var c2 = 'ship_lotNo' + String(i);
            array_table_ship.push(eval(c2).value);
            var c3 = 'ship_date_chul' + String(i);
            array_table_ship.push(eval(c3).value);
            var c4 = 'ship_amount' + String(i);
            array_table_ship.push(eval(c4).value);
            var c5 = 'ship_company' + String(i);
            array_table_ship.push(eval(c5).value);
            var c6 = 'ship_name' + String(i);
            array_table_ship.push(eval(c6).value);
            //2020-03-26
            //var c7 = 'ship_che'+ String(i);
            //array_table_ship.push(eval(c7).value);
            //var c8 = 'ship_car'+ String(i);
            //array_table_ship.push(eval(c8).value);
            var c9 = 'ship_FT2' + String(i);
            array_table_ship.push(eval(c9).value);
            //var c10 = 'ship_FT4'+ String(i);
            //array_table_ship.push(eval(c10).value);
            var c11 = 'ship_forward' + String(i);
            array_table_ship.push(eval(c11).value);
        }
        TotalData.push(array_table_ship);
        /////////////////////////////////////////////////////
        // end shipment
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start nego
        /////////////////////////////////////////////////////
        var bank_nego = $('#bank_nego').val(); // 58
        TotalData.push(bank_nego);
        var day_nego = $('#day_nego').val(); // 59
        TotalData.push(day_nego);
        var nego_ref = $('#nego_ref').val(); // 60
        TotalData.push(nego_ref);
        var nego_InvNo = $('#nego_InvNo').val(); // 61
        TotalData.push(nego_InvNo);
        var nego_quantity = $('#nego_quantity').val(); // 62
        TotalData.push(nego_quantity);
        var unit_nego = $('#unit_nego').val(); // 63
        TotalData.push(unit_nego);
        var nego_TT = $('#nego_TT').val(); // 64
        TotalData.push(nego_TT);
        var nego_underV = $('#nego_underV').val(); // 65
        TotalData.push(nego_underV);

        var unit_nego_table = $('#unit_nego_table').val(); // 66
        TotalData.push(unit_nego_table);
        var nego_etc = $('#nego_etc').val(); // 67
        TotalData.push(nego_etc);
        var nego_etc_dollor = $('#nego_etc_dollor').val(); // 68
        TotalData.push(nego_etc_dollor);
        var neto_etc_exchange = $('#neto_etc_exchange').val(); // 69
        TotalData.push(neto_etc_exchange);
        var nego_won = $('#nego_won').val(); // 70
        TotalData.push(nego_won);
        var nego_cross = $('#nego_cross').val(); // 71
        TotalData.push(nego_cross);
        var nego_cross_amount = $('#nego_cross_amount').val(); // 72
        TotalData.push(nego_cross_amount);
        var nego_com1_rate = $('#nego_com1_rate').val(); // 73
        TotalData.push(nego_com1_rate);
        var nego_com1_amount = $('#nego_com1_amount').val(); // 74
        TotalData.push(nego_com1_amount);
        var nego_hwanga = $('#nego_hwanga').val(); // 75
        TotalData.push(nego_hwanga);
        var nego_com2_rate = $('#nego_com2_rate').val(); // 76
        TotalData.push(nego_com2_rate);
        var nego_com2_amount = $('#nego_com2_amount').val(); // 77
        TotalData.push(nego_com2_amount);
        var nego_com_total = $('#nego_com_total').val(); // 78
        TotalData.push(nego_com_total);
        var nego_uwon = $('#nego_uwon').val(); // 79
        TotalData.push(nego_uwon);
        var nextnego_nego = $('#nextnego_nego').val(); // 80
        TotalData.push(nextnego_nego);
        var nego_m1 = $('#nego_m1').val(); // 81
        TotalData.push(nego_m1);
        var radio_val = $('input[name=gender]:checked').val(); // 82 radio button
        TotalData.push(radio_val);
        var nego_m3 = $('#nego_m3').val(); // 83
        TotalData.push(nego_m3);
        var buymethod_nego = $('#buymethod_nego').val(); // 84
        TotalData.push(buymethod_nego);
        var nego_m4 = $('#nego_m4').val(); // 85
        TotalData.push(nego_m4);
        var DueDate_nego = $('#DueDate_nego').val(); // 86
        TotalData.push(DueDate_nego);
        var report_nego = $('#report_nego').val(); // 87
        TotalData.push(report_nego);
        var get_nego = $('#get_nego').val(); // 88
        TotalData.push(get_nego);

        var array_table_nego = []; // 89
        length = document.getElementById("table_nego").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'nego_deposit_date' + String(i);
            array_table_nego.push(eval(c1).value);
            var c2 = 'nego_deposit_amount' + String(i);
            array_table_nego.push(eval(c2).value);
            var c3 = 'nego_deposit_content' + String(i);
            array_table_nego.push(eval(c3).value);
        }
        TotalData.push(array_table_nego);

        var nego_incomplete_value = $('#nego_incomplete_value').val(); // 90
        TotalData.push(nego_incomplete_value);
        var nego_comment = $('#nego_comment').val(); // 91
        TotalData.push(nego_comment);
        /////////////////////////////////////////////////////
        // end nego
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start local
        /////////////////////////////////////////////////////
        var array_table_local = []; // 92
        length = document.getElementById("table_local").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_table_local_' + String(i);
            array_table_local.push(eval(c1).getValue());
            var c2 = 'local_table_LC_' + String(i);
            array_table_local.push(eval(c2).value);
            var c3 = 'local_table_QTY_' + String(i);
            array_table_local.push(eval(c3).value);
            var c4 = 'local_table_PRC_' + String(i);
            array_table_local.push(eval(c4).value);
            var c5 = 'local_table_amount_dollor_' + String(i);
            array_table_local.push(eval(c5).value);
            var c6 = 'local_table_amount_won_' + String(i);
            array_table_local.push(eval(c6).value);
            var c7 = 'Datepay_local_' + String(i);
            array_table_local.push(eval(c7).value);
            var c8 = 'local_table_rate_' + String(i);
            array_table_local.push(eval(c8).value);
            var c9 = 'local_table_rate_amount_' + String(i);
            array_table_local.push(eval(c9).value);
        }
        TotalData.push(array_table_local);

        var paydate1_local = $('#paydate1_local').val(); // 93
        TotalData.push(paydate1_local);
        var paydate2_local = $('#paydate2_local').val(); // 94
        TotalData.push(paydate2_local);
        var paydate3_local = $('#paydate3_local').val(); // 95
        TotalData.push(paydate3_local);
        var paydate4_local = $('#paydate4_local').val(); // 96
        TotalData.push(paydate4_local);
        var BillInvoice1 = $('#BillInvoice1').val(); // 97
        TotalData.push(BillInvoice1);
        var BillInvoice2 = $('#BillInvoice2').val(); // 98
        TotalData.push(BillInvoice2);
        var BillInvoice3 = $('#BillInvoice3').val(); // 99
        TotalData.push(BillInvoice3);
        var BillInvoice4 = $('#BillInvoice4').val(); // 100
        TotalData.push(BillInvoice4);
        var BillMoneyInvoice1 = $('#BillMoneyInvoice1').val(); // 101
        TotalData.push(BillMoneyInvoice1);
        var BillMoneyInvoice2 = $('#BillMoneyInvoice2').val(); // 102
        TotalData.push(BillMoneyInvoice2);
        var BillMoneyInvoice3 = $('#BillMoneyInvoice3').val(); // 103
        TotalData.push(BillMoneyInvoice3);
        var BillMoneyInvoice4 = $('#BillMoneyInvoice4').val(); // 104
        TotalData.push(BillMoneyInvoice4);
        var BillDollorInvoice1 = $('#BillDollorInvoice1').val(); // 105
        TotalData.push(BillDollorInvoice1);
        var BillDollorInvoice2 = $('#BillDollorInvoice2').val(); // 106
        TotalData.push(BillDollorInvoice2);
        var BillDollorInvoice3 = $('#BillDollorInvoice3').val(); // 107
        TotalData.push(BillDollorInvoice3);
        var BillDollorInvoice4 = $('#BillDollorInvoice4').val(); // 108
        TotalData.push(BillDollorInvoice4);
        var BillRate1 = $('#BillRate1').val(); // 109
        TotalData.push(BillRate1);
        var BillRate2 = $('#BillRate2').val(); // 110
        TotalData.push(BillRate2);
        var BillRate3 = $('#BillRate3').val(); // 111
        TotalData.push(BillRate3);
        var BillRate4 = $('#BillRate4').val(); // 112
        TotalData.push(BillRate4);
        var local_sunim = $('#local_sunim').val(); // 113
        TotalData.push(local_sunim);
        var local_sunim2 = $('#local_sunim2').val(); // 114
        TotalData.push(local_sunim2);
        var local_demur = $('#local_demur').val(); // 115
        TotalData.push(local_demur);
        var local_demur2 = $('#local_demur2').val(); // 116
        TotalData.push(local_demur2);
        var local_su = $('#local_su').val(); // 117
        TotalData.push(local_su);
        var local_su2 = $('#local_su2').val(); // 118
        TotalData.push(local_su2);
        var local_jukwha = $('#local_jukwha').val(); // 119
        TotalData.push(local_jukwha);
        var local_jukwha2 = $('#local_jukwha2').val(); // 120
        TotalData.push(local_jukwha2);
        var local_transport = $('#local_transport').val(); // 121
        TotalData.push(local_transport);
        var local_transport2 = $('#local_transport2').val(); // 122
        TotalData.push(local_transport2);
        var local_comm = $('#local_comm').val(); // 123
        TotalData.push(local_comm);
        var local_comm2 = $('#local_comm2').val(); // 124
        TotalData.push(local_comm2);
        var paycomm_local = $('#paycomm_local').val(); // 125
        TotalData.push(paycomm_local);
        var clean_local = $('#clean_local').val(); // 126
        TotalData.push(clean_local);
        var local_lc_open = $('#local_lc_open').val(); // 127
        TotalData.push(local_lc_open);
        var local_lc_open2 = $('#local_lc_open2').val(); // 128
        TotalData.push(local_lc_open2);
        var local_receive_LC = $('#local_receive_LC').val(); // 129
        TotalData.push(local_receive_LC);
        var local_receive_LC_won = $('#local_receive_LC_won').val(); // 130
        TotalData.push(local_receive_LC_won);
        var local_u = $('#local_u').val(); // 131
        TotalData.push(local_u);
        var local_u2 = $('#local_u2').val(); // 132
        TotalData.push(local_u2);
        var local_hwanhwan = $('#local_hwanhwan').val(); // 133
        TotalData.push(local_hwanhwan);
        var local_hwanhwan2 = $('#local_hwanhwan2').val(); // 134
        TotalData.push(local_hwanhwan2);
        var local_delay = $('#local_delay').val(); // 135
        TotalData.push(local_delay);
        var local_delay2 = $('#local_delay2').val(); // 136
        TotalData.push(local_delay2);
        var local_less = $('#local_less').val(); // 137
        TotalData.push(local_less)
        var local_less2 = $('#local_less2').val(); // 138
        TotalData.push(local_less2);
        var local_insudelay = $('#local_insudelay').val(); // 139
        TotalData.push(local_insudelay);
        var local_insudelay2 = $('#local_insudelay2').val(); // 140
        TotalData.push(local_insudelay2);
        var local_actual = $('#local_actual').val(); // 141
        TotalData.push(local_actual);
        var local_actual2 = $('#local_actual2').val(); // 142
        TotalData.push(local_actual2);
        var local_special = $('#local_special').val(); // 143
        TotalData.push(local_special);
        /////////////////////////////////////////////////////
        // end local
        /////////////////////////////////////////////////////
        /////////////////////////////////////////////////////
        // start fta
        /////////////////////////////////////////////////////
        var out_fta = $('#out_fta').val(); // 144
        TotalData.push(out_fta);
        var item_fta = $('#item_fta').val(); // 145
        TotalData.push(item_fta);
        var place_fta = $('#place_fta').val(); // 146
        TotalData.push(place_fta);
        var cont_fta = $('#cont_fta').val(); // 147
        TotalData.push(cont_fta);
        /////////////////////////////////////////////////////
        // end fta
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////
        // modal input handle over
        var iddb = $('#saveDB_ID').val();
        var idgb = $('#saveDB_GB').val();
        TotalData.push(iddb);
        TotalData.push(idgb);
        /////////////////////////////////////////////////

        $.ajax({
            type: "POST",
            url: "{{ url_for('save_db') }}",
            contentType: "application/json;",
            data: JSON.stringify(TotalData),

            success: function(out) {
                alert(out['msg']);

                if (out['msg'].search("error") == -1) // error 가 없으면 
                {
                    document.getElementById("OrderNo").value = iddb;
                    document.getElementById("OrderGubun").value = idgb;

                    document.getElementById("order_LC").value = iddb + "_" + idgb;

                    location.reload();
                }
            },
            error: function(out) {
                alert("Please check..")
            }
        }); //end of ajax


    }

    function realsave2() {
        var TotalData = [];

        var buyer_order = $('#buyer_order').val(); // 0
        TotalData.push(buyer_order);
        var OrderNo = $('#OrderNo').val(); // 1
        TotalData.push(OrderNo);
        var OrderGubun = $('#OrderGubun').val(); // 2
        TotalData.push(OrderGubun);
        var agent_order = $('#agent_order').val(); // 3
        TotalData.push(agent_order);
        var datepicker = $('#datepicker').val(); // 4
        TotalData.push(datepicker);
        var date_stand = $('#date_stand').val(); // 5
        TotalData.push(date_stand);
        var date_delivery = $('#date_delivery').val(); // 6
        TotalData.push(date_delivery);
        var term_order = $('#term_order').val(); // 7
        TotalData.push(term_order);
        var arrive_order = $('#arrive_order').val(); // 8
        TotalData.push(arrive_order);
        var payment_order = $('#payment_order').val(); // 9
        TotalData.push(payment_order);
        var order_term = $('#order_term').val(); // 10 - days
        TotalData.push(order_term);
        var method_order = $('#method_order').val(); // 11
        TotalData.push(method_order);
        var document_order = $('#document_order').val(); // 12
        TotalData.push(document_order);
        var order_com1 = $('#order_com1').val(); // 13
        TotalData.push(order_com1);
        var order_com1_amount = $('#order_com1_amount').val(); // 14
        TotalData.push(order_com1_amount);
        var order_com1_to = $('#order_com1_to').val(); // 15
        TotalData.push(order_com1_to);
        var order_com2 = $('#order_com2').val(); // 16
        TotalData.push(order_com2);
        var order_com2_amount = $('#order_com2_amount').val(); // 17
        TotalData.push(order_com2_amount);
        var order_com2_to = $('#order_com2_to').val(); // 18
        TotalData.push(order_com2_to);
        var order_com3 = $('#order_com3').val(); // 19
        TotalData.push(order_com3);
        var order_com3_amount = $('#order_com3_amount').val(); // 20
        TotalData.push(order_com3_amount);
        var order_com3_to = $('#order_com3_to').val(); // 21
        TotalData.push(order_com3_to);
        var order_com4 = $('#order_com4').val(); // 22
        TotalData.push(order_com4);
        var order_com4_amount = $('#order_com4_amount').val(); // 23
        TotalData.push(order_com4_amount);
        var order_com4_to = $('#order_com4_to').val(); // 24
        TotalData.push(order_com4_to);
        var order_com_total = $('#order_com_total').val(); // 25
        TotalData.push(order_com_total);
        var item_order = $('#item_order').val(); // 26
        TotalData.push(item_order);
        var order_DN = $('#order_DN').val(); // 27
        TotalData.push(order_DN);
        var order_LF = $('#order_LF').val(); // 28
        TotalData.push(order_LF);
        var LS_order = $('#LS_order').val(); // 29
        TotalData.push(LS_order);
        var order_remark = $('#order_remark').val(); // 30
        TotalData.push(order_remark);
        var order_suip = $('#order_suip').val(); // 31
        TotalData.push(order_suip);
        var order_ponum = $('#order_ponum').val(); // 32
        TotalData.push(order_ponum);
        var order_quantity = $('#order_quantity').val(); // 33
        TotalData.push(order_quantity);
        var QTY_order = $('#QTY_order').val(); // 34
        TotalData.push(QTY_order);
        var PRC_order = $('#PRC_order').val(); // 35
        TotalData.push(PRC_order);
        var order_prc = $('#order_prc').val(); // 36
        TotalData.push(order_prc);
        var order_cross_rate = $('#order_cross_rate').val(); // 37
        TotalData.push(order_cross_rate);
        var order_dollor = $('#order_dollor').val(); // 38
        TotalData.push(order_dollor);
        var order_LC = $('#order_LC').val(); // 39
        TotalData.push(order_LC);
        var order_receive_LC = $('#order_receive_LC').val(); // 40
        TotalData.push(order_receive_LC);
        var date_SD = $('#date_SD').val(); // 41
        TotalData.push(date_SD);
        var date_ED = $('#date_ED').val(); // 42
        TotalData.push(date_ED);

        var array_table_supply = []; // 43
        var length = document.getElementById("table_supply").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_order_' + String(i);
            array_table_supply.push(eval(c1).getValue());
            var c2 = 'order_table_quantity_' + String(i);
            array_table_supply.push(eval(c2).value);
            var c3 = 'order_table_fob_' + String(i);
            array_table_supply.push(eval(c3).value);
            var c4 = 'order_table_amount_' + String(i);
            array_table_supply.push(eval(c4).value);
            var c5 = 'method_opt_' + String(i);
            array_table_supply.push(eval(c5).getValue());
        }
        TotalData.push(array_table_supply);


        var order_expect_price = $('#order_expect_price').val(); // 44
        TotalData.push(order_expect_price);
        var order_etc_per = $('#order_etc_per').val(); // 45
        TotalData.push(order_etc_per);
        var order_etc_amount = $('#order_etc_amount').val(); // 46
        TotalData.push(order_etc_amount);
        var order_expect_margin = $('#order_expect_margin').val(); // 47
        TotalData.push(order_expect_margin);
        var order_supplyremark = $('#order_supplyremark').val(); // 48
        TotalData.push(order_supplyremark);
        var order_special = $('#order_special').val(); // 49
        TotalData.push(order_special);
        var buyerbank_order = $('#buyerbank_order').val(); // 50
        TotalData.push(buyerbank_order);
        var order_before_order = $('#order_before_order').val(); // 51
        TotalData.push(order_before_order);

        /////////////////////////////////////////////////////
        // end order 
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start shipping
        /////////////////////////////////////////////////////
        var inv_ship = $('#inv_ship').val(); // 52
        TotalData.push(inv_ship);
        var actual_ship = $('#actual_ship').val(); // 53
        TotalData.push(actual_ship);
        var ship_BL = $('#ship_BL').val(); // 54
        TotalData.push(ship_BL);
        var ETA_ship = $('#ETA_ship').val(); // 55
        TotalData.push(ETA_ship);
        var ship_size = $('#ship_size').val(); // 56
        TotalData.push(ship_size);

        var array_table_ship = []; // 57
        length = document.getElementById("tableSPL_ship").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'ship_container' + String(i);
            array_table_ship.push(eval(c1).value);

            var newc = 'ship_SealNo' + String(i);
            array_table_ship.push(eval(newc).value);


            var c2 = 'ship_lotNo' + String(i);
            array_table_ship.push(eval(c2).value);
            var c3 = 'ship_date_chul' + String(i);
            array_table_ship.push(eval(c3).value);
            var c4 = 'ship_amount' + String(i);
            array_table_ship.push(eval(c4).value);
            var c5 = 'ship_company' + String(i);
            array_table_ship.push(eval(c5).value);
            var c6 = 'ship_name' + String(i);
            array_table_ship.push(eval(c6).value);
            //2020-03-26
            //var c7 = 'ship_che'+ String(i);
            //array_table_ship.push(eval(c7).value);
            //var c8 = 'ship_car'+ String(i);
            //array_table_ship.push(eval(c8).value);
            var c9 = 'ship_FT2' + String(i);
            array_table_ship.push(eval(c9).value);
            //var c10 = 'ship_FT4'+ String(i);
            //array_table_ship.push(eval(c10).value);
            var c11 = 'ship_forward' + String(i);
            array_table_ship.push(eval(c11).value);
        }
        TotalData.push(array_table_ship);
        /////////////////////////////////////////////////////
        // end shipment
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start nego
        /////////////////////////////////////////////////////
        var bank_nego = $('#bank_nego').val(); // 58
        TotalData.push(bank_nego);
        var day_nego = $('#day_nego').val(); // 59
        TotalData.push(day_nego);
        var nego_ref = $('#nego_ref').val(); // 60
        TotalData.push(nego_ref);
        var nego_InvNo = $('#nego_InvNo').val(); // 61
        TotalData.push(nego_InvNo);
        var nego_quantity = $('#nego_quantity').val(); // 62
        TotalData.push(nego_quantity);
        var unit_nego = $('#unit_nego').val(); // 63
        TotalData.push(unit_nego);
        var nego_TT = $('#nego_TT').val(); // 64
        TotalData.push(nego_TT);
        var nego_underV = $('#nego_underV').val(); // 65
        TotalData.push(nego_underV);

        var unit_nego_table = $('#unit_nego_table').val(); // 66
        TotalData.push(unit_nego_table);
        var nego_etc = $('#nego_etc').val(); // 67
        TotalData.push(nego_etc);
        var nego_etc_dollor = $('#nego_etc_dollor').val(); // 68
        TotalData.push(nego_etc_dollor);
        var neto_etc_exchange = $('#neto_etc_exchange').val(); // 69
        TotalData.push(neto_etc_exchange);
        var nego_won = $('#nego_won').val(); // 70
        TotalData.push(nego_won);
        var nego_cross = $('#nego_cross').val(); // 71
        TotalData.push(nego_cross);
        var nego_cross_amount = $('#nego_cross_amount').val(); // 72
        TotalData.push(nego_cross_amount);
        var nego_com1_rate = $('#nego_com1_rate').val(); // 73
        TotalData.push(nego_com1_rate);
        var nego_com1_amount = $('#nego_com1_amount').val(); // 74
        TotalData.push(nego_com1_amount);
        var nego_hwanga = $('#nego_hwanga').val(); // 75
        TotalData.push(nego_hwanga);
        var nego_com2_rate = $('#nego_com2_rate').val(); // 76
        TotalData.push(nego_com2_rate);
        var nego_com2_amount = $('#nego_com2_amount').val(); // 77
        TotalData.push(nego_com2_amount);
        var nego_com_total = $('#nego_com_total').val(); // 78
        TotalData.push(nego_com_total);
        var nego_uwon = $('#nego_uwon').val(); // 79
        TotalData.push(nego_uwon);
        var nextnego_nego = $('#nextnego_nego').val(); // 80
        TotalData.push(nextnego_nego);
        var nego_m1 = $('#nego_m1').val(); // 81
        TotalData.push(nego_m1);
        var radio_val = $('input[name=gender]:checked').val(); // 82 radio button
        TotalData.push(radio_val);
        var nego_m3 = $('#nego_m3').val(); // 83
        TotalData.push(nego_m3);
        var buymethod_nego = $('#buymethod_nego').val(); // 84
        TotalData.push(buymethod_nego);
        var nego_m4 = $('#nego_m4').val(); // 85
        TotalData.push(nego_m4);
        var DueDate_nego = $('#DueDate_nego').val(); // 86
        TotalData.push(DueDate_nego);
        var report_nego = $('#report_nego').val(); // 87
        TotalData.push(report_nego);
        var get_nego = $('#get_nego').val(); // 88
        TotalData.push(get_nego);

        var array_table_nego = []; // 89
        length = document.getElementById("table_nego").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'nego_deposit_date' + String(i);
            array_table_nego.push(eval(c1).value);
            var c2 = 'nego_deposit_amount' + String(i);
            array_table_nego.push(eval(c2).value);
            var c3 = 'nego_deposit_content' + String(i);
            array_table_nego.push(eval(c3).value);
        }
        TotalData.push(array_table_nego);

        var nego_incomplete_value = $('#nego_incomplete_value').val(); // 90
        TotalData.push(nego_incomplete_value);
        var nego_comment = $('#nego_comment').val(); // 91
        TotalData.push(nego_comment);
        /////////////////////////////////////////////////////
        // end nego
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start local
        /////////////////////////////////////////////////////
        var array_table_local = []; // 92
        length = document.getElementById("table_local").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_table_local_' + String(i);
            array_table_local.push(eval(c1).getValue());
            var c2 = 'local_table_LC_' + String(i);
            array_table_local.push(eval(c2).value);
            var c3 = 'local_table_QTY_' + String(i);
            array_table_local.push(eval(c3).value);
            var c4 = 'local_table_PRC_' + String(i);
            array_table_local.push(eval(c4).value);
            var c5 = 'local_table_amount_dollor_' + String(i);
            array_table_local.push(eval(c5).value);
            var c6 = 'local_table_amount_won_' + String(i);
            array_table_local.push(eval(c6).value);
            var c7 = 'Datepay_local_' + String(i);
            array_table_local.push(eval(c7).value);
            var c8 = 'local_table_rate_' + String(i);
            array_table_local.push(eval(c8).value);
            var c9 = 'local_table_rate_amount_' + String(i);
            array_table_local.push(eval(c9).value);
        }
        TotalData.push(array_table_local);

        var paydate1_local = $('#paydate1_local').val(); // 93
        TotalData.push(paydate1_local);
        var paydate2_local = $('#paydate2_local').val(); // 94
        TotalData.push(paydate2_local);
        var paydate3_local = $('#paydate3_local').val(); // 95
        TotalData.push(paydate3_local);
        var paydate4_local = $('#paydate4_local').val(); // 96
        TotalData.push(paydate4_local);
        var BillInvoice1 = $('#BillInvoice1').val(); // 97
        TotalData.push(BillInvoice1);
        var BillInvoice2 = $('#BillInvoice2').val(); // 98
        TotalData.push(BillInvoice2);
        var BillInvoice3 = $('#BillInvoice3').val(); // 99
        TotalData.push(BillInvoice3);
        var BillInvoice4 = $('#BillInvoice4').val(); // 100
        TotalData.push(BillInvoice4);
        var BillMoneyInvoice1 = $('#BillMoneyInvoice1').val(); // 101
        TotalData.push(BillMoneyInvoice1);
        var BillMoneyInvoice2 = $('#BillMoneyInvoice2').val(); // 102
        TotalData.push(BillMoneyInvoice2);
        var BillMoneyInvoice3 = $('#BillMoneyInvoice3').val(); // 103
        TotalData.push(BillMoneyInvoice3);
        var BillMoneyInvoice4 = $('#BillMoneyInvoice4').val(); // 104
        TotalData.push(BillMoneyInvoice4);
        var BillDollorInvoice1 = $('#BillDollorInvoice1').val(); // 105
        TotalData.push(BillDollorInvoice1);
        var BillDollorInvoice2 = $('#BillDollorInvoice2').val(); // 106
        TotalData.push(BillDollorInvoice2);
        var BillDollorInvoice3 = $('#BillDollorInvoice3').val(); // 107
        TotalData.push(BillDollorInvoice3);
        var BillDollorInvoice4 = $('#BillDollorInvoice4').val(); // 108
        TotalData.push(BillDollorInvoice4);
        var BillRate1 = $('#BillRate1').val(); // 109
        TotalData.push(BillRate1);
        var BillRate2 = $('#BillRate2').val(); // 110
        TotalData.push(BillRate2);
        var BillRate3 = $('#BillRate3').val(); // 111
        TotalData.push(BillRate3);
        var BillRate4 = $('#BillRate4').val(); // 112
        TotalData.push(BillRate4);
        var local_sunim = $('#local_sunim').val(); // 113
        TotalData.push(local_sunim);
        var local_sunim2 = $('#local_sunim2').val(); // 114
        TotalData.push(local_sunim2);
        var local_demur = $('#local_demur').val(); // 115
        TotalData.push(local_demur);
        var local_demur2 = $('#local_demur2').val(); // 116
        TotalData.push(local_demur2);
        var local_su = $('#local_su').val(); // 117
        TotalData.push(local_su);
        var local_su2 = $('#local_su2').val(); // 118
        TotalData.push(local_su2);
        var local_jukwha = $('#local_jukwha').val(); // 119
        TotalData.push(local_jukwha);
        var local_jukwha2 = $('#local_jukwha2').val(); // 120
        TotalData.push(local_jukwha2);
        var local_transport = $('#local_transport').val(); // 121
        TotalData.push(local_transport);
        var local_transport2 = $('#local_transport2').val(); // 122
        TotalData.push(local_transport2);
        var local_comm = $('#local_comm').val(); // 123
        TotalData.push(local_comm);
        var local_comm2 = $('#local_comm2').val(); // 124
        TotalData.push(local_comm2);
        var paycomm_local = $('#paycomm_local').val(); // 125
        TotalData.push(paycomm_local);
        var clean_local = $('#clean_local').val(); // 126
        TotalData.push(clean_local);
        var local_lc_open = $('#local_lc_open').val(); // 127
        TotalData.push(local_lc_open);
        var local_lc_open2 = $('#local_lc_open2').val(); // 128
        TotalData.push(local_lc_open2);
        var local_receive_LC = $('#local_receive_LC').val(); // 129
        TotalData.push(local_receive_LC);
        var local_receive_LC_won = $('#local_receive_LC_won').val(); // 130
        TotalData.push(local_receive_LC_won);
        var local_u = $('#local_u').val(); // 131
        TotalData.push(local_u);
        var local_u2 = $('#local_u2').val(); // 132
        TotalData.push(local_u2);
        var local_hwanhwan = $('#local_hwanhwan').val(); // 133
        TotalData.push(local_hwanhwan);
        var local_hwanhwan2 = $('#local_hwanhwan2').val(); // 134
        TotalData.push(local_hwanhwan2);
        var local_delay = $('#local_delay').val(); // 135
        TotalData.push(local_delay);
        var local_delay2 = $('#local_delay2').val(); // 136
        TotalData.push(local_delay2);
        var local_less = $('#local_less').val(); // 137
        TotalData.push(local_less)
        var local_less2 = $('#local_less2').val(); // 138
        TotalData.push(local_less2);
        var local_insudelay = $('#local_insudelay').val(); // 139
        TotalData.push(local_insudelay);
        var local_insudelay2 = $('#local_insudelay2').val(); // 140
        TotalData.push(local_insudelay2);
        var local_actual = $('#local_actual').val(); // 141
        TotalData.push(local_actual);
        var local_actual2 = $('#local_actual2').val(); // 142
        TotalData.push(local_actual2);
        var local_special = $('#local_special').val(); // 143
        TotalData.push(local_special);
        /////////////////////////////////////////////////////
        // end local
        /////////////////////////////////////////////////////
        /////////////////////////////////////////////////////
        // start fta
        /////////////////////////////////////////////////////
        var out_fta = $('#out_fta').val(); // 144
        TotalData.push(out_fta);
        var item_fta = $('#item_fta').val(); // 145
        TotalData.push(item_fta);
        var place_fta = $('#place_fta').val(); // 146
        TotalData.push(place_fta);
        var cont_fta = $('#cont_fta').val(); // 147
        TotalData.push(cont_fta);
        /////////////////////////////////////////////////////
        // end fta
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////
        // modal input handle over



        var r = /\d+/;
        var str = /[A-Z]/gi;
        var value = (OrderNo.match(r));
        value = parseFloat(value);
        //value += 1;
        value = pad(value, 4);
        var string12 = OrderNo.match(str);
        var newstring = '';
        for (var i = 0; i < string12.length; i++) {
            newstring += string12[i];
        }
        newstring += String(value);

        var iddb = newstring;
        var idgb = OrderGubun;
        TotalData.push(iddb);
        TotalData.push(idgb);
        /////////////////////////////////////////////////

        $.ajax({
            type: "POST",
            url: "{{ url_for('save_db') }}",
            contentType: "application/json;",
            data: JSON.stringify(TotalData),

            success: function(out) {
                alert(out['msg']);

                if (out['msg'].search("error") == -1) // error 가 없으면 
                {
                    document.getElementById("OrderNo").value = iddb;
                    document.getElementById("OrderGubun").value = idgb;

                    document.getElementById("order_LC").value = iddb + "_" + idgb;

                    location.reload();
                }
            },
            error: function(out) {
                alert("Please check..")
            }
        }); //end of ajax


    }

    function realdelete() {
        TotalData = []
        var OrderNo = $('#deleteDB_ID').val(); // 0
        OrderNo = OrderNo.replace(" ", "");
        TotalData.push(OrderNo);
        var OrderGubun = $('#deleteDB_GB').val(); // 1
        OrderGubun = OrderGubun.replace(" ", "");
        TotalData.push(OrderGubun);

        $.ajax({
            type: "POST",
            url: "{{ url_for('delete_db') }}",
            contentType: "application/json;",
            data: JSON.stringify(TotalData),

            success: function(out) {
                alert(out['msg']);
                location.reload();
            },
            error: function(out) {
                alert("Please check error..");
            }
        }); //end of ajax
    }

    function realmodify() {
        var TotalData = [];

        var buyer_order = $('#buyer_order').val(); // 0
        TotalData.push(buyer_order);
        var OrderNo = $('#OrderNo').val(); // 1
        TotalData.push(OrderNo);
        var OrderGubun = $('#OrderGubun').val(); // 2
        TotalData.push(OrderGubun);
        var agent_order = $('#agent_order').val(); // 3
        TotalData.push(agent_order);
        var datepicker = $('#datepicker').val(); // 4
        TotalData.push(datepicker);
        var date_stand = $('#date_stand').val(); // 5
        TotalData.push(date_stand);
        var date_delivery = $('#date_delivery').val(); // 6
        TotalData.push(date_delivery);
        var term_order = $('#term_order').val(); // 7
        TotalData.push(term_order);
        var arrive_order = $('#arrive_order').val(); // 8
        TotalData.push(arrive_order);
        var payment_order = $('#payment_order').val(); // 9
        TotalData.push(payment_order);
        var order_term = $('#order_term').val(); // 10 - days
        TotalData.push(order_term);
        var method_order = $('#method_order').val(); // 11
        TotalData.push(method_order);
        var document_order = $('#document_order').val(); // 12
        TotalData.push(document_order);
        var order_com1 = $('#order_com1').val(); // 13
        TotalData.push(order_com1);
        var order_com1_amount = $('#order_com1_amount').val(); // 14
        TotalData.push(order_com1_amount);
        var order_com1_to = $('#order_com1_to').val(); // 15
        TotalData.push(order_com1_to);
        var order_com2 = $('#order_com2').val(); // 16
        TotalData.push(order_com2);
        var order_com2_amount = $('#order_com2_amount').val(); // 17
        TotalData.push(order_com2_amount);
        var order_com2_to = $('#order_com2_to').val(); // 18
        TotalData.push(order_com2_to);
        var order_com3 = $('#order_com3').val(); // 19
        TotalData.push(order_com3);
        var order_com3_amount = $('#order_com3_amount').val(); // 20
        TotalData.push(order_com3_amount);
        var order_com3_to = $('#order_com3_to').val(); // 21
        TotalData.push(order_com3_to);
        var order_com4 = $('#order_com4').val(); // 22
        TotalData.push(order_com4);
        var order_com4_amount = $('#order_com4_amount').val(); // 23
        TotalData.push(order_com4_amount);
        var order_com4_to = $('#order_com4_to').val(); // 24
        TotalData.push(order_com4_to);
        var order_com_total = $('#order_com_total').val(); // 25
        TotalData.push(order_com_total);
        var item_order = $('#item_order').val(); // 26
        TotalData.push(item_order);
        var order_DN = $('#order_DN').val(); // 27
        TotalData.push(order_DN);
        var order_LF = $('#order_LF').val(); // 28
        TotalData.push(order_LF);
        var LS_order = $('#LS_order').val(); // 29
        TotalData.push(LS_order);
        var order_remark = $('#order_remark').val(); // 30
        TotalData.push(order_remark);
        var order_suip = $('#order_suip').val(); // 31
        TotalData.push(order_suip);
        var order_ponum = $('#order_ponum').val(); // 32
        TotalData.push(order_ponum);
        var order_quantity = $('#order_quantity').val(); // 33
        TotalData.push(order_quantity);
        var QTY_order = $('#QTY_order').val(); // 34
        TotalData.push(QTY_order);
        var PRC_order = $('#PRC_order').val(); // 35
        TotalData.push(PRC_order);
        var order_prc = $('#order_prc').val(); // 36
        TotalData.push(order_prc);
        var order_cross_rate = $('#order_cross_rate').val(); // 37
        TotalData.push(order_cross_rate);
        var order_dollor = $('#order_dollor').val(); // 38
        TotalData.push(order_dollor);
        var order_LC = $('#order_LC').val(); // 39
        TotalData.push(order_LC);
        var order_receive_LC = $('#order_receive_LC').val(); // 40
        TotalData.push(order_receive_LC);
        var date_SD = $('#date_SD').val(); // 41
        TotalData.push(date_SD);
        var date_ED = $('#date_ED').val(); // 42
        TotalData.push(date_ED);

        var array_table_supply = []; // 43
        var length = document.getElementById("table_supply").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_order_' + String(i);
            array_table_supply.push(eval(c1).getValue());
            var c2 = 'order_table_quantity_' + String(i);
            array_table_supply.push(eval(c2).value);
            var c3 = 'order_table_fob_' + String(i);
            array_table_supply.push(eval(c3).value);
            var c4 = 'order_table_amount_' + String(i);
            array_table_supply.push(eval(c4).value);
            var c5 = 'method_opt_' + String(i);
            array_table_supply.push(eval(c5).getValue());
        }
        TotalData.push(array_table_supply);


        var order_expect_price = $('#order_expect_price').val(); // 44
        TotalData.push(order_expect_price);
        var order_etc_per = $('#order_etc_per').val(); // 45
        TotalData.push(order_etc_per);
        var order_etc_amount = $('#order_etc_amount').val(); // 46
        TotalData.push(order_etc_amount);
        var order_expect_margin = $('#order_expect_margin').val(); // 47
        TotalData.push(order_expect_margin);
        var order_supplyremark = $('#order_supplyremark').val(); // 48
        TotalData.push(order_supplyremark);
        var order_special = $('#order_special').val(); // 49
        TotalData.push(order_special);
        var buyerbank_order = $('#buyerbank_order').val(); // 50
        TotalData.push(buyerbank_order);
        var order_before_order = $('#order_before_order').val(); // 51
        TotalData.push(order_before_order);

        /////////////////////////////////////////////////////
        // end order 
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start shipping
        /////////////////////////////////////////////////////
        var inv_ship = $('#inv_ship').val(); // 52
        TotalData.push(inv_ship);
        var actual_ship = $('#actual_ship').val(); // 53
        TotalData.push(actual_ship);
        var ship_BL = $('#ship_BL').val(); // 54
        TotalData.push(ship_BL);
        var ETA_ship = $('#ETA_ship').val(); // 55
        TotalData.push(ETA_ship);
        var ship_size = $('#ship_size').val(); // 56
        TotalData.push(ship_size);

        var array_table_ship = []; // 57
        length = document.getElementById("tableSPL_ship").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'ship_container' + String(i);
            array_table_ship.push(eval(c1).value);

            var newc = 'ship_SealNo' + String(i);
            array_table_ship.push(eval(newc).value);

            var c2 = 'ship_lotNo' + String(i);
            array_table_ship.push(eval(c2).value);
            var c3 = 'ship_date_chul' + String(i);
            array_table_ship.push(eval(c3).value);
            var c4 = 'ship_amount' + String(i);
            array_table_ship.push(eval(c4).value);
            var c5 = 'ship_company' + String(i);
            array_table_ship.push(eval(c5).value);
            var c6 = 'ship_name' + String(i);
            array_table_ship.push(eval(c6).value);
            //2020-03-26
            //var c7 = 'ship_che'+ String(i);
            //array_table_ship.push(eval(c7).value);
            //var c8 = 'ship_car'+ String(i);
            //array_table_ship.push(eval(c8).value);
            var c9 = 'ship_FT2' + String(i);
            array_table_ship.push(eval(c9).value);
            //var c10 = 'ship_FT4'+ String(i);
            //array_table_ship.push(eval(c10).value);
            var c11 = 'ship_forward' + String(i);
            array_table_ship.push(eval(c11).value);
        }
        TotalData.push(array_table_ship);
        /////////////////////////////////////////////////////
        // end shipment
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start nego
        /////////////////////////////////////////////////////
        var bank_nego = $('#bank_nego').val(); // 58
        TotalData.push(bank_nego);
        var day_nego = $('#day_nego').val(); // 59
        TotalData.push(day_nego);
        var nego_ref = $('#nego_ref').val(); // 60
        TotalData.push(nego_ref);
        var nego_InvNo = $('#nego_InvNo').val(); // 61
        TotalData.push(nego_InvNo);
        var nego_quantity = $('#nego_quantity').val(); // 62
        TotalData.push(nego_quantity);
        var unit_nego = $('#unit_nego').val(); // 63
        TotalData.push(unit_nego);
        var nego_TT = $('#nego_TT').val(); // 64
        TotalData.push(nego_TT);
        var nego_underV = $('#nego_underV').val(); // 65
        TotalData.push(nego_underV);

        var unit_nego_table = $('#unit_nego_table').val(); // 66
        TotalData.push(unit_nego_table);
        var nego_etc = $('#nego_etc').val(); // 67
        TotalData.push(nego_etc);
        var nego_etc_dollor = $('#nego_etc_dollor').val(); // 68
        TotalData.push(nego_etc_dollor);
        var neto_etc_exchange = $('#neto_etc_exchange').val(); // 69
        TotalData.push(neto_etc_exchange);
        var nego_won = $('#nego_won').val(); // 70
        TotalData.push(nego_won);
        var nego_cross = $('#nego_cross').val(); // 71
        TotalData.push(nego_cross);
        var nego_cross_amount = $('#nego_cross_amount').val(); // 72
        TotalData.push(nego_cross_amount);
        var nego_com1_rate = $('#nego_com1_rate').val(); // 73
        TotalData.push(nego_com1_rate);
        var nego_com1_amount = $('#nego_com1_amount').val(); // 74
        TotalData.push(nego_com1_amount);
        var nego_hwanga = $('#nego_hwanga').val(); // 75
        TotalData.push(nego_hwanga);
        var nego_com2_rate = $('#nego_com2_rate').val(); // 76
        TotalData.push(nego_com2_rate);
        var nego_com2_amount = $('#nego_com2_amount').val(); // 77
        TotalData.push(nego_com2_amount);
        var nego_com_total = $('#nego_com_total').val(); // 78
        TotalData.push(nego_com_total);
        var nego_uwon = $('#nego_uwon').val(); // 79
        TotalData.push(nego_uwon);
        var nextnego_nego = $('#nextnego_nego').val(); // 80
        TotalData.push(nextnego_nego);
        var nego_m1 = $('#nego_m1').val(); // 81
        TotalData.push(nego_m1);
        var radio_val = $('input[name=gender]:checked').val(); // 82 radio button
        TotalData.push(radio_val);
        var nego_m3 = $('#nego_m3').val(); // 83
        TotalData.push(nego_m3);
        var buymethod_nego = $('#buymethod_nego').val(); // 84
        TotalData.push(buymethod_nego);
        var nego_m4 = $('#nego_m4').val(); // 85
        TotalData.push(nego_m4);
        var DueDate_nego = $('#DueDate_nego').val(); // 86
        TotalData.push(DueDate_nego);
        var report_nego = $('#report_nego').val(); // 87
        TotalData.push(report_nego);
        var get_nego = $('#get_nego').val(); // 88
        TotalData.push(get_nego);

        var array_table_nego = []; // 89
        length = document.getElementById("table_nego").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'nego_deposit_date' + String(i);
            array_table_nego.push(eval(c1).value);
            var c2 = 'nego_deposit_amount' + String(i);
            array_table_nego.push(eval(c2).value);
            var c3 = 'nego_deposit_content' + String(i);
            array_table_nego.push(eval(c3).value);
        }
        TotalData.push(array_table_nego);

        var nego_incomplete_value = $('#nego_incomplete_value').val(); // 90
        TotalData.push(nego_incomplete_value);
        var nego_comment = $('#nego_comment').val(); // 91
        TotalData.push(nego_comment);
        /////////////////////////////////////////////////////
        // end nego
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start local
        /////////////////////////////////////////////////////
        var array_table_local = []; // 92
        length = document.getElementById("table_local").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_table_local_' + String(i);
            array_table_local.push(eval(c1).getValue());
            var c2 = 'local_table_LC_' + String(i);
            array_table_local.push(eval(c2).value);
            var c3 = 'local_table_QTY_' + String(i);
            array_table_local.push(eval(c3).value);
            var c4 = 'local_table_PRC_' + String(i);
            array_table_local.push(eval(c4).value);
            var c5 = 'local_table_amount_dollor_' + String(i);
            array_table_local.push(eval(c5).value);
            var c6 = 'local_table_amount_won_' + String(i);
            array_table_local.push(eval(c6).value);
            var c7 = 'Datepay_local_' + String(i);
            array_table_local.push(eval(c7).value);
            var c8 = 'local_table_rate_' + String(i);
            array_table_local.push(eval(c8).value);
            var c9 = 'local_table_rate_amount_' + String(i);
            array_table_local.push(eval(c9).value);
        }
        TotalData.push(array_table_local);

        var paydate1_local = $('#paydate1_local').val(); // 93
        TotalData.push(paydate1_local);
        var paydate2_local = $('#paydate2_local').val(); // 94
        TotalData.push(paydate2_local);
        var paydate3_local = $('#paydate3_local').val(); // 95
        TotalData.push(paydate3_local);
        var paydate4_local = $('#paydate4_local').val(); // 96
        TotalData.push(paydate4_local);
        var BillInvoice1 = $('#BillInvoice1').val(); // 97
        TotalData.push(BillInvoice1);
        var BillInvoice2 = $('#BillInvoice2').val(); // 98
        TotalData.push(BillInvoice2);
        var BillInvoice3 = $('#BillInvoice3').val(); // 99
        TotalData.push(BillInvoice3);
        var BillInvoice4 = $('#BillInvoice4').val(); // 100
        TotalData.push(BillInvoice4);
        var BillMoneyInvoice1 = $('#BillMoneyInvoice1').val(); // 101
        TotalData.push(BillMoneyInvoice1);
        var BillMoneyInvoice2 = $('#BillMoneyInvoice2').val(); // 102
        TotalData.push(BillMoneyInvoice2);
        var BillMoneyInvoice3 = $('#BillMoneyInvoice3').val(); // 103
        TotalData.push(BillMoneyInvoice3);
        var BillMoneyInvoice4 = $('#BillMoneyInvoice4').val(); // 104
        TotalData.push(BillMoneyInvoice4);
        var BillDollorInvoice1 = $('#BillDollorInvoice1').val(); // 105
        TotalData.push(BillDollorInvoice1);
        var BillDollorInvoice2 = $('#BillDollorInvoice2').val(); // 106
        TotalData.push(BillDollorInvoice2);
        var BillDollorInvoice3 = $('#BillDollorInvoice3').val(); // 107
        TotalData.push(BillDollorInvoice3);
        var BillDollorInvoice4 = $('#BillDollorInvoice4').val(); // 108
        TotalData.push(BillDollorInvoice4);
        var BillRate1 = $('#BillRate1').val(); // 109
        TotalData.push(BillRate1);
        var BillRate2 = $('#BillRate2').val(); // 110
        TotalData.push(BillRate2);
        var BillRate3 = $('#BillRate3').val(); // 111
        TotalData.push(BillRate3);
        var BillRate4 = $('#BillRate4').val(); // 112
        TotalData.push(BillRate4);
        var local_sunim = $('#local_sunim').val(); // 113
        TotalData.push(local_sunim);
        var local_sunim2 = $('#local_sunim2').val(); // 114
        TotalData.push(local_sunim2);
        var local_demur = $('#local_demur').val(); // 115
        TotalData.push(local_demur);
        var local_demur2 = $('#local_demur2').val(); // 116
        TotalData.push(local_demur2);
        var local_su = $('#local_su').val(); // 117
        TotalData.push(local_su);
        var local_su2 = $('#local_su2').val(); // 118
        TotalData.push(local_su2);
        var local_jukwha = $('#local_jukwha').val(); // 119
        TotalData.push(local_jukwha);
        var local_jukwha2 = $('#local_jukwha2').val(); // 120
        TotalData.push(local_jukwha2);
        var local_transport = $('#local_transport').val(); // 121
        TotalData.push(local_transport);
        var local_transport2 = $('#local_transport2').val(); // 122
        TotalData.push(local_transport2);
        var local_comm = $('#local_comm').val(); // 123
        TotalData.push(local_comm);
        var local_comm2 = $('#local_comm2').val(); // 124
        TotalData.push(local_comm2);
        var paycomm_local = $('#paycomm_local').val(); // 125
        TotalData.push(paycomm_local);
        var clean_local = $('#clean_local').val(); // 126
        TotalData.push(clean_local);
        var local_lc_open = $('#local_lc_open').val(); // 127
        TotalData.push(local_lc_open);
        var local_lc_open2 = $('#local_lc_open2').val(); // 128
        TotalData.push(local_lc_open2);
        var local_receive_LC = $('#local_receive_LC').val(); // 129
        TotalData.push(local_receive_LC);
        var local_receive_LC_won = $('#local_receive_LC_won').val(); // 130
        TotalData.push(local_receive_LC_won);
        var local_u = $('#local_u').val(); // 131
        TotalData.push(local_u);
        var local_u2 = $('#local_u2').val(); // 132
        TotalData.push(local_u2);
        var local_hwanhwan = $('#local_hwanhwan').val(); // 133
        TotalData.push(local_hwanhwan);
        var local_hwanhwan2 = $('#local_hwanhwan2').val(); // 134
        TotalData.push(local_hwanhwan2);
        var local_delay = $('#local_delay').val(); // 135
        TotalData.push(local_delay);
        var local_delay2 = $('#local_delay2').val(); // 136
        TotalData.push(local_delay2);
        var local_less = $('#local_less').val(); // 137
        TotalData.push(local_less)
        var local_less2 = $('#local_less2').val(); // 138
        TotalData.push(local_less2);
        var local_insudelay = $('#local_insudelay').val(); // 139
        TotalData.push(local_insudelay);
        var local_insudelay2 = $('#local_insudelay2').val(); // 140
        TotalData.push(local_insudelay2);
        var local_actual = $('#local_actual').val(); // 141
        TotalData.push(local_actual);
        var local_actual2 = $('#local_actual2').val(); // 142
        TotalData.push(local_actual2);
        var local_special = $('#local_special').val(); // 143
        TotalData.push(local_special);
        /////////////////////////////////////////////////////
        // end local
        /////////////////////////////////////////////////////
        /////////////////////////////////////////////////////
        // start fta
        /////////////////////////////////////////////////////
        var out_fta = $('#out_fta').val(); // 144
        TotalData.push(out_fta);
        var item_fta = $('#item_fta').val(); // 145
        TotalData.push(item_fta);
        var place_fta = $('#place_fta').val(); // 146
        TotalData.push(place_fta);
        var cont_fta = $('#cont_fta').val(); // 147
        TotalData.push(cont_fta);
        /////////////////////////////////////////////////////
        // end fta
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////
        // modal input handle over
        var iddb = $('#modifyDB_ID').val();
        var idgb = $('#modifyDB_GB').val();
        TotalData.push(iddb);
        TotalData.push(idgb);
        /////////////////////////////////////////////////


        $.ajax({
            type: "POST",
            url: "{{ url_for('modify_db') }}",
            contentType: "application/json;",
            data: JSON.stringify(TotalData),

            success: function(out) {
                alert(out['msg']);

            },
            error: function(out) {
                alert("Please check error..");
            }
        }); //end of ajax
    }

    function realmodify_sidebutton() {
        var TotalData = [];

        var buyer_order = $('#buyer_order').val(); // 0
        TotalData.push(buyer_order);
        var OrderNo = $('#OrderNo').val(); // 1
        TotalData.push(OrderNo);
        var OrderGubun = $('#OrderGubun').val(); // 2
        TotalData.push(OrderGubun);
        var agent_order = $('#agent_order').val(); // 3
        TotalData.push(agent_order);
        var datepicker = $('#datepicker').val(); // 4
        TotalData.push(datepicker);
        var date_stand = $('#date_stand').val(); // 5
        TotalData.push(date_stand);
        var date_delivery = $('#date_delivery').val(); // 6
        TotalData.push(date_delivery);
        var term_order = $('#term_order').val(); // 7
        TotalData.push(term_order);
        var arrive_order = $('#arrive_order').val(); // 8
        TotalData.push(arrive_order);
        var payment_order = $('#payment_order').val(); // 9
        TotalData.push(payment_order);
        var order_term = $('#order_term').val(); // 10 - days
        TotalData.push(order_term);
        var method_order = $('#method_order').val(); // 11
        TotalData.push(method_order);
        var document_order = $('#document_order').val(); // 12
        TotalData.push(document_order);
        var order_com1 = $('#order_com1').val(); // 13
        TotalData.push(order_com1);
        var order_com1_amount = $('#order_com1_amount').val(); // 14
        TotalData.push(order_com1_amount);
        var order_com1_to = $('#order_com1_to').val(); // 15
        TotalData.push(order_com1_to);
        var order_com2 = $('#order_com2').val(); // 16
        TotalData.push(order_com2);
        var order_com2_amount = $('#order_com2_amount').val(); // 17
        TotalData.push(order_com2_amount);
        var order_com2_to = $('#order_com2_to').val(); // 18
        TotalData.push(order_com2_to);
        var order_com3 = $('#order_com3').val(); // 19
        TotalData.push(order_com3);
        var order_com3_amount = $('#order_com3_amount').val(); // 20
        TotalData.push(order_com3_amount);
        var order_com3_to = $('#order_com3_to').val(); // 21
        TotalData.push(order_com3_to);
        var order_com4 = $('#order_com4').val(); // 22
        TotalData.push(order_com4);
        var order_com4_amount = $('#order_com4_amount').val(); // 23
        TotalData.push(order_com4_amount);
        var order_com4_to = $('#order_com4_to').val(); // 24
        TotalData.push(order_com4_to);
        var order_com_total = $('#order_com_total').val(); // 25
        TotalData.push(order_com_total);
        var item_order = $('#item_order').val(); // 26
        TotalData.push(item_order);
        var order_DN = $('#order_DN').val(); // 27
        TotalData.push(order_DN);
        var order_LF = $('#order_LF').val(); // 28
        TotalData.push(order_LF);
        var LS_order = $('#LS_order').val(); // 29
        TotalData.push(LS_order);
        var order_remark = $('#order_remark').val(); // 30
        TotalData.push(order_remark);
        var order_suip = $('#order_suip').val(); // 31
        TotalData.push(order_suip);
        var order_ponum = $('#order_ponum').val(); // 32
        TotalData.push(order_ponum);
        var order_quantity = $('#order_quantity').val(); // 33
        TotalData.push(order_quantity);
        var QTY_order = $('#QTY_order').val(); // 34
        TotalData.push(QTY_order);
        var PRC_order = $('#PRC_order').val(); // 35
        TotalData.push(PRC_order);
        var order_prc = $('#order_prc').val(); // 36
        TotalData.push(order_prc);
        var order_cross_rate = $('#order_cross_rate').val(); // 37
        TotalData.push(order_cross_rate);
        var order_dollor = $('#order_dollor').val(); // 38
        TotalData.push(order_dollor);
        var order_LC = $('#order_LC').val(); // 39
        TotalData.push(order_LC);
        var order_receive_LC = $('#order_receive_LC').val(); // 40
        TotalData.push(order_receive_LC);
        var date_SD = $('#date_SD').val(); // 41
        TotalData.push(date_SD);
        var date_ED = $('#date_ED').val(); // 42
        TotalData.push(date_ED);

        var array_table_supply = []; // 43
        var length = document.getElementById("table_supply").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_order_' + String(i);
            array_table_supply.push(eval(c1).getValue());
            var c2 = 'order_table_quantity_' + String(i);
            array_table_supply.push(eval(c2).value);
            var c3 = 'order_table_fob_' + String(i);
            array_table_supply.push(eval(c3).value);
            var c4 = 'order_table_amount_' + String(i);
            array_table_supply.push(eval(c4).value);
            var c5 = 'method_opt_' + String(i);
            array_table_supply.push(eval(c5).getValue());
        }
        TotalData.push(array_table_supply);


        var order_expect_price = $('#order_expect_price').val(); // 44
        TotalData.push(order_expect_price);
        var order_etc_per = $('#order_etc_per').val(); // 45
        TotalData.push(order_etc_per);
        var order_etc_amount = $('#order_etc_amount').val(); // 46
        TotalData.push(order_etc_amount);
        var order_expect_margin = $('#order_expect_margin').val(); // 47
        TotalData.push(order_expect_margin);
        var order_supplyremark = $('#order_supplyremark').val(); // 48
        TotalData.push(order_supplyremark);
        var order_special = $('#order_special').val(); // 49
        TotalData.push(order_special);
        var buyerbank_order = $('#buyerbank_order').val(); // 50
        TotalData.push(buyerbank_order);
        var order_before_order = $('#order_before_order').val(); // 51
        TotalData.push(order_before_order);

        /////////////////////////////////////////////////////
        // end order 
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start shipping
        /////////////////////////////////////////////////////
        var inv_ship = $('#inv_ship').val(); // 52
        TotalData.push(inv_ship);
        var actual_ship = $('#actual_ship').val(); // 53
        TotalData.push(actual_ship);
        var ship_BL = $('#ship_BL').val(); // 54
        TotalData.push(ship_BL);
        var ETA_ship = $('#ETA_ship').val(); // 55
        TotalData.push(ETA_ship);
        var ship_size = $('#ship_size').val(); // 56
        TotalData.push(ship_size);

        var array_table_ship = []; // 57
        length = document.getElementById("tableSPL_ship").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'ship_container' + String(i);
            array_table_ship.push(eval(c1).value);

            var newc = 'ship_SealNo' + String(i);
            array_table_ship.push(eval(newc).value);

            var c2 = 'ship_lotNo' + String(i);
            array_table_ship.push(eval(c2).value);
            var c3 = 'ship_date_chul' + String(i);
            array_table_ship.push(eval(c3).value);
            var c4 = 'ship_amount' + String(i);
            array_table_ship.push(eval(c4).value);
            var c5 = 'ship_company' + String(i);
            array_table_ship.push(eval(c5).value);
            var c6 = 'ship_name' + String(i);
            array_table_ship.push(eval(c6).value);
            //2020-03-26
            //var c7 = 'ship_che'+ String(i);
            //array_table_ship.push(eval(c7).value);
            //var c8 = 'ship_car'+ String(i);
            //array_table_ship.push(eval(c8).value);
            var c9 = 'ship_FT2' + String(i);
            array_table_ship.push(eval(c9).value);
            //var c10 = 'ship_FT4'+ String(i);
            //array_table_ship.push(eval(c10).value);
            var c11 = 'ship_forward' + String(i);
            array_table_ship.push(eval(c11).value);
        }
        TotalData.push(array_table_ship);
        /////////////////////////////////////////////////////
        // end shipment
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start nego
        /////////////////////////////////////////////////////
        var bank_nego = $('#bank_nego').val(); // 58
        TotalData.push(bank_nego);
        var day_nego = $('#day_nego').val(); // 59
        TotalData.push(day_nego);
        var nego_ref = $('#nego_ref').val(); // 60
        TotalData.push(nego_ref);
        var nego_InvNo = $('#nego_InvNo').val(); // 61
        TotalData.push(nego_InvNo);
        var nego_quantity = $('#nego_quantity').val(); // 62
        TotalData.push(nego_quantity);
        var unit_nego = $('#unit_nego').val(); // 63
        TotalData.push(unit_nego);
        var nego_TT = $('#nego_TT').val(); // 64
        TotalData.push(nego_TT);
        var nego_underV = $('#nego_underV').val(); // 65
        TotalData.push(nego_underV);

        var unit_nego_table = $('#unit_nego_table').val(); // 66
        TotalData.push(unit_nego_table);
        var nego_etc = $('#nego_etc').val(); // 67
        TotalData.push(nego_etc);
        var nego_etc_dollor = $('#nego_etc_dollor').val(); // 68
        TotalData.push(nego_etc_dollor);
        var neto_etc_exchange = $('#neto_etc_exchange').val(); // 69
        TotalData.push(neto_etc_exchange);
        var nego_won = $('#nego_won').val(); // 70
        TotalData.push(nego_won);
        var nego_cross = $('#nego_cross').val(); // 71
        TotalData.push(nego_cross);
        var nego_cross_amount = $('#nego_cross_amount').val(); // 72
        TotalData.push(nego_cross_amount);
        var nego_com1_rate = $('#nego_com1_rate').val(); // 73
        TotalData.push(nego_com1_rate);
        var nego_com1_amount = $('#nego_com1_amount').val(); // 74
        TotalData.push(nego_com1_amount);
        var nego_hwanga = $('#nego_hwanga').val(); // 75
        TotalData.push(nego_hwanga);
        var nego_com2_rate = $('#nego_com2_rate').val(); // 76
        TotalData.push(nego_com2_rate);
        var nego_com2_amount = $('#nego_com2_amount').val(); // 77
        TotalData.push(nego_com2_amount);
        var nego_com_total = $('#nego_com_total').val(); // 78
        TotalData.push(nego_com_total);
        var nego_uwon = $('#nego_uwon').val(); // 79
        TotalData.push(nego_uwon);
        var nextnego_nego = $('#nextnego_nego').val(); // 80
        TotalData.push(nextnego_nego);
        var nego_m1 = $('#nego_m1').val(); // 81
        TotalData.push(nego_m1);
        var radio_val = $('input[name=gender]:checked').val(); // 82 radio button
        TotalData.push(radio_val);
        var nego_m3 = $('#nego_m3').val(); // 83
        TotalData.push(nego_m3);
        var buymethod_nego = $('#buymethod_nego').val(); // 84
        TotalData.push(buymethod_nego);
        var nego_m4 = $('#nego_m4').val(); // 85
        TotalData.push(nego_m4);
        var DueDate_nego = $('#DueDate_nego').val(); // 86
        TotalData.push(DueDate_nego);
        var report_nego = $('#report_nego').val(); // 87
        TotalData.push(report_nego);
        var get_nego = $('#get_nego').val(); // 88
        TotalData.push(get_nego);

        var array_table_nego = []; // 89
        length = document.getElementById("table_nego").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'nego_deposit_date' + String(i);
            array_table_nego.push(eval(c1).value);
            var c2 = 'nego_deposit_amount' + String(i);
            array_table_nego.push(eval(c2).value);
            var c3 = 'nego_deposit_content' + String(i);
            array_table_nego.push(eval(c3).value);
        }
        TotalData.push(array_table_nego);

        var nego_incomplete_value = $('#nego_incomplete_value').val(); // 90
        TotalData.push(nego_incomplete_value);
        var nego_comment = $('#nego_comment').val(); // 91
        TotalData.push(nego_comment);
        /////////////////////////////////////////////////////
        // end nego
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////////
        // start local
        /////////////////////////////////////////////////////
        var array_table_local = []; // 92
        length = document.getElementById("table_local").rows.length;
        for (var i = 0; i < length - 1; i++) {
            var c1 = 'company_table_local_' + String(i);
            array_table_local.push(eval(c1).getValue());
            var c2 = 'local_table_LC_' + String(i);
            array_table_local.push(eval(c2).value);
            var c3 = 'local_table_QTY_' + String(i);
            array_table_local.push(eval(c3).value);
            var c4 = 'local_table_PRC_' + String(i);
            array_table_local.push(eval(c4).value);
            var c5 = 'local_table_amount_dollor_' + String(i);
            array_table_local.push(eval(c5).value);
            var c6 = 'local_table_amount_won_' + String(i);
            array_table_local.push(eval(c6).value);
            var c7 = 'Datepay_local_' + String(i);
            array_table_local.push(eval(c7).value);
            var c8 = 'local_table_rate_' + String(i);
            array_table_local.push(eval(c8).value);
            var c9 = 'local_table_rate_amount_' + String(i);
            array_table_local.push(eval(c9).value);
        }
        TotalData.push(array_table_local);

        var paydate1_local = $('#paydate1_local').val(); // 93
        TotalData.push(paydate1_local);
        var paydate2_local = $('#paydate2_local').val(); // 94
        TotalData.push(paydate2_local);
        var paydate3_local = $('#paydate3_local').val(); // 95
        TotalData.push(paydate3_local);
        var paydate4_local = $('#paydate4_local').val(); // 96
        TotalData.push(paydate4_local);
        var BillInvoice1 = $('#BillInvoice1').val(); // 97
        TotalData.push(BillInvoice1);
        var BillInvoice2 = $('#BillInvoice2').val(); // 98
        TotalData.push(BillInvoice2);
        var BillInvoice3 = $('#BillInvoice3').val(); // 99
        TotalData.push(BillInvoice3);
        var BillInvoice4 = $('#BillInvoice4').val(); // 100
        TotalData.push(BillInvoice4);
        var BillMoneyInvoice1 = $('#BillMoneyInvoice1').val(); // 101
        TotalData.push(BillMoneyInvoice1);
        var BillMoneyInvoice2 = $('#BillMoneyInvoice2').val(); // 102
        TotalData.push(BillMoneyInvoice2);
        var BillMoneyInvoice3 = $('#BillMoneyInvoice3').val(); // 103
        TotalData.push(BillMoneyInvoice3);
        var BillMoneyInvoice4 = $('#BillMoneyInvoice4').val(); // 104
        TotalData.push(BillMoneyInvoice4);
        var BillDollorInvoice1 = $('#BillDollorInvoice1').val(); // 105
        TotalData.push(BillDollorInvoice1);
        var BillDollorInvoice2 = $('#BillDollorInvoice2').val(); // 106
        TotalData.push(BillDollorInvoice2);
        var BillDollorInvoice3 = $('#BillDollorInvoice3').val(); // 107
        TotalData.push(BillDollorInvoice3);
        var BillDollorInvoice4 = $('#BillDollorInvoice4').val(); // 108
        TotalData.push(BillDollorInvoice4);
        var BillRate1 = $('#BillRate1').val(); // 109
        TotalData.push(BillRate1);
        var BillRate2 = $('#BillRate2').val(); // 110
        TotalData.push(BillRate2);
        var BillRate3 = $('#BillRate3').val(); // 111
        TotalData.push(BillRate3);
        var BillRate4 = $('#BillRate4').val(); // 112
        TotalData.push(BillRate4);
        var local_sunim = $('#local_sunim').val(); // 113
        TotalData.push(local_sunim);
        var local_sunim2 = $('#local_sunim2').val(); // 114
        TotalData.push(local_sunim2);
        var local_demur = $('#local_demur').val(); // 115
        TotalData.push(local_demur);
        var local_demur2 = $('#local_demur2').val(); // 116
        TotalData.push(local_demur2);
        var local_su = $('#local_su').val(); // 117
        TotalData.push(local_su);
        var local_su2 = $('#local_su2').val(); // 118
        TotalData.push(local_su2);
        var local_jukwha = $('#local_jukwha').val(); // 119
        TotalData.push(local_jukwha);
        var local_jukwha2 = $('#local_jukwha2').val(); // 120
        TotalData.push(local_jukwha2);
        var local_transport = $('#local_transport').val(); // 121
        TotalData.push(local_transport);
        var local_transport2 = $('#local_transport2').val(); // 122
        TotalData.push(local_transport2);
        var local_comm = $('#local_comm').val(); // 123
        TotalData.push(local_comm);
        var local_comm2 = $('#local_comm2').val(); // 124
        TotalData.push(local_comm2);
        var paycomm_local = $('#paycomm_local').val(); // 125
        TotalData.push(paycomm_local);
        var clean_local = $('#clean_local').val(); // 126
        TotalData.push(clean_local);
        var local_lc_open = $('#local_lc_open').val(); // 127
        TotalData.push(local_lc_open);
        var local_lc_open2 = $('#local_lc_open2').val(); // 128
        TotalData.push(local_lc_open2);
        var local_receive_LC = $('#local_receive_LC').val(); // 129
        TotalData.push(local_receive_LC);
        var local_receive_LC_won = $('#local_receive_LC_won').val(); // 130
        TotalData.push(local_receive_LC_won);
        var local_u = $('#local_u').val(); // 131
        TotalData.push(local_u);
        var local_u2 = $('#local_u2').val(); // 132
        TotalData.push(local_u2);
        var local_hwanhwan = $('#local_hwanhwan').val(); // 133
        TotalData.push(local_hwanhwan);
        var local_hwanhwan2 = $('#local_hwanhwan2').val(); // 134
        TotalData.push(local_hwanhwan2);
        var local_delay = $('#local_delay').val(); // 135
        TotalData.push(local_delay);
        var local_delay2 = $('#local_delay2').val(); // 136
        TotalData.push(local_delay2);
        var local_less = $('#local_less').val(); // 137
        TotalData.push(local_less)
        var local_less2 = $('#local_less2').val(); // 138
        TotalData.push(local_less2);
        var local_insudelay = $('#local_insudelay').val(); // 139
        TotalData.push(local_insudelay);
        var local_insudelay2 = $('#local_insudelay2').val(); // 140
        TotalData.push(local_insudelay2);
        var local_actual = $('#local_actual').val(); // 141
        TotalData.push(local_actual);
        var local_actual2 = $('#local_actual2').val(); // 142
        TotalData.push(local_actual2);
        var local_special = $('#local_special').val(); // 143
        TotalData.push(local_special);
        /////////////////////////////////////////////////////
        // end local
        /////////////////////////////////////////////////////
        /////////////////////////////////////////////////////
        // start fta
        /////////////////////////////////////////////////////
        var out_fta = $('#out_fta').val(); // 144
        TotalData.push(out_fta);
        var item_fta = $('#item_fta').val(); // 145
        TotalData.push(item_fta);
        var place_fta = $('#place_fta').val(); // 146
        TotalData.push(place_fta);
        var cont_fta = $('#cont_fta').val(); // 147
        TotalData.push(cont_fta);
        /////////////////////////////////////////////////////
        // end fta
        /////////////////////////////////////////////////////

        /////////////////////////////////////////////////
        // modal input handle over
        var iddb = OrderNo;
        var idgb = OrderGubun;
        TotalData.push(iddb);
        TotalData.push(idgb);
        /////////////////////////////////////////////////


        $.ajax({
            type: "POST",
            url: "{{ url_for('modify_db') }}",
            contentType: "application/json;",
            data: JSON.stringify(TotalData),

            success: function(out) {
                alert(out['msg']);

            },
            error: function(out) {
                alert("Please check error..");
            }
        }); //end of ajax
    }

    //2020-03-27
    function gohome() {
        for (var i = 0; i < list1.length; i++) {
            myFuncShow(list1[i]);
        }
        for (var i = 0; i < list2.length; i++) {
            myFuncHide(list2[i]);
        }
        for (var i = 0; i < listbutton.length; i++) {
            myFuncHide(listbutton[i]);
        }
        myFuncShow('myBtn');
        myFuncShow('myBtn_order_sheet');
        myFuncHide('myBtn_home');
    }

    function save_contract_invoice() {
        TotalData = [];

        let datano = $('#contract2_invoice_OrderNo').val();
        let datagubun = $('#contract2_invoice_OrderGubun').val();
        let datainvoice = $('#contract_invoice_Loading').val();
        TotalData.push(datano);
        TotalData.push(datagubun);
        TotalData.push(datainvoice);

        $.ajax({
            type: "POST",
            url: "{{ url_for('save_contract_invoice') }}",
            contentType: "application/json;",
            data: JSON.stringify(TotalData),

            success: function(out) {
                alert(out['msg']);
            },
            error: function(out) {
                alert("Please check error..");
            }
        }); //end of ajax
    }

    function save_contract2() {
        TotalData = [];

        var datano = $('#contract2_invoice_OrderNo').val();
        var datagubun = $('#contract2_invoice_OrderGubun').val();

        let contract2_invoice_shipper = $("#contract2_invoice_shipper").val();
        let date_contract2_ship = $("#date_contract2_ship").val();
        let contract2_loading = $("#contract2_loading").val();
        let contract2_insurance = $("#contract2_insurance").val();
        let date_contract2_contract_date = $("#date_contract2_contract_date").val();
        let contract2_no = $("#contract2_no").val();
        let contract2_reference = $("#contract2_reference").val();
        let contract2_discharging = $("#contract2_discharging").val();
        let contract2_trans = $("#contract2_trans").val();
        let contract2_shipment = $("#contract2_shipment").val(); // partial shipment
        let contract2_payment = $("#contract2_payment").val();
        let contract2_remark = $("#contract2_remark").val();
        let contract2_term = $("#contract2_term").val();

        let contract2_goods_1 = $("#contract2_goods_1").val();
        let contract2_goods_2 = $("#contract2_goods_2").val();
        let contract2_goods_3 = $("#contract2_goods_3").val();
        let contract2_goods_4 = $("#contract2_goods_4").val();
        let contract2_goods1 = contract2_goods_1 + ';' + contract2_goods_2 + ';' + contract2_goods_3 + ';' + contract2_goods_4;

        let contract2_goods_5 = $("#contract2_goods_5").val();
        let contract2_goods_6 = $("#contract2_goods_6").val();
        let contract2_goods_7 = $("#contract2_goods_7").val();
        let contract2_goods_8 = $("#contract2_goods_8").val();
        let contract2_goods2 = contract2_goods_5 + ';' + contract2_goods_6 + ';' + contract2_goods_7 + ';' + contract2_goods_8;

        let contract2_goods_9 = $("#contract2_goods_9").val();
        let contract2_goods_10 = $("#contract2_goods_10").val();
        let contract2_goods_11 = $("#contract2_goods_11").val();
        let contract2_goods_12 = $("#contract2_goods_12").val();
        let contract2_goods3 = contract2_goods_9 + ';' + contract2_goods_10 + ';' + contract2_goods_11 + ';' + contract2_goods_12;

        let contract2_quantity_1 = $("#contract2_quantity_1").val();
        let contract2_quantity_2 = $("#contract2_quantity_2").val();
        let contract2_quantity_3 = $("#contract2_quantity_3").val();
        let contract2_quantity_total = $("#contract2_quantity_total").val();

        let contract2_price_1 = $("#contract2_price_1").val();
        let contract2_price_2 = $("#contract2_price_2").val();
        let contract2_price_3 = $("#contract2_price_3").val();

        let contract2_amount_1 = $("#contract2_amount_1").val();
        let contract2_amount_2 = $("#contract2_amount_2").val();
        let contract2_amount_3 = $("#contract2_amount_3").val();
        let contract2_amount_total = $("#contract2_amount_total").val();

        TotalData.push(datano);
        TotalData.push(datagubun);
        TotalData.push(contract2_invoice_shipper);
        TotalData.push(date_contract2_ship);
        TotalData.push(contract2_loading);
        TotalData.push(contract2_insurance);
        TotalData.push(date_contract2_contract_date);
        TotalData.push(contract2_no);
        TotalData.push(contract2_reference);
        TotalData.push(contract2_discharging);
        TotalData.push(contract2_trans);
        TotalData.push(contract2_shipment);
        TotalData.push(contract2_payment);
        TotalData.push(contract2_remark);
        TotalData.push(contract2_term);
        TotalData.push(contract2_goods1);
        TotalData.push(contract2_goods2);
        TotalData.push(contract2_goods3);
        TotalData.push(contract2_quantity_1);
        TotalData.push(contract2_quantity_2);
        TotalData.push(contract2_quantity_3);
        TotalData.push(contract2_quantity_total);
        TotalData.push(contract2_price_1);
        TotalData.push(contract2_price_2);
        TotalData.push(contract2_price_3);
        TotalData.push(contract2_amount_1);
        TotalData.push(contract2_amount_2);
        TotalData.push(contract2_amount_3);
        TotalData.push(contract2_amount_total);

        $.ajax({
            type: "POST",
            url: "{{ url_for('save_contract2') }}",
            contentType: "application/json;",
            data: JSON.stringify(TotalData),

            success: function(out) {
                alert(out['msg']);
            },
            error: function(out) {
                alert("Please check error..");
            }
        }); //end of ajax
    }

    function setReadyCalculation(input) {
        input = input.replace(/[^0-9.]/g, "");
        if (input == '' || input == ' ')
            input = '0';


        //input = input.replace(/,/g,"");
        //input = input.replace(/\$/g,"");
        //input = input.replace(/won/g,"");

        //var target = 'New York123'
        input = input.replace(/[^0-9.]/g, "");

        input = parseFloat(input);
        return input;
    }

    function testDelete() {
        var iddb = document.getElementById("OrderNo").value;
        var idgb = document.getElementById("OrderGubun").value;
        document.getElementById('deleteDB_ID').value = iddb;
        document.getElementById('deleteDB_GB').value = idgb;

        document.getElementById('id03_delete').style.display = 'block';
    }

    function testModify() {
        var iddb = document.getElementById("OrderNo").value;
        var idgb = document.getElementById("OrderGubun").value;
        document.getElementById('modifyDB_ID').value = iddb;
        document.getElementById('modifyDB_GB').value = idgb;

        document.getElementById('id04_modify').style.display = 'block';
    }

    function changeDBNew(data, clear = false) {
        if (clear) {
            SelectNego.clear(true);
        }
        var c = data['order_gubun'][0];
        var c2 = data['order_DBB'][0];


        var r = /\d+/;
        var str = /[A-Z]/gi;
        var value = (c2.match(r));
        value = parseFloat(value);
        if (clear)
            value += 1;

        value = pad(value, 4);

        var string = c2.match(str);
        var newstring = '';

        for (var i = 0; i < string.length; i++) {
            newstring += string[i];
        }

        newstring += String(value);

        document.getElementById('OrderNo').value = newstring;
        document.getElementById('OrderGubun').value = c;

        document.getElementById('order_LC').value = newstring + "_" + c;


        if (clear) {
            clearInput();
            clearSelect();
            clearDate();
            return;
        }

        if (data['checkNew']) {
            newstring += '_';
        }
        newstring += String(c);

        //console.log('newstring:'+newstring);

        options = $('#SelectNego')[0].selectize.options;
        for (k in options) {
            if (String(k).search(newstring) != -1) {

                SelectNego.addItem(k);
            }
        }
    }

    function testNew() {
        // current date
        n = new Date();
        y = n.getFullYear();
        m = n.getMonth() + 1;
        d = n.getDate();

        var char = '';
        if (y >= 2021)
            char = 'C'
        else if (y >= 2030)
            char = 'D'
        else if (y >= 2040)
            char = 'E'
        else if (y >= 2050)
            char = 'F'
        else if (y >= 2060)
            char = 'G'
        else if (y >= 2070)
            char = 'H'
        else if (y >= 2080)
            char = 'I'
        else if (y >= 2090)
            char = 'F'

        var data = [check_company, char];
        $.ajax({
            type: "POST",
            url: "{{ url_for('get_max_DBB') }}",
            contentType: "application/json;",
            data: JSON.stringify(data),

            success: function(out) {
                changeDBNew(out);
            },
            error: function(out) {
                alert("Please check..");
            }
        }); //end of ajax
    }

    function testForCompany() {
        // current date
        n = new Date();
        y = n.getFullYear();
        m = n.getMonth() + 1;
        d = n.getDate();

        var char = '';
        if (y >= 2021)
            char = 'C'
        else if (y >= 2030)
            char = 'D'
        else if (y >= 2040)
            char = 'E'
        else if (y >= 2050)
            char = 'F'
        else if (y >= 2060)
            char = 'G'
        else if (y >= 2070)
            char = 'H'
        else if (y >= 2080)
            char = 'I'
        else if (y >= 2090)
            char = 'F'

        var data = [check_company, char];
        $.ajax({
            type: "POST",
            url: "{{ url_for('get_max_DBB') }}",
            contentType: "application/json;",
            data: JSON.stringify(data),

            success: function(out) {
                changeDBNew(out, true);
            },
            error: function(out) {
                alert("Please check..");
            }
        }); //end of ajax
    }

    function testClear() {
        // current date
        n = new Date();
        y = n.getFullYear();
        m = n.getMonth() + 1;
        d = n.getDate();

        var char = '';
        if (y >= 2021)
            char = 'C'
        else if (y >= 2030)
            char = 'D'
        else if (y >= 2040)
            char = 'E'
        else if (y >= 2050)
            char = 'F'
        else if (y >= 2060)
            char = 'G'
        else if (y >= 2070)
            char = 'H'
        else if (y >= 2080)
            char = 'I'
        else if (y >= 2090)
            char = 'F'

        var data = [check_company, char];
        $.ajax({
            type: "POST",
            url: "{{ url_for('get_max_DBB') }}",
            contentType: "application/json;",
            data: JSON.stringify(data),

            success: function(out) {
                changeDBNew(out, true);
            },
            error: function(out) {
                alert("Please check..");
            }
        }); //end of ajax
    }

    $(document).ready(function() {
        testNew();
    });

    $(document).ready(function() {

        $(document).on('change', '#prod', function() {
            var data = $(this).val();
            $.ajax({
                type: "POST",
                url: "{{ url_for('get_prod') }}",
                contentType: "application/json;",
                data: JSON.stringify(data),

                success: function(out) {
                    add_opt(out);
                },
                error: function(out) {
                    alert("Please check..")
                }
            }); //end of ajax
        }); //end of prod

        function add_opt(data) {
            $('#prod_ex').empty();
            c = ''
            $.each(data["A"], function(index, item) {
                c += '<option value=a>' + item + '</option>';
            })
            $('#prod_ex').append(c);
        }

        // order - com1
        $(document).on('change', '#order_com1', function() {

            var amount = document.getElementById("order_dollor").value;
            amount = amount.replace(",", "");
            var per = document.getElementById("order_com1").value;

            // order_prc
            var crossrate = document.getElementById("order_cross_rate").value;
            if (!crossrate)
                crossrate = 1;
            crossrate = parseFloat(crossrate);



            var total = parseFloat(amount) * parseFloat(per) * 0.01 / crossrate;
            //var total = parseFloat(amount) * parseFloat(per) * 0.01;

            total = locale(total);
            //total = parseFloat(total).toFixed(2);
            //total = parseFloat(total).toLocaleString();
            console.log('amount, per, total :', amount, per, total);

            if (total != 'NaN') {
                document.getElementById("order_com1_amount").value = total;

            }
            var amount1 = document.getElementById("order_com1_amount").value;
            var amount2 = document.getElementById("order_com2_amount").value;
            var amount3 = document.getElementById("order_com3_amount").value;
            var amount4 = document.getElementById("order_com4_amount").value;
            if (amount1 == '')
                amount1 = '0';
            if (amount2 == '') {
                amount2 = '0';
            }
            if (amount3 == '')
                amount3 = '0';
            if (amount4 == '')
                amount4 = '0';
            amount1 = amount1.replace(",", "");
            amount2 = amount2.replace(",", "");
            amount3 = amount3.replace(",", "");
            amount4 = amount4.replace(",", "");

            var title_total = parseFloat(amount1) + parseFloat(amount2) + parseFloat(amount3) + parseFloat(amount4);


            title_total = parseFloat(title_total).toFixed(2);
            title_total = parseFloat(title_total).toLocaleString();


            if (title_total == '')
                title_total = 0;


            //console.log('order_com_total:',title_total);
            document.getElementById("order_com_total").value = title_total;


            // nego 
            var com12_amount = parseFloat(amount1) + parseFloat(amount2);

            var negocross = document.getElementById('nego_cross').value;
            negocross = setReadyCalculation(negocross);
            negocross = parseFloat(negocross);
            if (!negocross)
                negocross = 1;
            com12_amount = com12_amount * negocross;

            console.log('nego_com1_amount   #order_com1:', com12_amount);
            document.getElementById('nego_com1_amount').value = locale(com12_amount);

            changeSupply();
        });
        // order - com2
        $(document).on('change', '#order_com2', function() {

            var amount = document.getElementById("order_dollor").value;
            amount = amount.replace(",", "");
            var per = document.getElementById("order_com2").value;


            var crossrate = document.getElementById("order_cross_rate").value;
            if (!crossrate)
                crossrate = 1;
            crossrate = parseFloat(crossrate);



            var total = parseFloat(amount) * parseFloat(per) * 0.01 / crossrate;
            //var total = parseFloat(amount) * parseFloat(per) * 0.01;

            total = locale(total);

            //total = parseFloat(total).toFixed(2);
            //total = parseFloat(total).toLocaleString();
            if (total != 'NaN')
                document.getElementById("order_com2_amount").value = total;


            var amount1 = document.getElementById("order_com1_amount").value;
            var amount2 = document.getElementById("order_com2_amount").value;
            var amount3 = document.getElementById("order_com3_amount").value;
            var amount4 = document.getElementById("order_com4_amount").value;
            if (amount1 == '')
                amount1 = '0';
            if (amount2 == '') {
                amount2 = '0';
            }
            if (amount3 == '')
                amount3 = '0';
            if (amount4 == '')
                amount4 = '0';
            amount1 = amount1.replace(",", "");
            amount2 = amount2.replace(",", "");
            amount3 = amount3.replace(",", "");
            amount4 = amount4.replace(",", "");

            var title_total = parseFloat(amount1) + parseFloat(amount2) + parseFloat(amount3) + parseFloat(amount4);


            title_total = parseFloat(title_total).toFixed(2);
            title_total = parseFloat(title_total).toLocaleString();


            if (title_total == '')
                title_total = 0;


            //console.log('order_com_total:',title_total);
            document.getElementById("order_com_total").value = title_total;

            // nego 
            var com12_amount = parseFloat(amount1) + parseFloat(amount2);

            var negocross = document.getElementById('nego_cross').value;
            negocross = setReadyCalculation(negocross);
            negocross = parseFloat(negocross);
            if (!negocross)
                negocross = 1;
            com12_amount = com12_amount * negocross;

            console.log('nego_com1_amount   #order_com1:', com12_amount);
            document.getElementById('nego_com1_amount').value = locale(com12_amount);

            changeSupply();
        });
        // order - com3
        $(document).on('change', '#order_com3', function() {

            var amount = document.getElementById("order_quantity").value;
            amount = amount.replace(",", "");
            var per = document.getElementById("order_com3").value;
            var total = parseFloat(amount) * parseFloat(per);

            total = parseFloat(total).toFixed(2);
            total = parseFloat(total).toLocaleString();
            if (total != 'NaN')
                document.getElementById("order_com3_amount").value = total;



            var amount1 = document.getElementById("order_com1_amount").value;
            var amount2 = document.getElementById("order_com2_amount").value;
            var amount3 = document.getElementById("order_com3_amount").value;
            var amount4 = document.getElementById("order_com4_amount").value;
            if (amount1 == '')
                amount1 = '0';
            if (amount2 == '') {
                amount2 = '0';
            }
            if (amount3 == '')
                amount3 = '0';
            if (amount4 == '')
                amount4 = '0';
            amount1 = amount1.replace(",", "");
            amount2 = amount2.replace(",", "");
            amount3 = amount3.replace(",", "");
            amount4 = amount4.replace(",", "");

            var title_total = parseFloat(amount1) + parseFloat(amount2) + parseFloat(amount3) + parseFloat(amount4);


            title_total = parseFloat(title_total).toFixed(2);
            title_total = parseFloat(title_total).toLocaleString();


            if (title_total == '')
                title_total = 0;


            //console.log('order_com_total:',title_total);
            document.getElementById("order_com_total").value = title_total;


            // nego 
            var com34_amount = parseFloat(amount3) + parseFloat(amount4);

            var negocross = document.getElementById('nego_cross').value;
            negocross = setReadyCalculation(negocross);
            negocross = parseFloat(negocross);
            if (!negocross)
                negocross = 1;
            com34_amount = com34_amount * negocross;

            document.getElementById('nego_com2_amount').value = locale(com34_amount);

            changeSupply();
        });
        // order - com4
        $(document).on('change', '#order_com4', function() {

            var amount = document.getElementById("order_quantity").value;
            amount = amount.replace(",", "");
            var per = document.getElementById("order_com4").value;
            var total = parseFloat(amount) * parseFloat(per);

            total = parseFloat(total).toFixed(2);
            total = parseFloat(total).toLocaleString();
            if (total != 'NaN')
                document.getElementById("order_com4_amount").value = total;


            var amount1 = document.getElementById("order_com1_amount").value;
            var amount2 = document.getElementById("order_com2_amount").value;
            var amount3 = document.getElementById("order_com3_amount").value;
            var amount4 = document.getElementById("order_com4_amount").value;
            if (amount1 == '')
                amount1 = '0';
            if (amount2 == '') {
                amount2 = '0';
            }
            if (amount3 == '')
                amount3 = '0';
            if (amount4 == '')
                amount4 = '0';
            amount1 = amount1.replace(",", "");
            amount2 = amount2.replace(",", "");
            amount3 = amount3.replace(",", "");
            amount4 = amount4.replace(",", "");

            var title_total = parseFloat(amount1) + parseFloat(amount2) + parseFloat(amount3) + parseFloat(amount4);


            title_total = parseFloat(title_total).toFixed(2);
            title_total = parseFloat(title_total).toLocaleString();


            if (title_total == '')
                title_total = 0;



            document.getElementById("order_com_total").value = title_total;

            // nego 
            var com34_amount = parseFloat(amount3) + parseFloat(amount4);

            var negocross = document.getElementById('nego_cross').value;
            negocross = setReadyCalculation(negocross);
            negocross = parseFloat(negocross);
            if (!negocross)
                negocross = 1;
            com34_amount = com34_amount * negocross;

            document.getElementById('nego_com2_amount').value = locale(com34_amount);
            changeSupply();
        });

        // order - com1 - amount
        //  $(document).on('#order_com1_amount').change(function(){
        //$('#order_quantity,#order_prc,#order_cross_rate').change(function(){
        $('#order_com1_amount,#order_com2_amount,#order_com3_amount,#order_com4_amount').change(function() {

            var amount1 = document.getElementById("order_com1_amount").value;
            var amount2 = document.getElementById("order_com2_amount").value;
            var amount3 = document.getElementById("order_com3_amount").value;
            var amount4 = document.getElementById("order_com4_amount").value;
            if (amount1 == '')
                amount1 = '0';
            if (amount2 == '') {
                amount2 = '0';
            }
            if (amount3 == '')
                amount3 = '0';
            if (amount4 == '')
                amount4 = '0';
            amount1 = amount1.replace(",", "");
            amount2 = amount2.replace(",", "");
            amount3 = amount3.replace(",", "");
            amount4 = amount4.replace(",", "");

            var total = parseFloat(amount1) + parseFloat(amount2) + parseFloat(amount3) + parseFloat(amount4);


            total = parseFloat(total).toFixed(2);
            total = parseFloat(total).toLocaleString();


            if (!total)
                total = 0;


            document.getElementById("order_com_total").value = total;
            //document.getElementById("order_com_total").innerHTML = total;


            //////////////////////////////////////////////////////////////////


            var negocross = document.getElementById('nego_cross').value;
            negocross = setReadyCalculation(negocross);
            negocross = parseFloat(negocross);
            if (!negocross)
                negocross = 1;

            ////////////////////////////////////////////////////////////////////////////
            // nego com1 amount

            var comval1a = document.getElementById("order_com1_amount").value;
            var comval2a = document.getElementById("order_com2_amount").value;

            if (comval1a == '')
                comval1a = '0';
            if (comval2a == '')
                comval2a = '0';

            comval1a = comval1a.replace(",", "");
            comval2a = comval2a.replace(",", "");

            var totala = (parseFloat(comval1a) + parseFloat(comval2a)) * negocross;
            totala = parseFloat(totala).toLocaleString();

            if (totala == '')
                totala = '0';

            document.getElementById('nego_com1_amount').value = totala;
            ////////////////////////////////////////////////////////////////////////////
            ////////////////////////////////////////////////////////////////////////////
            // nego com2 amount
            var comval3a = document.getElementById("order_com3_amount").value;
            var comval4a = document.getElementById("order_com4_amount").value;

            if (comval3a == '')
                comval3a = '0';
            if (comval4a == '')
                comval4a = '0';

            comval3a = comval3a.replace(",", "");
            comval4a = comval4a.replace(",", "");

            var total3a = (parseFloat(comval3a) + parseFloat(comval4a)) * negocross;
            total3a = parseFloat(total3a).toLocaleString();


            if (total3a == '')
                total3a = '0';
            document.getElementById('nego_com2_amount').value = total3a;
            ////////////////////////////////////////////////////////////////////////////

            ////////////////////////////////////////////////////////////////////////////
            // nego com total
            var nego_com1 = document.getElementById("nego_com1_amount").value;
            var nego_com2 = document.getElementById("nego_com2_amount").value;

            if (nego_com1 == '')
                nego_com1 = '0';
            if (nego_com2 == '')
                nego_com2 = '0';

            nego_com1 = nego_com1.replace(",", "");
            nego_com2 = nego_com2.replace(",", "");

            var total_nego_com = parseFloat(nego_com1) + parseFloat(nego_com2);
            total_nego_com = parseFloat(total_nego_com).toLocaleString();


            if (!total_nego_com)
                total_nego_com = '0';

            //console.log('2873 nego_com_total', total_nego_com);
            document.getElementById('nego_com_total').value = total_nego_com;

            //console.log('2873 local_comm', total_nego_com);
            document.getElementById('local_comm').value = total_nego_com;
            ////////////////////////////////////////////////////////////////////////////
        });

        // quantity  order_quantity
        //$(document).on('#order_quantity').change(function(){
        //$(document).on('change','#order_quantity',function(){
        $('#order_quantity,#order_prc,#order_cross_rate').change(function() {

            var quantity = document.getElementById("order_quantity").value;
            var prc = document.getElementById("order_prc").value;
            var cross = document.getElementById("order_cross_rate").value;

            if (quantity == '')
                quantity = '0';
            if (prc == '')
                prc = '0';
            if (cross == '')
                cross = '0';
            quantity = quantity.replace(",", "");

            var total = parseFloat(quantity) * parseFloat(prc) * parseFloat(cross);
            total = parseFloat(total).toLocaleString();

            var localamount = parseFloat(quantity) * parseFloat(prc);
            localamount = parseFloat(localamount);

            if (total == '')
                total = '0';

            document.getElementById('order_dollor').value = total;

            document.getElementById('nego_etc').value = localamount;
            document.getElementById('nego_etc_dollor').value = total;

            // added by 2020-03-18
            quantity = parseFloat(quantity).toLocaleString();
            document.getElementById('nego_quantity').value = quantity;


            console.log('!!!! changed');
            // com modify
            {
                var amount = document.getElementById("order_dollor").value;
                amount = amount.replace(",", "");
                var per = document.getElementById("order_com1").value;
                var total = parseFloat(amount) * parseFloat(per) * 0.01;

                total = parseFloat(total).toFixed(2);
                total = parseFloat(total).toLocaleString();

                if (total != 'NaN') {
                    document.getElementById("order_com1_amount").value = total;
                }
            }

            // order - com2

            {
                var amount = document.getElementById("order_dollor").value;
                amount = amount.replace(",", "");
                var per = document.getElementById("order_com2").value;
                var total = parseFloat(amount) * parseFloat(per) * 0.01;

                total = parseFloat(total).toFixed(2);
                total = parseFloat(total).toLocaleString();
                if (total != 'NaN')
                    document.getElementById("order_com2_amount").value = total;
            }

            // order - com3

            {
                var amount = document.getElementById("order_quantity").value;
                amount = amount.replace(",", "");
                var per = document.getElementById("order_com3").value;
                var total = parseFloat(amount) * parseFloat(per);

                total = parseFloat(total).toFixed(2);
                total = parseFloat(total).toLocaleString();
                if (total != 'NaN')
                    document.getElementById("order_com3_amount").value = total;
            }

            // order - com4

            {
                var amount = document.getElementById("order_quantity").value;
                amount = amount.replace(",", "");
                var per = document.getElementById("order_com4").value;
                var total = parseFloat(amount) * parseFloat(per);

                total = parseFloat(total).toFixed(2);
                total = parseFloat(total).toLocaleString();
                if (total != 'NaN')
                    document.getElementById("order_com4_amount").value = total;
            }
            // end com modify

        });

        //order lc 수령액
        $('#order_receive_LC').change(function() {

            var order_LC = document.getElementById("order_receive_LC").value;
            //var local_LC = document.getElementById("local_receive_LC_won").value;

            //order_LC = order_LC.replace(",","");


            document.getElementById('local_receive_LC_won').value = order_LC;
        });
        //local lc 수령액
        $('#local_receive_LC_won').change(function() {

            var local_LC = document.getElementById("local_receive_LC_won").value;
            //var local_LC = document.getElementById("local_receive_LC_won").value;

            //order_LC = order_LC.replace(",","");


            document.getElementById('order_receive_LC').value = local_LC;
        });
        //order prc unit
        $('#PRC_order').change(function() {


            var title = document.getElementById("PRC_order").value;

            document.getElementById("order_title_com1").innerHTML = 'Amount (' + title + ')';
            document.getElementById("order_title_com2").innerHTML = 'Amount (' + title + ')';
            document.getElementById("order_title_com3").innerHTML = 'Amount (' + title + ')';
            document.getElementById("order_title_com4").innerHTML = 'Amount (' + title + ')';
            var title2 = '<div class="w3-text-purple"id="order_title_total">COM TOTAL (' + title + ')</div>';
            document.getElementById("order_title_total").innerHTML = title2;

            // change in order table u/price
            //$("qty_intable").replaceWith('<th class="min_width_100" id="qty_intable">QTY ('+title+')</th>');

            unit_nego_table.addItem(title);
        });



        $('#QTY_order').change(function() {


            var title = document.getElementById("QTY_order").value;


            // change in order table u/price
            $("#qty_intable").replaceWith('<th class="min_width_100" id="qty_intable">QTY (' + title + ')</th>');


        });


        // nego 에서 amount 값 채워 넣기
        $('#nego_etc,#nego_etc_dollor,#neto_etc_exchange').change(function() {

            var val1 = document.getElementById("nego_etc").value;
            var val2 = document.getElementById("nego_etc_dollor").value;
            var val3 = document.getElementById("neto_etc_exchange").value;

            if (val1 == '')
                val1 = '0';
            if (val2 == '')
                val2 = '0';
            if (val3 == '')
                val3 = '0';
            val1 = val1.replace(",", "");
            val2 = val2.replace(",", "");
            val3 = val3.replace(",", "");



            //var total = /* parseFloat(val1)* */parseFloat(val2)*parseFloat(val3);
            var total = parseFloat(val1) * parseFloat(val3);
            total = parseFloat(total).toLocaleString();

            if (total == '')
                total = '0';


            document.getElementById('nego_won').value = total;
        });
        // nego cross rate
        $('#nego_cross,#nego_etc').change(function() {

            var val1 = document.getElementById("nego_cross").value;
            var val2 = document.getElementById("nego_etc").value;


            if (!val1)
                val1 = '0';
            if (!val2)
                val2 = '0';

            val1 = val1.replace(",", "");
            val2 = val2.replace(",", "");


            var totalnego = parseFloat(val1) * parseFloat(val2);
            totalnego = parseFloat(totalnego).toLocaleString();

            if (!totalnego)
                totalnego = '0';

            document.getElementById('nego_cross_amount').value = totalnego;

            // add by 2021-06-22
            var vnego1 = document.getElementById('nego_com1_rate').value;
            vnego1 = parseFloat(vnego1) * 0.01;

            totalnego = setReadyCalculation(totalnego);
            totalnego = parseFloat(totalnego);
            //var vcom1amount = vnego1 * totalnego * val1;
            var vcom1amount = vnego1 * totalnego; // val1 delete in 22/3/5


            //console.log('nego com1 #nego_cross,#nego_etc : ', vnego1, totalnego, val1, vcom1amount);            
            document.getElementById('nego_com1_amount').value = locale(vcom1amount);
            var vnego2 = document.getElementById('nego_com2_rate').value;
            vnego2 = parseFloat(vnego2);
            var orderamount = document.getElementById("order_quantity").value;
            orderamount = setReadyCalculation(orderamount);
            orderamount = parseFloat(orderamount) * val1 * vnego2;

            document.getElementById('nego_com2_amount').value = locale(orderamount);


            var vamountnego = vcom1amount + (orderamount);

            //console.log('nego_com_total: ', vcom1amount, orderamount, vamountnego);
            document.getElementById('nego_com_total').value = vamountnego;

        });
        // order com -> nego com
        $('#order_com1,#order_com2,#order_com3,#order_com4').change(function() {

            ////////////////////////////////////////////////////////////////////////////
            // nego com1
            var comval1 = document.getElementById("order_com1").value;
            var comval2 = document.getElementById("order_com2").value;

            if (comval1 == '')
                comval1 = '0';
            if (comval2 == '')
                comval2 = '0';


            var total = parseFloat(comval1) + parseFloat(comval2);
            total = parseFloat(total).toLocaleString();

            if (total == '')
                total = '0';
            document.getElementById('nego_com1_rate').value = total;


            ////////////////////////////////////////////////////////////////////////////
            ////////////////////////////////////////////////////////////////////////////
            // nego com2
            var comval3 = document.getElementById("order_com3").value;
            var comval4 = document.getElementById("order_com4").value;

            if (comval3 == '')
                comval3 = '0';
            if (comval4 == '')
                comval4 = '0';


            var total3 = parseFloat(comval3) + parseFloat(comval4);
            total3 = parseFloat(total3).toLocaleString();


            if (total3 == '')
                total3 = '0';
            document.getElementById('nego_com2_rate').value = total3;
            ////////////////////////////////////////////////////////////////////////////


            //var title_total = parseFloat(total)+parseFloat(total3);
            //console.log("order_com_total "+title_total);

        });

        $('#nego_uwon').change(function() {

            ////////////////////////////////////////////////////////////////////////////
            // nego com1
            var comval1 = document.getElementById("nego_uwon").value;


            if (comval1 == '')
                comval1 = '0';

            comval1 = parseFloat(comval1).toLocaleString();

            document.getElementById('local_u2').value = comval1;

        });
        // nego 입금내역 => 미입금내역

        $('#table_nego').change(function() {

            var total = 0;
            var insuff = 0;
            for (var i = 0; i < addTable_nego_i + 1; i++) {
                var c = 'nego_deposit_amount' + String(i);

                var v1 = document.getElementById(c).value;
                if (v1 == '')
                    v1 = '0';

                v1 = v1.replace(",", "");
                total += parseFloat(v1);
            }

            var amount = document.getElementById('nego_etc').value;
            if (amount == '')
                amount = '0';
            amount = amount.replace(",", "");

            insuff = amount - total;

            insuff = parseFloat(insuff).toLocaleString();

            document.getElementById('nego_incomplete_value').value = insuff;

        });
        // local 계산서 변경시 환율 계산
        $('#BillMoneyInvoice1,#BillDollorInvoice1').change(function() {
            var v1 = document.getElementById('BillMoneyInvoice1').value;
            var v2 = document.getElementById('BillDollorInvoice1').value;
            if (v1 == '')
                v1 = '0';
            if (v2 == '')
                v2 = '0';

            v1 = v1.replace(",", "");
            v2 = v2.replace(",", "");

            var result = parseFloat(v1) / parseFloat(v2);

            result = parseFloat(result).toFixed(4);
            result = parseFloat(result).toLocaleString();

            document.getElementById('BillRate1').value = result;

        });
        $('#BillMoneyInvoice2,#BillDollorInvoice2').change(function() {
            var v1 = document.getElementById('BillMoneyInvoice2').value;
            var v2 = document.getElementById('BillDollorInvoice2').value;
            if (v1 == '')
                v1 = '0';
            if (v2 == '')
                v2 = '0';

            v1 = v1.replace(",", "");
            v2 = v2.replace(",", "");

            var result = parseFloat(v1) / parseFloat(v2);

            result = parseFloat(result).toFixed(4);
            result = parseFloat(result).toLocaleString();

            document.getElementById('BillRate2').value = result;

        });
        $('#BillMoneyInvoice3,#BillDollorInvoice3').change(function() {
            var v1 = document.getElementById('BillMoneyInvoice3').value;
            var v2 = document.getElementById('BillDollorInvoice3').value;
            if (v1 == '')
                v1 = '0';
            if (v2 == '')
                v2 = '0';

            v1 = v1.replace(",", "");
            v2 = v2.replace(",", "");

            var result = parseFloat(v1) / parseFloat(v2);

            result = parseFloat(result).toFixed(4);
            result = parseFloat(result).toLocaleString();

            document.getElementById('BillRate3').value = result;

        });
        $('#BillMoneyInvoice4,#BillDollorInvoice4').change(function() {
            var v1 = document.getElementById('BillMoneyInvoice4').value;
            var v2 = document.getElementById('BillDollorInvoice4').value;
            if (v1 == '')
                v1 = '0';
            if (v2 == '')
                v2 = '0';

            v1 = v1.replace(",", "");
            v2 = v2.replace(",", "");

            var result = parseFloat(v1) / parseFloat(v2);

            result = parseFloat(result).toFixed(4);
            result = parseFloat(result).toLocaleString();

            document.getElementById('BillRate4').value = result;

        });

        function changeSupply() {

            // start amount
            var amountUS = document.getElementById('order_dollor').value; // +

            if (amountUS == '')
                amountUS = '0';
            amountUS = amountUS.replace(",", "");
            //first etc_per
            var etc_per = document.getElementById('order_etc_per').value;


            if (etc_per == '')
                etc_per = '0';

            etc_per = etc_per.replace(",", "");



            var total_etc = parseFloat(etc_per) * parseFloat(amountUS) * 0.01;
            if (total_etc == '')
                total_etc = '0';

            total_etc = parseFloat(total_etc).toLocaleString();
            document.getElementById('order_etc_amount').value = total_etc;

            var total = 0; // -

            for (var i = 0; i < addTable_supply_i + 1; i++) {
                var c1 = 'order_table_quantity_' + String(i);
                var c2 = 'order_table_fob_' + String(i);

                var v1 = eval(c1).value;
                //var v1 = document.getElementById(c1).value;
                var v2 = document.getElementById(c2).value;

                if (v1 == '')
                    v1 = '0';
                if (v2 == '')
                    v2 = '0';


                v1 = v1.replace(",", "");
                v2 = v2.replace(",", "");

                var local_total = parseFloat(v1) * parseFloat(v2);

                total += local_total;

                local_total = parseFloat(local_total).toLocaleString();
                var c3 = 'order_table_amount_' + String(i);
                document.getElementById(c3).value = local_total;

                // local table
                if (addTable_supply_i > addTable_local_i) {
                    document.getElementById('addTable_local').click();
                }

                var c3 = 'company_order_' + String(i);
                var currentOption = eval(c3).getValue();
                var c4 = 'company_table_local_' + String(i);
                eval(c4).addItem(currentOption);

                var c5 = 'order_table_quantity_' + String(i);
                var c6 = 'local_table_QTY_' + String(i);
                eval(c6).value = eval(c5).value;

                var c7 = 'order_table_fob_' + String(i);
                var c8 = 'local_table_PRC_' + String(i);
                eval(c8).value = eval(c7).value;

                var v6 = eval(c6).value;
                var v8 = eval(c8).value;

                if (v6 == '')
                    v6 = '0';
                if (v8 == '')
                    v8 = '0';

                v6 = v6.replace(",", "");
                v8 = v8.replace(",", "");

                var v6v8 = parseFloat(v6) * parseFloat(v8);
                v6v8 = parseFloat(v6v8).toLocaleString();

                var c9 = 'local_table_amount_dollor_' + String(i);
                eval(c9).value = v6v8;
            }

            var amount1 = document.getElementById('order_expect_price').value; // -
            var amount2 = document.getElementById('order_etc_amount').value; // -


            if (amount1 == '')
                amount1 = '0';
            if (amount2 == '')
                amount2 = '0';


            amount1 = amount1.replace(",", "");
            amount2 = amount2.replace(",", "");


            var com1_amount = $('#order_com1_amount').val();
            var com2_amount = $('#order_com2_amount').val();
            var com3_amount = $('#order_com3_amount').val();
            var com4_amount = $('#order_com4_amount').val();
            if (com1_amount == '')
                com1_amount = '0';
            if (com2_amount == '')
                com2_amount = '0';
            if (com3_amount == '')
                com3_amount = '0';
            if (com4_amount == '')
                com4_amount = '0';

            com1_amount = com1_amount.replace(",", "");
            com2_amount = com2_amount.replace(",", "");
            com3_amount = com3_amount.replace(",", "");
            com4_amount = com4_amount.replace(",", "");

            // cross rate
            var crossrate = document.getElementById("order_cross_rate").value;
            crossrate = parseFloat(crossrate);

            ////////////////////////////////////
            var order_com_total_pre = parseFloat(com1_amount) + parseFloat(com2_amount) + parseFloat(com3_amount) + parseFloat(com4_amount);
            //if (crossrate != null || crossrate != 0)
            //    order_com_total_pre = order_com_total_pre * crossrate;
            //else
            var order_com_total_pre2 = order_com_total_pre;

            order_com_total_pre2 = parseFloat(order_com_total_pre2).toFixed(3);
            order_com_total_pre2 = parseFloat(order_com_total_pre2).toLocaleString();

            if (!order_com_total_pre2)
                order_com_total_pre2 = 0;

            //document.getElementById('order_com_total').value = order_com_total_pre;


            /////////////////////////////////////////
            //var comtotal=document.getElementById('order_com_total').value;
            document.getElementById('order_com_total').value = order_com_total_pre2;
            console.log('com 1 ', com1_amount);
            console.log('com 2 ', com2_amount);
            console.log('com 3 ', com3_amount);
            console.log('com 4 ', com4_amount);
            console.log('com total!! ', order_com_total_pre2);
            console.log('cross ', crossrate);
            var comtotal = order_com_total_pre2;

            //console.log('test1:' , order_com_total_pre);
            //console.log('test2:' , comtotal);
            comtotal = setReadyCalculation(comtotal);
            if (!comtotal)
                comtotal = '0';
            comtotal = parseFloat(comtotal);

            //var comtotal = parseFloat(com1_amount)+parseFloat(com2_amount)+parseFloat(com3_amount)+parseFloat(com4_amount);
            comtotal = comtotal * crossrate; // crossrate


            var result = parseFloat(amountUS) - parseFloat(amount1) - parseFloat(amount2) - parseFloat(total) - parseFloat(comtotal);

            //console.log('order_expect_margin before : ', result);
            result = parseFloat(result).toLocaleString();

            //console.log('order_expect_margin after : ', amountUS, amount1, amount2, total, comtotal, crossrate);
            document.getElementById('order_expect_margin').value = result;

            // nego 
            var com12_amount = parseFloat(com1_amount) + parseFloat(com2_amount);
            var com34_amount = parseFloat(com3_amount) + parseFloat(com4_amount);

            //console.log('com12_amount : ',com12_amount);
            //console.log('com12_amount : ',com34_amount);
            var negocross = document.getElementById('nego_cross').value;
            //console.log('negocross origin:', negocross);
            negocross = setReadyCalculation(negocross);
            negocross = parseFloat(negocross);
            if (!negocross)
                negocross = 1;

            //console.log('negocross:', negocross);
            com12_amount = com12_amount * negocross;
            com34_amount = com34_amount * negocross;

            console.log('nego com1 changeSupply() : ', com12_amount);
            document.getElementById('nego_com1_amount').value = locale(com12_amount);
            document.getElementById('nego_com2_amount').value = locale(com34_amount);
        }
        // order supply -> local table
        $('#table_supply,#order_expect_price,#order_etc_per,#order_etc_amount,#order_dollor,#order_quantity,#order_prc,#order_cross_rate,#order_com1,#order_com2,#order_com3,#order_com4,#order_com1_amount,#order_com2_amount,#order_com3_amount,#order_com4_amount').change(function() {
            changeSupply();
        });

        function c2f(input) {
            return parseFloat(input);
        }

        function locale(input) {
            input = Number(input);
            //input = Math.floor(input * 100) / 100;
            return input.toLocaleString(undefined, {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }) // 2,046,430.00
                //return parseFloat(input).toLocaleString();
        }

        function changeActualMarginDollor() {
            var start = document.getElementById('nego_cross_amount').value; // +
            start = setReadyCalculation(start);
            var total_table = 0;
            var total = 0;

            for (var i = 0; i < addTable_local_i + 1; i++) {
                var cUS = 'local_table_amount_dollor_' + String(i);

                var cV = eval(cUS).value;
                cV = setReadyCalculation(cV);
                total_table += c2f(cV);
            }

            var v1 = document.getElementById('local_sunim').value;
            var v2 = document.getElementById('local_demur').value;
            var v3 = document.getElementById('local_su').value;
            var v4 = document.getElementById('local_jukwha').value;
            var v5 = document.getElementById('local_transport').value;
            var v6 = document.getElementById('local_comm').value;
            var v7 = document.getElementById('local_lc_open').value;
            var v8 = document.getElementById('local_receive_LC').value;
            var v9 = document.getElementById('local_u').value;
            var v10 = document.getElementById('local_hwanhwan').value;
            var v11 = document.getElementById('local_delay').value;
            var v12 = document.getElementById('local_less').value;
            var v13 = document.getElementById('local_insudelay').value;

            v1 = setReadyCalculation(v1);
            v2 = setReadyCalculation(v2);
            v3 = setReadyCalculation(v3);
            v4 = setReadyCalculation(v4);
            v5 = setReadyCalculation(v5);
            v6 = setReadyCalculation(v6);
            v7 = setReadyCalculation(v7);
            v8 = setReadyCalculation(v8);
            v9 = setReadyCalculation(v9);
            v10 = setReadyCalculation(v10);
            v11 = setReadyCalculation(v11);
            v12 = setReadyCalculation(v12);
            v13 = setReadyCalculation(v13);


            total = parseFloat(start) - parseFloat(total_table) - parseFloat(v1) - parseFloat(v2) - parseFloat(v3) - parseFloat(v4) - parseFloat(v5) - parseFloat(v6) - parseFloat(v7) - parseFloat(v8) - parseFloat(v9) + parseFloat(v10) - parseFloat(v11) - parseFloat(v12) - parseFloat(v13); // modified in 2020-03-19
            console.log('value!! ', start, total_table, v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13);

            document.getElementById('local_actual').value = locale(total);

            //added in 2020-03-18
            //var vc1r = document.getElementById('nego_com1_rate').value;
            //vc1r = setReadyCalculation(vc1r);
            //vtotal = vc1r*start;
            //console.log('3468');
            //document.getElementById('nego_com1_amount').value = locale(vtotal);
        }

        function changeActualMarginWon() {

            var start = document.getElementById('nego_won').value; // +

            start = setReadyCalculation(start);

            var total_table = 0;
            var total = 0;


            for (var i = 0; i < addTable_local_i + 1; i++) {
                var cUS = 'local_table_amount_won_' + String(i);

                var cV = eval(cUS).value;
                cV = setReadyCalculation(cV);
                total_table += c2f(cV);
            }

            var v1 = document.getElementById('local_sunim2').value;
            var v2 = document.getElementById('local_demur2').value;
            var v3 = document.getElementById('local_su2').value;
            var v4 = document.getElementById('local_jukwha2').value;
            var v5 = document.getElementById('local_transport2').value;
            var v6 = document.getElementById('local_comm2').value;
            var v7 = document.getElementById('local_lc_open2').value;
            var v8 = document.getElementById('local_receive_LC_won').value;
            var v9 = document.getElementById('local_u2').value;
            var v10 = document.getElementById('local_hwanhwan2').value;
            var v11 = document.getElementById('local_delay2').value;
            var v12 = document.getElementById('local_less2').value;
            var v13 = document.getElementById('local_insudelay2').value;


            v1 = setReadyCalculation(v1);
            v2 = setReadyCalculation(v2);
            v3 = setReadyCalculation(v3);
            v4 = setReadyCalculation(v4);
            v5 = setReadyCalculation(v5);
            v6 = setReadyCalculation(v6);
            v7 = setReadyCalculation(v7);
            v8 = setReadyCalculation(v8);
            v9 = setReadyCalculation(v9);
            v10 = setReadyCalculation(v10);
            v11 = setReadyCalculation(v11);
            v12 = setReadyCalculation(v12);
            v13 = setReadyCalculation(v13);

            console.log('start: ', start);
            console.log('v10: ', v10);
            console.log('v1: ', v1);
            total = parseFloat(start) - parseFloat(total_table) - parseFloat(v1) - parseFloat(v2) - parseFloat(v3) - parseFloat(v4) - parseFloat(v5) - parseFloat(v6) - parseFloat(v7) - parseFloat(v8) - parseFloat(v9) + parseFloat(v10) - parseFloat(v11) - parseFloat(v12) - parseFloat(v13); // modified in 2020-03-19
            console.log('total: ', total);
            document.getElementById('local_actual2').value = locale(total);
        }
        // local actrual margin
        $('#nego_cross_amount,#nego_cross,#table_local,#local_sunim,#local_demur,#local_su,#local_jukwha,#local_transport,#local_comm,#local_lc_open,#local_receive_LC,#local_u,#local_hwanhwan,#local_delay,#local_less,#local_insudelay').change(function() {
            changeActualMarginDollor();
        });
        $('#nego_won,#table_local,#local_sunim2,#local_demur2,#local_su2,#local_jukwha2,#local_transport2,#local_comm2,#local_lc_open2,#local_receive_LC2,#local_u2,#local_hwanhwan2,#local_delay2,#local_less2,#local_insudelay2').change(function() {
            changeActualMarginWon();
        });


        //$("#table_local input[id^='Datepay_local']").on('change',function(){
        //    console.log(this.id);
        //console.log(addTable_local_i);
        //console.log($("#Datepay_local_1").val());
        //});

        $("#table_local").on('change', "input[id^='Datepay_local']", function() {
            var value1 = this.value;

            var afterStr = this.id.split('_');

            console.log(this);
            console.log(afterStr[2]);
            var aftern = afterStr[2];
            if (value1 !== '') {

                $.ajax({
                    type: "POST",
                    url: "{{ url_for('get_exchange') }}",
                    contentType: "application/json;",
                    data: JSON.stringify(value1),

                    success: function(out) {
                        var str2 = 'local_table_rate_' + aftern;
                        eval(str2).value = out['return'];
                        //$("#local_table_rate_0").val(out['return']);
                        var str3 = 'local_table_amount_dollor_' + aftern;

                        str3Val = eval(str3).value;
                        str3Val = setReadyCalculation(str3Val);

                        var readyn = setReadyCalculation(out['return']);
                        console.log('readyn:', parseFloat(readyn));
                        console.log('str3Val', parseFloat(str3Val));
                        var totalv = (parseFloat(readyn)) * parseFloat(str3Val);
                        var str4 = 'local_table_rate_amount_' + aftern;
                        eval(str4).value = locale(totalv);
                    },
                    error: function(out) {
                        alert("Please check..");
                    }
                }); //end of ajax 
            }
        });

        $('#Datepay_local_1').change(function() {
            var value1 = this.value;

            var afterStr = this.id.split('_');

            console.log(this);
            console.log(afterStr[2]);
            var aftern = afterStr[2];
            if (value1 !== '') {

                $.ajax({
                    type: "POST",
                    url: "{{ url_for('get_exchange') }}",
                    contentType: "application/json;",
                    data: JSON.stringify(value1),

                    success: function(out) {
                        var str2 = 'local_table_rate_' + aftern;
                        eval(str2).value = out['return'];
                        //$("#local_table_rate_0").val(out['return']);
                        var str3 = 'local_table_amount_dollor_' + aftern;
                        str3Val = eval(str3).value;

                        var readyn = setReadyCalculation(out['return']);
                        //console.log(parseFloat(readyn));
                        //console.log(parseFloat(str3Val));
                        var totalv = (parseFloat(readyn)) * parseFloat(str3Val);
                        var str4 = 'local_table_rate_amount_' + aftern;
                        eval(str4).value = totalv;
                    },
                    error: function(out) {
                        alert("Please check..");
                    }
                }); //end of ajax 
            }
        });

        /// added in 2020-03-18
        $('#nego_com1_rate,#nego_com1_amount').change(function() {

            var start = document.getElementById('nego_cross_amount').value;
            start = setReadyCalculation(start);
            var vc1r = document.getElementById('nego_com1_rate').value;
            vc1r = setReadyCalculation(vc1r);

            //console.log('vc1r start negocross', vc1r, start);
            vtotal = vc1r * start * 0.01;

            console.log('nego_com1_amount #nego_com1_rate,#nego_com1_amount', vtotal);
            document.getElementById('nego_com1_amount').value = locale(vtotal);
        });
        /// added in 2020-03-18
        $('#nego_com2_rate,#nego_quantity').change(function() {

            var negocross = document.getElementById('nego_cross').value;
            if (!negocross) {
                negocross = 1;
            }
            negocross = parseFloat(negocross);


            var start = document.getElementById('nego_quantity').value;
            start = setReadyCalculation(start);
            var vc1r = document.getElementById('nego_com2_rate').value;
            vc1r = setReadyCalculation(vc1r);
            vtotal = vc1r * start * negocross;
            document.getElementById('nego_com2_amount').value = locale(vtotal);
        });
        // added in 2020-03-18
        $('#nego_com1_amount,#nego_com2_amount,#nego_cross,#nego_cross_amount,#nego_com1_rate,#nego_com2_rate').change(function() {
            var v1 = document.getElementById('nego_com1_amount').value;
            var v2 = document.getElementById('nego_com2_amount').value;
            v1 = setReadyCalculation(v1);
            v2 = setReadyCalculation(v2);

            var vtotal = c2f(v1) + c2f(v2);


            //vtotal = vtotal ;


            document.getElementById('nego_com_total').value = locale(vtotal);

            console.log('3706 local_comm', vtotal);
            document.getElementById('local_comm').value = locale(vtotal);
        });

        // added in 2020-03-18
        $('#local_table_QTY_0,#local_table_amount_dollor_0').change(function() {
            var qty0 = $('#local_table_QTY_0').val();
            $('#BillInvoice1').val(qty0);
            var amount_us = $('#local_table_amount_dollor_0').val();
            $('#BillDollorInvoice1').val(amount_us);
        });
        // added in 2021-06-14
        $('#order_quantity,#order_table_quantity_0,#order_table_quantity_1,#order_table_quantity_2,#order_table_quantity_3').blur(function() {

            var value0 = $('#order_quantity').val();
            if (!value0)
                value0 = '0';
            value0 = parseFloat(value0).toFixed(3);
            $('#order_quantity').val(value0);


            var value1 = $('#order_table_quantity_1').val();
            if (!value1)
                value1 = '0';
            value1 = parseFloat(value1).toFixed(3);
            $('#order_table_quantity_1').val(value1);

            var value2 = $('#order_table_quantity_2').val();
            if (!value2)
                value2 = '0';
            value2 = parseFloat(value2).toFixed(3);
            $('#order_table_quantity_2').val(value2);

            var value3 = $('#order_table_quantity_3').val();
            if (!value3)
                value3 = '0';
            value3 = parseFloat(value3).toFixed(3);
            $('#order_table_quantity_3').val(value3);

            var value0_ = $('#order_table_quantity_0').val();
            if (!value0_)
                value0_ = '0';
            value0_ = parseFloat(value0_).toFixed(3);
            $('#order_table_quantity_0').val(value0_);


        });


        // added in 2020-03-18
        $('#local_sunim').blur(function() {

            var value1 = $('#local_sunim').val();
            value1 = String(value1);
            var re2 = /\$/gi;
            if (value1.search(re2) == '-1') {
                value1 = value1 + ' $';
            }
            $('#local_sunim').val(value1);
        });
        // added in 2020-03-18
        $('#local_sunim2').blur(function() {
            var value1 = $('#local_sunim2').val();
            value1 = String(value1);
            var re2 = /won/gi;
            if (value1.search(re2) == '-1') {
                value1 = value1 + ' won';
            }
            $('#local_sunim2').val(value1);
        });

        // added in 2020-03-19
        $('#local_demur,#local_su,#local_jukwha,#local_transport,#local_comm,#local_lc_open,#local_receive_LC,#local_u,#local_hwanhwan,#local_delay,#local_less,#local_insudelay,#local_actual').blur(function() {


            var vartest = this.id;
            var value1 = eval(vartest).value;

            value1 = String(value1);
            var re2 = /\$/gi;
            if (value1.search(re2) == '-1') {
                value1 = value1 + ' $';
            }

            eval(vartest).value = value1;
        });
        // added in 2020-03-19
        $('#local_demur2,#local_su2,#local_jukwha2,#local_transport2,#local_comm2,#local_lc_open2,#local_receive_LC2,#local_u2,#local_hwanhwan2,#local_delay2,#local_less2,#local_insudelay2,#local_actual2').blur(function() {

            var vartest = this.id;
            var value1 = eval(vartest).value;

            value1 = String(value1);
            var re2 = /won/gi;
            if (value1.search(re2) == '-1') {
                value1 = value1 + ' won';
            }
            eval(vartest).value = value1;

            var testactual2 = $('#local_actual2').val();
            console.log('blur:', testactual2);
        });
        ///////////////////////////////////////////////////////////////////////////////////
        //Year
        $(document).on('change', '#select_year', function() {
            var YYYY = $('#select_year').val(),
                MM = $('#select_month').val();
            //    if(YYYY !== '' && MM !==''){
            if (YYYY !== '') {
                var data = [YYYY, MM]

                $.ajax({
                    type: "POST",
                    url: "{{ url_for('get_prod') }}",
                    contentType: "application/json;",
                    data: JSON.stringify(data),

                    success: function(out) {
                        init_select();
                        add_ordernumber(out);
                    },
                    error: function(out) {
                        alert("Please check..")
                    }
                }); //end of ajax 
            }
        });

        //order num
        $(document).on('change', '#select_orderno', function() {
            data = $('#select_orderno').val();
            $.ajax({
                type: "POST",
                url: "{{ url_for('get_order_gubun') }}",
                contentType: "application/json;",
                data: JSON.stringify(data),

                success: function(out) {
                    add_ordergubun(out);
                },
                error: function(out) {
                    alert("Please check..")
                }
            }); //end of ajax 
        });
        // add buyer, agent, item, DN
        $(document).on('change', '#select_ordergubun', function() {
            var data1 = $('#select_orderno').val();
            var data2 = $('#select_ordergubun').val();
            var data = [data1, data2];
            //alert( data1 )
            $.ajax({
                type: "POST",
                url: "{{ url_for('get_order_buyer') }}",
                contentType: "application/json;",
                data: JSON.stringify(data),

                success: function(out) {
                    add_orderbuyer(out);
                    //add_orderagent(out);
                    //add_orderitem(out);
                    //add_orderDN(out);
                    //add_orderLF(out);
                    //add_orderLS(out);
                    //add_orderremark(out);
                    //add_orderqty(out);
                    //add_orderunit(out);
                    //add_ordercurrency(out);
                    //add_orderPRC(out);
                    //add_orderamount(out);
                },
                error: function(out) {
                    alert("Please check..")
                }
            }); //end of ajax 
        });

        // select ContractDB
        $(document).on('change', '#ContractDB', function() {

            var data1 = $('#ContractDB').val();
            beforeStr = data1;
            var afterStr = beforeStr.split('/');
            var lastStr = '';

            lastStr = afterStr[0];

            $.ajax({
                type: "POST",
                url: "{{ url_for('get_contract_DB') }}",
                contentType: "application/json;",
                data: JSON.stringify(lastStr),

                success: function(out) {
                    if (out["check_new"] == 'checked') {
                        add_new_db_contract(out);
                    } else if (out["check_new"] == 'notchecked') {

                        add_old_db_contract(out);
                    }

                },
                error: function(out) {
                    //alert(out);
                }
            }); //end of ajax 

        });

        $(document).on('change', '#shippingdocsDB', function() {

            var data1 = $('#shippingdocsDB').val();
            beforeStr = data1;
            var afterStr = beforeStr.split('/');
            var lastStr = '';

            lastStr = afterStr[0];

            $.ajax({
                type: "POST",
                url: "{{ url_for('get_shippingdocs_DB') }}",
                contentType: "application/json;",
                data: JSON.stringify(lastStr),

                success: function(out) {
                    if (out["check_new"]) {
                        add_new_db_shippingdocs(out);
                    } else {
                        add_old_db_shippingdocs(out);
                    }

                },
                error: function(out) {
                    //alert(out);
                }
            }); //end of ajax 

        });

        $(document).on('change', '#deliveryorderDB', function() {

            var data1 = $('#deliveryorderDB').val();
            beforeStr = data1;
            var afterStr = beforeStr.split('/');
            var lastStr = '';

            lastStr = afterStr[0];

            $.ajax({
                type: "POST",
                url: "{{ url_for('get_deliveryorder_DB') }}",
                contentType: "application/json;",
                data: JSON.stringify(lastStr),

                success: function(out) {
                    if (out["check_new"]) {
                        add_new_db_deliveryorder(out);
                    } else {
                        add_old_db_deliveryorder(out);
                    }

                },
                error: function(out) {
                    //alert(out);
                }
            }); //end of ajax 

        });

        function getRandomColor() {
            var letters = '0123456789ABCDEF';
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // select nego 
        $(document).on('change', '#SelectNego', function() {

            //console.log('#selectnego trigger');

            var data1 = $('#SelectNego').val();
            beforeStr = data1;
            var afterStr = beforeStr.split('/');

            //alert(afterStr[0]);

            var lastStr = '';
            lastStr = afterStr[0];
            //for( var e =0 ; e < afterStr.length ; e++)
            //{
            //if(afterStr[e].search("DBB") != -1 )
            //{
            //lastStr = afterStr[e];
            // break;
            //}
            //}

            $.ajax({
                type: "POST",
                url: "{{ url_for('get_nego_DB') }}",
                contentType: "application/json;",
                data: JSON.stringify(lastStr),

                success: function(out) {
                    if (out["check_new"]) {
                        add_new_db(out["select_new"][0]);

                        // keyword
                        var iSize = $("#history_id").children().length;
                        var str1 = 'w3-red';
                        var str2 = 'w3-blue';
                        var str3 = 'w3-green';
                        var str4 = 'w3-teal';
                        var strc = str1;
                        var icsel = 0;

                        if (iSize > 3) {
                            $("#history_id").children("span:first").remove();
                            icsel = 0;
                        }

                        //console.log(strc+icsel);
                        //var colourIndex = Math.floor(Math.random() * colours.length);

                        $("#history_id").append('<span class="badge badge-info  w3-tiny">' + lastStr + '</span>');

                        $("#history_id").children("span").eq(0).css("background-color", getRandomColor());
                        $("#history_id").children("span").eq(1).css("background-color", getRandomColor());
                        $("#history_id").children("span").eq(2).css("background-color", getRandomColor());
                        $("#history_id").children("span").eq(3).css("background-color", getRandomColor());


                    } else {
                        // delete in 2021 06. 13 
                        //add_orderInput(out);
                        //add_orderSelect(out);
                        //add_negoDate(out);                
                    }
                },
                error: function(out) {
                    //alert(out);
                }
            }); //end of ajax 

        });

        $(document).on('change', 'select[name=select_item]', function() {
            add_nav_item();

        });


        //#########191102
        $(document).on('click', '#insert_btn', function() {
            var data = $("select[name=insert_sample]").serializeArray();
            $.ajax({
                type: "POST",
                url: "{{ url_for('insert_db') }}",
                contentType: "application/json;",
                data: JSON.stringify(data),

                success: function(out) {
                    alert(out['msg'])
                },
                error: function(out) {
                    alert("Please check..")
                }
            }); //end of ajax 
        });

        //########################################

        function init_select() {
            $('#select_orderno').empty();
            $('#select_ordergubun').empty();
        }

        function add_nav_item() {
            $('#select_item').empty();
            var Y = $('#select_year').val();
            var on = $('#select_orderno').val();
            var og = $('#select_ordergubun').val();
            if (Y !== '' && on !== '' && og !== '') {
                $('#select_item').append(Y + " | " + on + " | " + og);
            }
        }

        function add_buyer_item() {
            $('#order_buyer').empty()

        }

        function add_ordernumber(data) {
            console.log(data);
            console.log(data['order_no'][1]);
            $('#select_orderno').empty();
            c = '<option value="">Select</option>';
            for (i = 0; i < data['order_no'].length; i++) {
                c += '<option>' + data['order_no'][i] + '</option>';
            }
            $('#select_orderno').append(c);
        }

        function add_ordergubun(data) {
            $('#select_ordergubun').empty();
            c = '<option value="">Select</option>';
            for (i = 0; i < data['order_gubun'].length; i++) {
                c += '<option>' + data['order_gubun'][i] + '</option>';
            }
            $('#select_ordergubun').append(c);

        }
        /* 20.01.29 ------------------------- */
        function add_new_db(data) {

            // clear
            // 1. order 
            addTable_supply_i = 0;
            var tableHeaderRowCount = 2;
            var table = document.getElementById("table_supply");
            var rowCount = table.rows.length;
            var colCount = table.rows[0].cells.length;
            for (var i = tableHeaderRowCount; i < rowCount; i++) {
                table.deleteRow(tableHeaderRowCount);
            }
            for (var i = 0; i < colCount; i++) {
                table.rows[0].cells[i] = '';
            }
            // 2. ship 
            addTable_ship_i = 0;
            table = document.getElementById("tableSPL_ship");
            rowCount = table.rows.length;
            colCount = table.rows[0].cells.length;
            for (var i = tableHeaderRowCount; i < rowCount; i++) {
                table.deleteRow(tableHeaderRowCount);
            }
            for (var i = 0; i < colCount; i++) {
                table.rows[0].cells[i] = '';
            }
            // 3. nego
            addTable_nego_i = 0;
            table = document.getElementById("table_nego");
            rowCount = table.rows.length;
            colCount = table.rows[0].cells.length;
            for (var i = tableHeaderRowCount; i < rowCount; i++) {
                table.deleteRow(tableHeaderRowCount);
            }
            for (var i = 0; i < colCount; i++) {
                table.rows[0].cells[i] = '';
            }


            add_item_selectize(buyer_order, data[1]);
            $("#OrderNo").val(data[2]);
            $("#OrderGubun").val(data[3]);
            add_item_selectize(agent_order, data[4]);
            $('#datepicker').val(data[5]);
            $('#date_stand').val(data[6]);
            $('#date_delivery').val(data[7]);
            add_item_selectize(term_order, data[8]);
            add_item_selectize(arrive_order, data[9]);
            add_item_selectize(payment_order, data[10]);

            $('#order_term').val(data[11]); // 10 - days
            add_item_selectize(method_order, data[12]);
            add_item_selectize(document_order, data[13]);
            $('#order_com1').val(data[14]);
            $('#order_com1_amount').val(data[15]);
            add_item_selectize(order_com1_to, data[16]);
            $('#order_com2').val(data[17]);
            $('#order_com2_amount').val(data[18]);
            add_item_selectize(order_com2_to, data[19]);

            $('#order_com3').val(data[20]);
            $('#order_com3_amount').val(data[21]);
            add_item_selectize(order_com3_to, data[22]);
            $('#order_com4').val(data[23]);
            $('#order_com4_amount').val(data[24]);
            add_item_selectize(order_com4_to, data[25]);
            $('#order_com_total').val(data[26]);
            add_item_selectize(item_order, data[27]);
            $('#order_DN').val(data[28]);
            $('#order_LF').val(data[29]);

            add_item_selectize(LS_order, data[30]);
            $('#order_remark').val(data[31]);
            $('#order_suip').val(data[32]);
            $('#order_ponum').val(data[33]);
            $('#order_quantity').val(data[34]);
            add_item_selectize(QTY_order, data[35]);
            add_item_selectize(PRC_order, data[36]);
            $('#order_prc').val(data[37]);
            $('#order_cross_rate').val(data[38]);
            $('#order_dollor').val(data[39]);

            $('#order_LC').val(data[40]);
            $('#order_receive_LC').val(data[41]);
            $('#date_SD').val(data[42]);
            $('#date_ED').val(data[43]);
            // company_order ... table ... data[44]
            var arr44 = []
            var length = document.getElementById("table_supply").rows[0].cells.length;
            var length2 = (data[44].match(/;/g) || []).length;
            var length3 = length2 / length;
            var startindex = 0;

            console.log(length2);

            for (var i = 0; i < length2; i++) {
                var beforestart = startindex;
                startindex = data[44].indexOf(";", startindex);
                var item;
                item = data[44].slice(beforestart, startindex);
                startindex++;
                console.log(item);
                arr44.push(item);
            }
            for (var i = 0; i < length3; i++) {
                if (i > 0) {
                    $('#addTable_supply').click();
                }

                var c1 = 'company_order_' + String(i);
                eval(c1).addItem(arr44[0 + i * length]);

                var c2 = 'order_table_quantity_' + String(i);
                eval(c2).value = arr44[1 + i * length];

                var c3 = 'order_table_fob_' + String(i);
                eval(c3).value = arr44[2 + i * length];

                var c4 = 'order_table_amount_' + String(i);
                eval(c4).value = arr44[3 + i * length];

                var c5 = 'method_opt_' + String(i);
                eval(c5).addItem(arr44[4 + i * length]);
            }


            $('#order_expect_price').val(data[45]);
            $('#order_etc_per').val(data[46]);
            $('#order_etc_amount').val(data[47]);
            $('#order_expect_margin').val(data[48]);
            $('#order_supplyremark').val(data[49]);
            $('#order_special').val(data[50]);
            add_item_selectize(buyerbank_order, data[51]);
            $('#order_before_order').val(data[52]);
            // shipment
            $('#inv_ship').val(data[53]);
            $('#actual_ship').val(data[54]);
            $('#ship_BL').val(data[55]);
            $('#ETA_ship').val(data[56]);
            $('#ship_size').val(data[57]);
            // containerno ... table ... data[58]
            //tableSPL_ship 
            var arr58 = [];
            //length = document.getElementById("tableSPL_ship").rows[0].cells.length;
            length = 9;
            length2 = (data[58].match(/;/g) || []).length;
            length3 = length2 / length;
            startindex = 0;

            for (var i = 0; i < length2; i++) {
                var beforestart = startindex;
                startindex = data[58].indexOf(";", startindex);
                var item;
                item = data[58].slice(beforestart, startindex);
                startindex++;
                console.log(item);
                arr58.push(item);
            }
            for (var i = 0; i < length3; i++) {
                if (i > 0) {
                    $('#addTable_ship').click();
                }

                var c1 = 'ship_container' + String(i);
                eval(c1).value = arr58[0 + i * length];

                var c1 = 'ship_SealNo' + String(i);
                eval(c1).value = arr58[1 + i * length];

                var c2 = 'ship_lotNo' + String(i);
                eval(c2).value = arr58[2 + i * length];
                var c3 = 'ship_date_chul' + String(i);
                eval(c3).value = arr58[3 + i * length];
                var c4 = 'ship_amount' + String(i);
                eval(c4).value = arr58[4 + i * length];
                var c5 = 'ship_company' + String(i);
                eval(c5).value = arr58[5 + i * length];
                var c6 = 'ship_name' + String(i);
                eval(c6).value = arr58[6 + i * length];
                //2020-03-26            
                //var c7 = 'ship_che'+String(i);
                //eval(c7).value = arr58[6+i*length];
                //var c8 = 'ship_car'+String(i);
                //eval(c8).value = arr58[7+i*length];

                var c10 = 'ship_FT2' + String(i);
                eval(c10).value = arr58[7 + i * length];
                //var c11 = 'ship_FT4'+String(i);
                //eval(c11).value = arr58[10+i*length];
                var c12 = 'ship_forward' + String(i);
                eval(c12).value = arr58[8 + i * length];
            }

            // nego
            add_item_selectize(bank_nego, data[59]);
            $('#day_nego').val(data[60]);
            $('#nego_ref').val(data[61]);
            $('#nego_InvNo').val(data[62]);
            $('#nego_quantity').val(data[63]);
            add_item_selectize(unit_nego, data[64]);
            var checkunitnego = $('#unit_nego').val();
            if (checkunitnego == '') {
                unit_nego.addItem('KG'); // added in 2020-03-18
            }
            $('#nego_TT').val(data[65]);
            $('#nego_underV').val(data[66]);
            $('#unit_nego_table').val(data[67]);
            var checkunitnegotable = $('#unit_nego_table').val();
            if (checkunitnegotable == '') {
                unit_nego_table.addItem('U$'); // added in 2020-03-18
            }
            $('#nego_etc').val(data[68]);
            $('#nego_etc_dollor').val(data[69]);
            $('#neto_etc_exchange').val(data[70]);
            $('#nego_won').val(data[71]);
            $('#nego_cross').val(data[72]);
            $('#nego_cross_amount').val(data[73]);
            $('#nego_com1_rate').val(data[74]);
            $('#nego_com1_amount').val(data[75]);
            $('#nego_hwanga').val(data[76]);
            $('#nego_com2_rate').val(data[77]);
            $('#nego_com2_amount').val(data[78]);
            $('#nego_com_total').val(data[79]);
            $('#nego_uwon').val(data[80]);
            $('#nextnego_nego').val(data[81]);
            $('#nego_m1').val(data[82]);
            //$('input[name=gender]:checked').val();  data[83]// 82 radio button
            console.log("radio : " + String(data[83]));
            if (String(data[83]) == 'radio_1') {
                //console.log("radio_1 check");
                document.getElementById("id_radio_1").checked = true;
            } else {
                document.getElementById("id_radio_2").checked = true;
            }

            $('#nego_m3').val(data[84]);
            add_item_selectize(buymethod_nego, data[85]);
            $('#nego_m4').val(data[86]);
            $('#DueDate_nego').val(data[87]);
            $('#report_nego').val(data[88]);
            $('#get_nego').val(data[89]);
            // table data[90]
            //table_nego 
            var arr90 = []
            length = document.getElementById("table_nego").rows[0].cells.length;
            length2 = (data[90].match(/;/g) || []).length;
            length3 = length2 / length;
            startindex = 0;

            console.log(length2);

            for (var i = 0; i < length2; i++) {
                var beforestart = startindex;
                startindex = data[90].indexOf(";", startindex);
                var item;
                item = data[90].slice(beforestart, startindex);
                startindex++;
                console.log(item);
                arr90.push(item);
            }
            for (var i = 0; i < length3; i++) {
                if (i > 0) {
                    $('#addTable_nego').click();
                }

                var c1 = 'nego_deposit_date' + String(i);
                eval(c1).value = arr90[0 + i * length];
                var c2 = 'nego_deposit_amount' + String(i);
                eval(c2).value = arr90[1 + i * length];
                var c3 = 'nego_deposit_content' + String(i);
                eval(c3).value = arr90[2 + i * length];

            }


            $('#nego_incomplete_value').val(data[91]);
            $('#nego_comment').val(data[92]);
            // local
            // table data[93]
            $('#paydate1_local').val(data[94]);
            $('#paydate2_local').val(data[95]);
            $('#paydate3_local').val(data[96]);
            $('#paydate4_local').val(data[97]);
            $('#BillInvoice1').val(data[98]);
            $('#BillInvoice2').val(data[99]);
            $('#BillInvoice3').val(data[100]);
            $('#BillInvoice4').val(data[101]);
            $('#BillMoneyInvoice1').val(data[102]);
            $('#BillMoneyInvoice2').val(data[103]);
            $('#BillMoneyInvoice3').val(data[104]);
            $('#BillMoneyInvoice4').val(data[105]);
            $('#BillDollorInvoice1').val(data[106]);
            $('#BillDollorInvoice2').val(data[107]);
            $('#BillDollorInvoice3').val(data[108]);
            $('#BillDollorInvoice4').val(data[109]);
            $('#BillRate1').val(data[110]);
            $('#BillRate2').val(data[111]);
            $('#BillRate3').val(data[112]);
            $('#BillRate4').val(data[113]);
            $('#local_sunim').val(data[114]);
            $('#local_sunim2').val(data[115]);
            $('#local_demur').val(data[116]);
            $('#local_demur2').val(data[117]);
            $('#local_su').val(data[118]);
            $('#local_su2').val(data[119]);
            $('#local_jukwha').val(data[120]);
            $('#local_jukwha2').val(data[121]);
            $('#local_transport').val(data[122]);
            $('#local_transport2').val(data[123]);
            $('#local_comm').val(data[124]);
            $('#local_comm2').val(data[125]);
            $('#paycomm_local').val(data[126]);
            $('#clean_local').val(data[127]);
            $('#local_lc_open').val(data[128]);
            $('#local_lc_open2').val(data[129]);
            $('#local_receive_LC').val(data[130]);
            $('#local_receive_LC_won').val(data[131]);
            $('#local_u').val(data[132]);
            $('#local_u2').val(data[133]);
            $('#local_hwanhwan').val(data[134]);
            $('#local_hwanhwan2').val(data[135]);
            $('#local_delay').val(data[136]);
            $('#local_delay2').val(data[137]);
            $('#local_less').val(data[138]);
            $('#local_less2').val(data[139]);
            $('#local_insudelay').val(data[140]);
            $('#local_insudelay2').val(data[141]);
            $('#local_actual').val(data[142]);
            $('#local_actual2').val(data[143]);
            $('#local_special').val(data[144]);
            //fta
            $('#out_fta').val(data[145]);
            add_item_selectize(item_fta, data[146]);
            add_item_selectize(place_fta, data[147]);
            add_item_selectize(cont_fta, data[148]);

            /////////////////////////////////////////////////
            // connected input
            // 2020-03-18
            $('#nego_quantity').val(data[34]);
            var strsum = data[2] + '_' + data[3];
            $('#nego_InvNo').val(strsum);

            var qty0 = $('#local_table_QTY_0').val();
            $('#BillInvoice1').val(qty0);
            var amount_us = $('#local_table_amount_dollor_0').val();
            $('#BillDollorInvoice1').val(amount_us);
            /////////////////////////////////////////////////   

            /////////////////////////////////////////////////
            // 2020-03-19
            var comtotal = $('#nego_com_total').val();
            var negocrss = $('#nego_cross').val();
            comtotal = setReadyCalculation(comtotal);
            comtotal = parseFloat(comtotal);
            comtotal = comtotal * negocrss;
            //console.log('4494 local_comm', comtotal);
            //$('#local_comm').val(comtotal);
            //changeActualMarginDollor();
            /////////////////////////////////////////////////
        }

        //2020-03-27
        function clear_contract() {
            $("#contract_invoice_OrderNo").val("");
            $("#contract_invoice_OrderGubun").val("");
            $("#contract_invoice_shipper").val("");
            $("#contract_invoice_account").val("");
            //$("#contract_invoice_Loading").val("");
            contract_invoice_Loading.addItem("ANY KOREAN PORT");
            $("#contract_invoice_Destination").val("");
            contract_invoice_Vessel.setValue(0);
            $("#date_contract_invoice_sailing").val("");
            $("#contract_invoice_invoice").val("");
            $("#date_contract_invoice_invoice").val("");
            $("#contract_invoice_term").val("");
            $("#contract_invoice_trans").val("ALLOWED");
            $("#contract_invoice_ship").val("ALLOWED");
            $("#contract_invoice_remark").val("");

            $("#contract_goods_1").val("");
            $("#contract_goods_2").val("");
            $("#contract_goods_3").val("");
            $("#contract_goods_4").val("");

            $("#contract_goods_5").val("");
            $("#contract_goods_6").val("");
            $("#contract_goods_7").val("");
            $("#contract_goods_8").val("");

            $("#contract_goods_9").val("");
            $("#contract_goods_10").val("");
            $("#contract_goods_11").val("");
            $("#contract_goods_12").val("");

            $("#contract_quantity_1").val("");
            $("#contract_quantity_2").val("");
            $("#contract_quantity_3").val("");
            $("#contract_quantity_total").val("");

            $("#contract_price_1").val("");
            $("#contract_price_2").val("");
            $("#contract_price_3").val("");

            $("#contract_amount_1").val("");
            $("#contract_amount_2").val("");
            $("#contract_amount_3").val("");
            $("#contract_amount_total").val("");
        }

        function clear_contract2() {
            $("#contract2_invoice_OrderNo").val("");
            $("#contract2_invoice_OrderGubun").val("");
            $("#contract2_invoice_shipper").val("");
            $("#date_contract2_ship").val("");
            contract2_loading.addItem("ANY KOREAN PORT");
            $("#contract2_insurance").val("");
            $("#date_contract2_contract_date").val("");
            $("#contract2_no").val("");
            $("#contract2_reference").val("");
            $("#contract2_discharging").val("");
            $("#contract2_trans").val("ALLOWED");
            $("#contract2_shipment").val("ALLOWED");
            $("#contract2_payment").val("");
            $("#contract2_remark").val("");
            $("#contract2_term").val("");


            $("#contract2_goods_1").val("");
            $("#contract2_goods_2").val("");
            $("#contract2_goods_3").val("");
            $("#contract2_goods_4").val("");

            $("#contract2_goods_5").val("");
            $("#contract2_goods_6").val("");
            $("#contract2_goods_7").val("");
            $("#contract2_goods_8").val("");

            $("#contract2_goods_9").val("");
            $("#contract2_goods_10").val("");
            $("#contract2_goods_11").val("");
            $("#contract2_goods_12").val("");

            $("#contract2_quantity_1").val("");
            $("#contract2_quantity_2").val("");
            $("#contract2_quantity_3").val("");
            $("#contract2_quantity_total").val("");

            $("#contract2_price_1").val("");
            $("#contract2_price_2").val("");
            $("#contract2_price_3").val("");

            $("#contract2_amount_1").val("");
            $("#contract2_amount_2").val("");
            $("#contract2_amount_3").val("");
            $("#contract2_amount_total").val("");
        }


        function add_new_db_contract(data) {
            clear_contract();
            clear_contract2();

            /////////////////////////////////////////////////////////////
            // no
            $("#contract_invoice_OrderNo").val(data['no']);
            $("#contract_invoice_OrderGubun").val(data['gubun']);

            $("#contract2_invoice_OrderNo").val(data['no']);
            $("#contract2_invoice_OrderGubun").val(data['gubun']);
            /////////////////////////////////////////////////////////////

            //console.log(1);
            //console.log(check_company);
            /////////////////////////////////////////////////////////////
            // do best
            var datado = '';
            if (check_company == 'DB')
                datado = 'DO BEST CO. LTD.\n4F, 232 TOJEONG-RO, SEOUL, REPUBLIC OF KOREA\n#04091 T)82.2.3271.3800';
            else if (check_company == 'EI')
                datado = 'EIN Textile CO. LTD.\n4F, 232 TOJEONG-RO, SEOUL, REPUBLIC OF KOREA\n#04091 T)82.2.3271.3800';
            $('#contract_invoice_shipper').val(datado);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // buyer

            console.log('buyer', data['buyer']);
            if (data['buyer'].length) {
                var data1 = data['buyer'][0][2];
                var data2 = data['buyer'][0][3];
                var data3 = data['buyer'][0][4];
                var data4 = data['buyer'][0][5];


                var datat = String(data1) + '\n' + String(data2) + '\n' + String(data3) + '\n' + String(data4);

                datat = datat.replace(/nan/gi, "");

                $("#contract_invoice_account").val(datat); //invoice
                $("#contract2_invoice_shipper").val(datat); //contract
            }
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // shipment
            var datedelivery = data['deliverydate'];
            $("#date_contract2_ship").val(datedelivery);
            $("#date_contract_invoice_sailing").val(datedelivery);
            /////////////////////////////////////////////////////////////
            console.log(2);
            /////////////////////////////////////////////////////////////
            // port of loading
            //console.log(data['port'].length>0)
            if (data['port']) {
                var dataport = data['port'];
                //if ( dataport == null)
                if (dataport == 'None') {
                    dataport = 6; // any korea port
                }

                contract2_loading.setValue(dataport);
                contract_invoice_Loading.setValue(dataport);
            }

            //var textport = $("#contract2_loading").val();

            //textport1 =$('#contract2_loading')[0].selectize.options;      
            //$("#contract2_loading").val(textport1);
            /////////////////////////////////////////////////////////////

            //console.log(data['term']);

            /////////////////////////////////////////////////////////////
            // insurance
            var termdata = data['term'];
            if (termdata.search("CIF") != -1) {
                $("#contract2_insurance").val("Seller");
            }
            /////////////////////////////////////////////////////////////
            //console.log(3);
            /////////////////////////////////////////////////////////////
            // contract date
            var contractdata = data['orderdate'];
            $("#date_contract2_contract_date").val(contractdata);
            $("#date_contract_invoice_invoice").val(contractdata);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // contract no
            var con_no = data['no'];
            $("#contract2_no").val(con_no);
            $("#contract_invoice_invoice").val(con_no);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // port of discharging
            var dischargingdata = data['portofdisch'];
            $("#contract2_discharging").val(dischargingdata);
            $("#contract_invoice_Destination").val(dischargingdata);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // datapayment dataorderterm datadocument
            var datapayment = data['datapayment'];
            var dataorderterm = data['dataorderterm'];
            var datadocument = data['datadocument'];
            var datapaymentfinal = '';


            let i8_1 = $('#payment_order').val();
            let i8_2 = $('#order_term').val();
            let i8_3 = $('#document_order').val();


            if (!dataorderterm) {

                datapaymentfinal = String(datapayment) + ' ' + String(dataorderterm) + ' ' + String(datadocument);
            } else {
                datapaymentfinal = String(datapayment) + ' AT ' + String(dataorderterm) + ' ' + String(datadocument);
            }
            $("#contract2_payment").val(datapaymentfinal);
            /////////////////////////////////////////////////////////////
            /////////////////////////////////////////////////////////////
            // remark
            $("#contract2_remark").val("*+/-10% MORE OR LESS FOR Q\'TY AND AMOUNT SHOULD BE ALLOWED\n*IF THE PAYMENT WIOLL BE DELAYED, ALL OF CHARGE SHOULD BE ON BUYER\'S ACCOUNT");
            $("#contract_invoice_remark").val("*+/-10% MORE OR LESS FOR Q\'TY AND AMOUNT SHOULD BE ALLOWED\n*IF THE PAYMENT WIOLL BE DELAYED, ALL OF CHARGE SHOULD BE ON BUYER\'S ACCOUNT");
            /////////////////////////////////////////////////////////////
            /////////////////////////////////////////////////////////////
            // term / destination
            var dataterm_dest = String(termdata) + ' ' + String(dischargingdata);
            $("#contract2_term").val(dataterm_dest);
            /////////////////////////////////////////////////////////////

            // term / destination

            var dataterm_dest = String(dataterm_dest) + '\n' + String(datapaymentfinal) + ' ' + String(datadocument);
            $("#contract_invoice_term").val(dataterm_dest);

            /////////////////////////////////////////////////////////////
            // item 
            var item_length = data['item123'].length;
            var lusteritem = data['luster'];

            if (data['item123'][0][0].length >= 2) $("#contract2_goods_1").val(data['item123'][0][0][2]);


            if (data['item123'][0].length > 2 && lusteritem.length > 0) {
                // PSF, PSF REG, PP
                //if (data['item123'][0][0][1])
                let strFmm = 'F ';
                if (data['item123'][0][0][1] == 'PSF' || data['item123'][0][0][1] == 'PSF REG' || data['item123'][0][0][1] == 'PP')
                    strFmm = 'MM ';

                var dataitem1 = String(data['item123'][0][1]) + 'D / ' + String(data['item123'][0][2]) + strFmm + String(lusteritem[0][2]);
                $("#contract2_goods_2").val(dataitem1);
            }

            var qu1 = data['item123'][0][3];

            qu1 = locale(String(qu1));
            console.log('qu1', qu1);
            console.log('data[item123]', data['item123']);
            if (data['item123'][0][3]) $("#contract2_quantity_1").val(String(qu1) + String(' ') + String(data['item123'][0][6]));

            if (data['item123'][0][7] && data['item123'][0][4]) $("#contract2_price_1").val(String(data['item123'][0][7]) + String(data['item123'][0][4]) + String(' /') + String(data['item123'][0][6]));

            if (data['item123'][0][5]) $("#contract2_amount_1").val(String(data['item123'][0][7]) + String(' ') + String(locale(data['item123'][0][5])));


            let strFmm = 'F ';
            if (data['item123'][0][0][1] == 'PSF' || data['item123'][0][0][1] == 'PSF REG' || data['item123'][0][0][1] == 'PP')
                strFmm = 'MM ';

            if (item_length >= 2) {
                $("#contract2_goods_5").val(data['item123'][1][0][2]);
                var dataitem2 = String(data['item123'][1][1]) + 'D / ' + String(data['item123'][1][2]) + strFmm + String(lusteritem[0][2]);
                $("#contract2_goods_6").val(dataitem2);

                $("#contract2_quantity_2").val(String(locale(data['item123'][1][3])) + String(' ') + String(data['item123'][1][6]));
                $("#contract2_price_2").val(String(data['item123'][1][7]) + String(' ') + String(data['item123'][1][4]) + String(' /') + String(data['item123'][1][6]));
                $("#contract2_amount_2").val(String(data['item123'][1][7]) + String(' ') + String(locale(data['item123'][1][5])));
                console.log(data['item123'][0][0][1]);
                if (item_length >= 3) {
                    $("#contract2_goods_9").val(data['item123'][2][0][2]);
                    var dataitem3 = String(data['item123'][2][1]) + 'D / ' + String(data['item123'][2][2]) + strFmm + String(lusteritem[0][2]);
                    $("#contract2_goods_10").val(dataitem3);

                    $("#contract2_quantity_3").val(String(locale(data['item123'][2][3])) + String(' ') + String(data['item123'][2][6]));
                    $("#contract2_price_3").val(String(data['item123'][2][7]) + String(' ') + String(data['item123'][2][4]) + String(' /') + String(data['item123'][2][6]));
                    $("#contract2_amount_3").val(String(data['item123'][2][7]) + String(' ') + String(locale(data['item123'][2][5])));
                }
            }
            //console.log(5);
            var q1 = $("#contract2_quantity_1").val();
            var q2 = $("#contract2_quantity_2").val();
            var q3 = $("#contract2_quantity_3").val();

            q1 = setReadyCalculation(q1);
            q2 = setReadyCalculation(q2);
            q3 = setReadyCalculation(q3);

            var qt = parseFloat(q1) + parseFloat(q2) + parseFloat(q3);
            qt = locale(qt);
            $("#contract2_quantity_total").val(String(qt) + ' ' + String(data['item123'][0][6]));

            var a1 = $("#contract2_amount_1").val();
            var a2 = $("#contract2_amount_2").val();
            var a3 = $("#contract2_amount_3").val();

            a1 = setReadyCalculation(a1);
            a2 = setReadyCalculation(a2);
            a3 = setReadyCalculation(a3);

            var at = parseFloat(a1) + parseFloat(a2) + parseFloat(a3);
            at = locale(at);
            $("#contract2_amount_total").val(String(data['item123'][0][7]) + ' ' + String(at));
            // end item
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // item (invoice)
            //console.log(6);
            console.log(data['item123'][0][0][1]);
            if (data['item123'][0][0].length > 2) $("#contract_goods_1").val(data['item123'][0][0][2]);
            if (data['item123'][0].length > 1 && lusteritem.length > 0) {
                var dataitem1 = String(data['item123'][0][1]) + 'D / ' + String(data['item123'][0][2]) + strFmm + String(lusteritem[0][2]);;
                $("#contract_goods_2").val(dataitem1);
            }


            //if(data['item123'][0][3] ) $("#contract2_quantity_1").val(String(data['item123'][0][3])+String(' KGS'));

            //if(data['item123'][0][7] && data['item123'][0][4] ) $("#contract2_price_1").val(String(data['item123'][0][7])+String(data['item123'][0][4])+String(' /KG'));

            //if(data['item123'][0][5]) $("#contract2_amount_1").val(String('U$')+String(data['item123'][0][5]));
            //console.log('item_length : ',item_length);

            $("#contract_quantity_1").val(String(locale(data['item123'][0][3])) + String(' ') + String(data['item123'][0][6] + 'S'));
            $("#contract_price_1").val(String(data['item123'][0][7]) + ' ' + String(data['item123'][0][4]) + String(' /') + String(data['item123'][0][6]));
            $("#contract_amount_1").val(String(data['item123'][0][7]) + ' ' + String(locale(data['item123'][0][5])));

            if (item_length >= 2) {
                $("#contract_goods_5").val(data['item123'][1][0][2]);
                var dataitem2 = String(data['item123'][1][1]) + 'D / ' + String(data['item123'][1][2]) + strFmm + String(lusteritem[0][2]);;
                $("#contract_goods_6").val(dataitem2);



                $("#contract_quantity_2").val(String(locale(data['item123'][1][3])) + String(' ') + String(data['item123'][1][6] + 'S'));
                $("#contract_price_2").val(String(data['item123'][1][7]) + ' ' + String(data['item123'][1][4]) + String(' /') + String(data['item123'][1][6]));
                $("#contract_amount_2").val(String(data['item123'][1][7]) + ' ' + String(locale(data['item123'][1][5])));

                if (item_length >= 3) {
                    $("#contract_goods_9").val(data['item123'][2][0][2]);
                    var dataitem3 = String(data['item123'][2][1]) + 'D / ' + String(data['item123'][2][2]) + strFmm + String(lusteritem[0][2]);;
                    $("#contract_goods_10").val(dataitem3);

                    //$("#contract_quantity_3").val(String(data['item123'][2][3])+String(' KGS'));
                    //$("#contract_price_3").val(String('U$')+String(data['item123'][2][4])+String(' /KG'));
                    //$("#contract_amount_3").val(String('U$')+String(data['item123'][2][5]));


                    $("#contract_quantity_3").val(String(locale(data['item123'][2][3])) + String(' ') + String(data['item123'][2][6] + 'S'));
                    $("#contract_price_3").val(String(data['item123'][2][7]) + ' ' + String(data['item123'][2][4]) + String(' /') + String(data['item123'][2][6]));
                    $("#contract_amount_3").val(String(data['item123'][2][7]) + ' ' + String(locale(data['item123'][2][5])));
                }
            }

            var q1 = $("#contract_quantity_1").val();
            var q2 = $("#contract_quantity_2").val();
            var q3 = $("#contract_quantity_3").val();



            q1 = setReadyCalculation(q1);
            q2 = setReadyCalculation(q2);
            q3 = setReadyCalculation(q3);

            //console.log("contract quantity: ", q1, q2,a3);

            var qt1 = parseFloat(q1) + parseFloat(q2) + parseFloat(q3);

            //var num = 2046430.123;
            //num.toLocaleString(undefined, {
            //  minimumFractionDigits: 2,
            //  maximumFractionDigits: 2
            //}) // 2,046,430.12

            //console.log('qt : ', qt1);
            qt1 = locale(qt1);

            $("#contract_quantity_total").val(String(qt1) + ' ' + String(data['item123'][0][6]));

            var a1 = $("#contract_amount_1").val();
            var a2 = $("#contract_amount_2").val();
            var a3 = $("#contract_amount_3").val();

            a1 = setReadyCalculation(a1);
            a2 = setReadyCalculation(a2);
            a3 = setReadyCalculation(a3);

            var at = parseFloat(a1) + parseFloat(a2) + parseFloat(a3);
            at = locale(at);
            $("#contract_amount_total").val(String(data['item123'][0][7]) + ' ' + String(at));
            // end item
            /////////////////////////////////////////////////////////////
        }

        $('#contract2_loading').change(function() {
            var dataport = $("#contract2_loading").val();
            textport1 = $("#contract2_loading")[0].selectize.options[dataport].text;
            //$("#contract2_loading").val(textport1);
        });
        $('#contract_invoice_Loading').change(function() {
            let dataport = $("#contract_invoice_Loading").val();
            textport1 = $("#contract_invoice_Loading")[0].selectize.options[dataport].text;
            //$("#contract_invoice_Loading").val(textport1);
        });

        $("#contract2_trans,#contract2_shipment").click(function() {
            var thisid = this.id;
            if (this.value == "ALLOWED") {
                eval(thisid).value = "NOT ALLOWED";
                if (thisid == 'contract2_trans') {
                    $("#contract_invoice_trans").val("NOT ALLOWED");
                }
                if (thisid == 'contract2_shipment') {
                    $("#contract_invoice_ship").val("NOT ALLOWED");
                }
            } else {
                eval(thisid).value = "ALLOWED";
                if (thisid == 'contract2_trans') {
                    $("#contract_invoice_trans").val("ALLOWED");
                }
                if (thisid == 'contract2_shipment') {
                    $("#contract_invoice_ship").val("ALLOWED");
                }
            }
        });

        $("#contract_invoice_trans,#contract_invoice_ship").click(function() {
            var thisid = this.id;
            if (this.value == "ALLOWED") {
                eval(thisid).value = "NOT ALLOWED";
                if (thisid == 'contract_invoice_trans') {
                    $("#contract2_trans").val("NOT ALLOWED");
                }
                if (thisid == 'contract_invoice_ship') {
                    $("#contract2_shipment").val("NOT ALLOWED");
                }
            } else {
                eval(thisid).value = "ALLOWED";
                if (thisid == 'contract_invoice_trans') {
                    $("#contract2_trans").val("ALLOWED");
                }
                if (thisid == 'contract_invoice_ship') {
                    $("#contract2_shipment").val("ALLOWED");
                }
            }
        });

        function add_old_db_contract(data) {
            //console.log('in add_old_db_contract!!')
            //data['iddb'];
            //data['idgb'];
            //data['contract2_invoice_shipper'];
            //data['date_contract2_ship'];
            //data['contract2_loading'];
            //data['contract2_insurance'];
            //data['date_contract2_contract_date'];
            //data['contract2_no'];
            //data['contract2_reference'];
            //data['contract2_discharging'];
            //data['contract2_trans'];
            //data['contract2_shipment'];
            //data['contract2_payment'];
            //data['contract2_remark'];
            //data['contract2_term'];
            //data['contract2_goods1'];
            //data['contract2_goods2'];
            //data['contract2_goods3'];
            //data['contract2_quantity_1'];
            //data['contract2_quantity_2'];
            //data['contract2_quantity_3']
            //data['contract2_quantity_total'];
            //data['contract2_price_1'];
            //data['contract2_price_2'];
            //data['contract2_price_3'];
            //data['contract2_amount_1'];
            //data['contract2_amount_2'];
            //data['contract2_amount_3'];
            //data['contract2_amount_total'];

            clear_contract();
            clear_contract2();

            /////////////////////////////////////////////////////////////
            // no
            $("#contract_invoice_OrderNo").val(data['iddb']);
            $("#contract_invoice_OrderGubun").val(data['idgb']);

            $("#contract2_invoice_OrderNo").val(data['iddb']);
            $("#contract2_invoice_OrderGubun").val(data['idgb']);
            /////////////////////////////////////////////////////////////


            /////////////////////////////////////////////////////////////
            // do best
            var datado = '';
            if (check_company == 'DB')
                datado = 'DO BEST CO. LTD.\n 4F, 232 TOJEONG-RO, SEOUL, REPUBLIC OF KOREA\n#04091 T)82.2.3271.3800';
            else if (check_company == 'EI')
                datado = 'EIN Textile CO. LTD.\n4F, 232 TOJEONG-RO, SEOUL, REPUBLIC OF KOREA\nT)82.2.3271.3800 F)3271.3899';
            $('#contract_invoice_shipper').val(datado);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // buyer



            $("#contract_invoice_account").val(data['contract2_invoice_shipper']); //invoice
            $("#contract2_invoice_shipper").val(data['contract2_invoice_shipper']); //contract

            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // shipment
            var datedelivery = data['date_contract2_ship'];

            $("#date_contract2_ship").val(datedelivery);
            var datedelivery = data['date_contract2_ship'];
            $("#date_contract_invoice_sailing").val(datedelivery);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // port of loading

            //$('#contract2_loading').val();

            //console.log('data[contract2_loading]', data['contract2_loading']);

            //$("#contract2_loading").val(parseInt(data['contract2_loading']));
            contract2_loading.addItem(data['contract2_loading']);

            //textport1 = $('#contract2_loading')[0].selectize.options;

            //$("#contract2_loading").val(textport1);
            /////////////////////////////////////////////////////////////

            //console.log(data['term']);

            /////////////////////////////////////////////////////////////
            // insurance

            //console.log('data[contract2_insurance]', data['contract2_insurance']);
            $("#contract2_insurance").val(data['contract2_insurance']);


            /////////////////////////////////////////////////////////////
            // contract date
            var contractdata = data['date_contract2_contract_date'];
            $("#date_contract2_contract_date").val(contractdata);
            $("#date_contract_invoice_invoice").val(contractdata);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // contract no
            var con_no = data['no'];
            $("#contract2_no").val(data['contract2_no']);
            $("#contract_invoice_invoice").val(con_no);
            /////////////////////////////////////////////////////////////

            $("#contract2_reference").val(data['contract2_reference']);
            /////////////////////////////////////////////////////////////
            // port of discharging
            var dischargingdata = data['portofdisch'];
            $("#contract2_discharging").val(data['contract2_discharging']);
            $("#contract_invoice_Destination").val(dischargingdata);
            /////////////////////////////////////////////////////////////

            $("#contract2_trans").val(data['contract2_trans']);
            $("#contract2_shipment").val(data['contract2_shipment']);
            /////////////////////////////////////////////////////////////
            // datapayment dataorderterm datadocument
            $("#contract2_payment").val(data['contract2_payment']);
            /////////////////////////////////////////////////////////////
            /////////////////////////////////////////////////////////////
            // remark
            $("#contract2_remark").val(data['contract2_remark']);
            $("#contract_invoice_remark").val("*+/-10% MORE OR LESS FOR Q\'TY AND AMOUNT SHOULD BE ALLOWED\n*IF THE PAYMENT WIOLL BE DELAYED, ALL OF CHARGE SHOULD BE ON BUYER\'S ACCOUNT");
            /////////////////////////////////////////////////////////////
            /////////////////////////////////////////////////////////////
            // term / destination

            $("#contract2_term").val(data['contract2_term']);
            /////////////////////////////////////////////////////////////

            // term / destination

            //var dataterm_dest = String(dataterm_dest) + '\n' + String(datapaymentfinal) + ' ' + String(datadocument);
            $("#contract_invoice_term").val(data['contract2_term']);

            /////////////////////////////////////////////////////////////
            // item 

            var datasplit = data['contract2_goods1'].split(';');

            $("#contract2_goods_1").val(datasplit[0]);
            $("#contract2_goods_2").val(datasplit[1]);
            $("#contract2_goods_3").val(datasplit[2]);
            $("#contract2_goods_4").val(datasplit[3]);

            $("#contract2_quantity_1").val(data['contract2_quantity_1']);
            $("#contract2_price_1").val(data['contract2_price_1']);
            $("#contract2_amount_1").val(data['contract2_amount_1']);

            var datasplit2 = data['contract2_goods2'].split(';');
            $("#contract2_goods_5").val(datasplit2[0]);
            $("#contract2_goods_6").val(datasplit2[1]);
            $("#contract2_goods_7").val(datasplit2[2]);
            $("#contract2_goods_8").val(datasplit2[3]);

            $("#contract2_quantity_2").val(data['contract2_quantity_2']);
            $("#contract2_price_2").val(data['contract2_price_2']);
            $("#contract2_amount_2").val(data['contract2_amount_2']);


            var datasplit3 = data['contract2_goods3'].split(';');
            $("#contract2_goods_9").val(datasplit3[0]);
            $("#contract2_goods_10").val(datasplit3[1]);
            $("#contract2_goods_11").val(datasplit3[2]);
            $("#contract2_goods_12").val(datasplit3[3]);

            $("#contract2_quantity_3").val(data['contract2_quantity_3']);
            $("#contract2_price_3").val(data['contract2_price_3']);
            $("#contract2_amount_3").val(data['contract2_amount_3']);



            $("#contract2_quantity_total").val(data['contract2_quantity_total']);
            $("#contract2_amount_total").val(data['contract2_amount_total']);
            // end item
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // item (invoice)
            //console.log(6);

            var datasplit = data['contract2_goods1'].split(';');

            $("#contract_goods_1").val(datasplit[0]);
            $("#contract_goods_2").val(datasplit[1]);
            $("#contract_goods_3").val(datasplit[2]);
            $("#contract_goods_4").val(datasplit[3]);

            $("#contract_quantity_1").val(data['contract2_quantity_1']);
            $("#contract_price_1").val(data['contract2_price_1']);
            $("#contract_amount_1").val(data['contract2_amount_1']);

            var datasplit2 = data['contract2_goods2'].split(';');
            $("#contract_goods_5").val(datasplit2[0]);
            $("#contract_goods_6").val(datasplit2[1]);
            $("#contract_goods_7").val(datasplit2[2]);
            $("#contract_goods_8").val(datasplit2[3]);

            $("#contract_quantity_2").val(data['contract2_quantity_2']);
            $("#contract_price_2").val(data['contract2_price_2']);
            $("#contract_amount_2").val(data['contract2_amount_2']);


            var datasplit3 = data['contract2_goods3'].split(';');
            $("#contract_goods_9").val(datasplit3[0]);
            $("#contract_goods_10").val(datasplit3[1]);
            $("#contract_goods_11").val(datasplit3[2]);
            $("#contract_goods_12").val(datasplit3[3]);

            $("#contract_quantity_3").val(data['contract2_quantity_3']);
            $("#contract_price_3").val(data['contract2_price_3']);
            $("#contract_amount_3").val(data['contract2_amount_3']);



            $("#contract_quantity_total").val(data['contract2_quantity_total']);
            $("#contract_amount_total").val(data['contract2_amount_total']);
            // end item
            /////////////////////////////////////////////////////////////
        }

        function setspace(size) {
            text = '\xa0';
            var a = size;
            for (var i = 0; i < a; i++) {
                text += '\xa0';
            }
            return text
        }

        function clear_shippingdocs() {
            $("#shippingdocs_OrderNo").val("");
            $("#shippingdocs_OrderGubun").val("");
            $("#shippingdocs_1").val("");
            $("#date_shippingdocs_1").val("");
            $("#shippingdocs_2").val("");
            $("#date_shippingdocs_2").val("");
            $("#shippingdocs_3").val("XXXX");
            $("#shippingdocs_4").val("");
            $("#shippingdocs_4_text").val("");
            $("#shippingdocs_5").val("");
            $("#shippingdocs_6_text").val("");
            $("#shippingdocs_7").val("TO ORDER");
            $("#shippingdocs_8").val("");
            $("#shippingdocs_10").val("BUSAN KOREA");
            $("#shippingdocs_11").val("");
            $("#shippingdocs_11_text").val("");
            $("#shippingdocs_12").val("");
            $("#date_shippingdocs_13").val("");
            $("#shippingdocs_14_text").val("");
            $("#shippingdocs_15_text").val("");
            $("#shippingdocs_16").val("");
            $("#shippingdocs_17").val("");

            var tableHeaderRowCount = 2;
            table = document.getElementById("shippingdocs_tableSPL");
            rowCount = table.rows.length;
            colCount = table.rows[0].cells.length;
            for (var i = tableHeaderRowCount; i < rowCount; i++) {
                table.deleteRow(tableHeaderRowCount);
            }
            for (var i = 0; i < colCount; i++) {
                table.rows[0].cells[i] = '';
            }

        }

        function clear_shippingpackinglist() {
            $("#shipping_packing_list_OrderNo").val("");
            $("#shipping_packing_list_OrderGubun").val("");
            $("#shipping_packing_list_shipper").val("");
            $("#shipping_packing_list_account").val("");
            $("#shipping_packing_list_Notify").val("");
            $("#shipping_packing_list_Loading").val("");
            $("#shipping_packing_list_Destination").val("");
            $("#shipping_packing_list_Vessel").val("");
            $("#date_shipping_packing_list_sailing").val("");
            $("#shipping_packing_list_invoice").val("");
            $("#date_shipping_packing_list_invoice").val("");
            $("#shipping_packing_list_remark").val("");
            $("#shipping_packing_list_goods").val("");
            $("#shipping_packing_list_kind").val("");
            $("#shipping_packing_list_kind_contents").val("");
            $("#shipping_packing_list_title1").val("");
            $("#shipping_packing_list_title2").val("");


        }

        function clear_shippingcominvoice() {
            $("#shipping_comm_invoice_OrderNo").val("");
            $("#shipping_comm_invoice_OrderGubun").val("");
            $("#shipping_comm_invoice_shipper").val("");
            $("#shipping_comm_invoice_account").val("");
            $("#shipping_comm_invoice_Notify").val("");
            $("#shipping_comm_invoice_Loading").val("");
            $("#shipping_comm_invoice_Destination").val("");
            $("#shipping_comm_invoice_Vessel").val("");
            $("#date_shipping_comm_invoice_sailing").val("");
            $("#shipping_comm_invoice_invoice").val("");
            $("#date_shipping_comm_invoice_invoice").val("");
            $("#shipping_comm_invoice_LC").val("");
            $("#date_shipping_comm_invoice_LC").val("");
            $("#shipping_comm_invoice_bank").val("");
            $("#shipping_comm_invoice_term").val("");
            $("#shipping_comm_invoice_remark").val("");
            $("#shipping_comm_invoice_lastnotes").val("");
        }

        function clear_shippingcerorigin() {
            $("#shipping_certificate_OrderNo").val("");
            $("#shipping_certificate_OrderGubun").val("");
            $("#shipping_certificate_seller").val("");
            $("#shipping_certificate_consignee").val("");
            $("#shipping_certificate_particulars").val("");
            $("#shipping_certificate_remarks").val("");
            $("#shipping_certificate_marks").val("");
        }

        function clear_shippingrequest(data) {
            $("#shipping_request_OrderNo").val("");
            $("#shipping_request_OrderGubun").val("");
            $("#shipping_request_shipper").val("");
            $("#shipping_request_consingnee").val("");
            $("#shipping_request_Notify").val("");
            $("#shipping_request_Vessel").val("");
            $("#shipping_request_Loading").val("");
            $("#shipping_request_discharge").val("");
            $("#shipping_request_destination").val("");
            $("#date_shipping_request_date").val("");
            $("#shipping_request_shipcompany").val("");
            $("#date_shipping_request_sailing").val("");
            $("#date_shipping_request_job").val("");
            $("#shipping_request_factory").val("");
            $("#shipping_request_movement").val("");
            $("#date_shipping_request_sailday").val("");
            $("#date_shipping_request_BLsailday").val("");
            $("#shipping_request_sunim").val("");

            var user = data['user_name'];
            $("#shipping_request_damdang").val(user);
            $("#shipping_request_THC").val("");
            $("#shipping_request_remark").val("");
            $("#shipping_request_tel").val("");
            $("#shipping_request_fax").val("3271-3899");
        }



        function add_new_db_shippingdocs(data) {


            clear_shippingdocs();
            clear_shippingpackinglist();
            clear_shippingcominvoice();
            clear_shippingcerorigin();
            clear_shippingrequest(data);

            /////////////////////////////////////////////////////////////
            // no
            $("#shippingdocs_OrderNo").val(data['no']);
            $("#shippingdocs_OrderGubun").val(data['gubun']);

            $("#shipping_packing_list_OrderNo").val(data['no']);
            $("#shipping_packing_list_OrderGubun").val(data['gubun']);

            $("#shipping_comm_invoice_OrderNo").val(data['no']);
            $("#shipping_comm_invoice_OrderGubun").val(data['gubun']);

            $("#shipping_certificate_OrderNo").val(data['no']);
            $("#shipping_certificate_OrderGubun").val(data['gubun']);

            $("#shipping_request_OrderNo").val(data['no']);
            $("#shipping_request_OrderGubun").val(data['gubun']);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 1. invoice date
            var item_length = data['item123'].length;
            var invoicedatetext = '';
            if (item_length == 1) {
                invoicedatetext = data['no'] + 'A';
            } else if (item_length == 2) {
                invoicedatetext = data['no'] + 'A/B';
            } else if (item_length == 3) {
                invoicedatetext = data['no'] + 'A/B/C';
            }
            $("#shippingdocs_1").val(invoicedatetext);
            $("#date_shippingdocs_1").val(data['inv_ship']);

            // * packing list
            $("#shipping_packing_list_invoice").val(invoicedatetext);
            $("#date_shipping_packing_list_invoice").val(data['inv_ship']);
            // * invoice 
            $("#shipping_comm_invoice_invoice").val(invoicedatetext);
            $("#date_shipping_comm_invoice_invoice").val(data['inv_ship']);
            // * certificate 
            var cer1 = 'NO. DATE OF INVOICE : \n' + String(invoicedatetext) + ' ' + String(data['inv_ship']);
            $("#shipping_certificate_remarks").val(cer1);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 2. No date of L/C
            $("#shippingdocs_2").val(data['no']);
            $("#date_shippingdocs_2").val(data['orderdate']);

            // * invoice 
            $("#shipping_comm_invoice_LC").val(data['no']);
            $("#date_shipping_comm_invoice_LC").val(data['orderdate']);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 3 lc bank

            // * invoice 
            var var3 = $("#shippingdocs_3").val();
            $("#shipping_comm_invoice_bank").val(var3);

            /////////////////////////////////////////////////////////////
            // 4. Terms of delivery and payment      
            shippingdocs_4.addItem(data['term']);

            var dischargingdata = data['portofdisch'];

            // add shippingdocs_4
            let shipdoc4 = $("#shippingdocs_4").val();
            dischargingdata = shipdoc4 + ' ' + dischargingdata;

            var datapayment = data['datapayment'];
            var dataorderterm = data['dataorderterm'];
            var datadocument = data['datadocument'];
            var datapaymentfinal = '';
            if (dataorderterm == '') {

                datapaymentfinal = String(datapayment) + ' ' + String(dataorderterm);
            } else {
                datapaymentfinal = String(datapayment) + ' OF ' + String(dataorderterm) + ' DAYS FROM B/L DATE';
            }
            var termpayment = dischargingdata + '\n' + datapaymentfinal;
            $("#shippingdocs_4_text").val(termpayment);

            // * invoice 
            $("#shipping_comm_invoice_term").val(termpayment);

            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 5 shipper / exporter
            //var datado = 'DO BEST CO. LTD.\n#105-112, GONDDUCK-DONG MAPO-KU, SEOUL, KOREA\nT)82.2.3271.3800 F)3271.3899';      


            var datado = '';
            if (check_company == 'DB')
                datado = 'DO BEST CO. LTD.\n4F, 232 TOJEONG-RO, SEOUL, REPUBLIC OF KOREA\n#04091 T)82.2.3271.3800';
            else if (check_company == 'EI')
                datado = 'EIN Textile CO. LTD.\n4F, 232 TOJEONG-RO, SEOUL, REPUBLIC OF KOREA\n#04091 T)82.2.3271.3800';

            $("#shippingdocs_5").val(datado);
            // *packing list
            $("#shipping_packing_list_shipper").val(datado);
            // *commercial invoice 
            $("#shipping_comm_invoice_shipper").val(datado);
            // *certificate 
            $("#shipping_certificate_seller").val(datado);
            // *request
            $("#shipping_request_shipper").val(datado);
            /////////////////////////////////////////////////////////////


            /////////////////////////////////////////////////////////////
            // 6 for account risk of messrs

            var data1 = '';
            var data2 = '';
            var data3 = '';
            var data4 = '';
            if (data['buyer'].length >= 1) {
                if (data['buyer'][0].length >= 3)
                    data1 = data['buyer'][0][2];
                if (data['buyer'][0].length >= 4)
                    data2 = data['buyer'][0][3];
                if (data['buyer'][0].length >= 5)
                    data3 = data['buyer'][0][4];
                if (data['buyer'][0].length >= 6)
                    data4 = data['buyer'][0][5];
            }


            var datat = String(data1) + '\n' + String(data2) + '\n' + String(data3) + '\n' + String(data4);

            //console.log(data);

            datat = datat.replace(/nan/gi, "");
            if (data['buyer'].length)
                if (data['buyer'][0].length)
                    shippingdocs_6.addItem(data['buyer'][0][1]);
            $("#shippingdocs_6_text").val(datat);
            // * packing list
            $("#shipping_packing_list_account").val(datat);
            // * invoice 
            $("#shipping_comm_invoice_account").val(datat);
            /////////////////////////////////////////////////////////////

            ////////////////////////////////////////////////////////////
            // 7 consignee

            // * certificate
            var var7 = $("#shippingdocs_7").val();
            $("#shipping_certificate_consignee").val(var7);
            // request
            $("#shipping_request_consingnee").val(var7);
            ////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 8 notify party
            $("#shippingdocs_8").val(datat);

            // * packing list
            $("#shipping_packing_list_Notify").val(datat);
            // * invoice 
            $("#shipping_comm_invoice_Notify").val(datat);
            // * request
            $("#shipping_request_Notify").val(datat);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 10 port of loading
            var val10 = $("#shippingdocs_10").val();
            // * packing list
            $("#shipping_packing_list_Loading").val(val10);
            // * invoice 
            $("#shipping_comm_invoice_Loading").val(val10);
            // * certificate
            var cer10 = 'PORT OF LOADING : ' + val10;
            $("#shipping_certificate_particulars").val(cer10);
            // * request
            $("#shipping_request_Loading").val(val10);

            /////////////////////////////////////////////////////////////
            // 11 final destination
            var dischargingdata = data['portofdisch'];
            shippingdocs_11.addItem(dischargingdata);


            //console.log(data['select_dest']);
            if (data['select_dest'].length && data['select_dest'][0].length >= 3) {
                $("#shippingdocs_11_text").val(data['select_dest'][0][2]);
                // * pakcing list

                $("#shipping_packing_list_Destination").val(data['select_dest'][0][2]);
                // * invoice 

                $("#shipping_comm_invoice_Destination").val(data['select_dest'][0][2]);
                // * certificate
                cer10 = cer10 + '\n' + 'FINAL DESTINATION : ' + String(data['select_dest'][0][2]);
                $("#shipping_certificate_particulars").val(cer10);

                // * request
                $("#shipping_request_destination").val(data['select_dest'][0][2]);
            }

            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 12 vessel 
            if (data['data_ship_name']) {
                var datasplit = data['data_ship_name'].split(';');

                $("#shippingdocs_12").val(datasplit[5]);

                // *packing list
                $("#shipping_packing_list_Vessel").val(datasplit[5]);
                // *invoice 
                $("#shipping_comm_invoice_Vessel").val(datasplit[5]);
                // * certificate
                cer10 = cer10 + '\n' + 'VESSEL : ' + String(datasplit[5]);
                $("#shipping_certificate_particulars").val(cer10);

                // * request
                $("#shipping_request_Vessel").val(datasplit[5]);
            }

            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 13 sailing on or about
            if (data['actual_ship']) {
                $("#date_shippingdocs_13").val(data['actual_ship']);
                // *packing list
                $("#date_shipping_packing_list_sailing").val(data['actual_ship']);
                // * invoice 
                $("#date_shipping_comm_invoice_sailing").val(data['actual_ship']);
                // * certificate
                cer10 = cer10 + '\n' + 'ON BOARD : ' + String(data['actual_ship']);
                $("#shipping_certificate_particulars").val(cer10);

                // * request
                $("#date_shipping_request_sailing").val(data['actual_ship']);
            }

            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 14 remark
            var remark1 = '"The exporter of the products covered by this document (customs authorization No 010-14-200182(Head office)) Declares that, except where otherwise clearly indicated, These products are of "KR" preferential origin"\n';
            var remark2 = '                                               SEOUL     ';
            var remark3 = data['inv_ship'];
            var remark4 = '\n                           (Place   and    date)\n\n                     (Signature of the exporter)\n\n                           (Remarks)\n';

            var remarkt = remark1 + remark2 + remark3 + remark4;
            $("#shippingdocs_14_text").val(remarkt);

            // *invoice
            $("#shipping_comm_invoice_remark").val(remarkt);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 16 item       
            let strFmm = 'F ';
            if (data['item123'][0][0][1] == 'PSF' || data['item123'][0][0][1] == 'PSF REG' || data['item123'][0][0][1] == 'PP')
                strFmm = 'MM ';

            var item_length = data['item123'].length;

            var item_NM = 'NM';
            var item_empty = '';

            var lusteritem = data['luster'];


            let dsum = 0;
            let currentAmount = setReadyCalculation(data['item123'][0][3]) * setReadyCalculation(data['item123'][0][4]);
            dsum += Number(currentAmount);




            if (item_length) {
                console.log(data['item123'][0]);
                var item_line1 = '',
                    item_line2 = '',
                    item_line3 = '';
                if (data['item123'][0].length && data['item123'][0][0].length) item_line1 = data['item123'][0][0][2];
                if (data['item123'][0].length) item_line2 = String(data['item123'][0][1]) + 'D / ' + String(data['item123'][0][2]) + strFmm + String(lusteritem[0][2]);

                var item_line1_unit = '',
                    item_line1_price = '',
                    item_line1_amount = '';
                if (data['item123'][0].length) item_line1_unit = String(locale(data['item123'][0][3])) + String(' ') + String(data['item123'][0][6]);
                if (data['item123'][0].length) item_line1_price = String(data['item123'][0][7]) + String(data['item123'][0][4]) + String('/') + String(data['item123'][0][6]);
                if (data['item123'][0].length) item_line1_amount = String(data['item123'][0][7]) + String(locale(currentAmount));

                var item_total = String(item_NM.padEnd(28)) + String(item_line1.padEnd(37)) + String(item_line1_unit.padEnd(26)) + String(item_line1_price.padEnd(15)) + String(item_line1_amount.padEnd(1));
                item_total = item_total + '\n' + String(item_empty.padEnd(28)) + item_line2 + '\n' + String(item_empty.padEnd(28)) + item_line3;
            }


            if (item_length >= 2) {
                item_NM = '';
                if (data['item123'][1].length && data['item123'][1][0].length) item_line1 = data['item123'][1][0][2];
                if (data['item123'][1].length) item_line2 = String(data['item123'][1][1]) + 'D / ' + String(data['item123'][1][2]) + strFmm + String(lusteritem[0][2]);
                item_line3 = '';

                //item_line1_unit = String(parseFloat(data['item123'][1][3]).toLocaleString())+String(' KGS');
                //item_line1_price = String('U$')+String(data['item123'][1][4])+String(' /KG');
                //item_line1_amount = String('U$')+String(data['item123'][1][5]);
                currentAmount = setReadyCalculation(data['item123'][1][3]) * setReadyCalculation(data['item123'][1][4]);
                dsum += Number(currentAmount);


                var item_line1_unit = '',
                    item_line1_price = '',
                    item_line1_amount = '';
                if (data['item123'][1].length) item_line1_unit = String(locale(data['item123'][1][3])) + String(' ') + String(data['item123'][1][6]);
                if (data['item123'][1].length) item_line1_price = String(data['item123'][1][7]) + String(data['item123'][1][4]) + String('/') + String(data['item123'][1][6]);
                if (data['item123'][1].length) item_line1_amount = String(data['item123'][1][7]) + String(locale(currentAmount));

                item_total = item_total + '\n' + String(item_NM.padEnd(28)) + String(item_line1.padEnd(37)) + String(item_line1_unit.padEnd(26)) + String(item_line1_price.padEnd(15)) + String(item_line1_amount.padEnd(1));
                item_total = item_total + '\n' + String(item_empty.padEnd(28)) + item_line2 + '\n' + String(item_empty.padEnd(28)) + item_line3;

                if (item_length >= 3) {
                    item_NM = '';
                    if (data['item123'][2].length && data['item123'][2][0].length) item_line1 = data['item123'][2][0][2];
                    if (data['item123'][2].length) item_line2 = String(data['item123'][2][1]) + 'D / ' + String(data['item123'][2][2]) + strFmm + String(lusteritem[0][2]);
                    item_line3 = '';

                    //item_line1_unit = String(data['item123'][2][3].toLocaleString())+String(' KGS');
                    //item_line1_price = String('U$')+String(data['item123'][2][4])+String(' /KG');
                    //item_line1_amount = String('U$')+String(data['item123'][2][5]);
                    currentAmount = setReadyCalculation(data['item123'][2][3]) * setReadyCalculation(data['item123'][2][4]);
                    dsum += Number(currentAmount);


                    var item_line1_unit = '',
                        item_line1_price = '',
                        item_line1_amount = '';
                    if (data['item123'][2].length) item_line1_unit = String(locale(data['item123'][2][3])) + String(' ') + String(data['item123'][2][6]);
                    if (data['item123'][2].length) item_line1_price = String(data['item123'][2][7]) + String(data['item123'][2][4]) + String('/') + String(data['item123'][2][6]);
                    if (data['item123'][2].length) item_line1_amount = String(data['item123'][2][7]) + String(locale(currentAmount));


                    item_total = item_total + '\n' + String(item_NM.padEnd(28)) + String(item_line1.padEnd(37)) + String(item_line1_unit.padEnd(26)) + String(item_line1_price.padEnd(15)) + String(item_line1_amount.padEnd(1));
                    item_total = item_total + '\n' + String(item_empty.padEnd(28)) + item_line2 + '\n' + String(item_empty.padEnd(28)) + item_line3;
                }
            }

            var item_line = '----';
            item_line = item_line.padEnd(110, '-');
            item_total = item_total + '\n' + item_line;

            var q1 = data['item123'][0][3];
            q1 = setReadyCalculation(q1);
            var qt = parseFloat(q1);
            if (item_length >= 2) {
                var q2 = data['item123'][1][3];
                q2 = setReadyCalculation(q2);
                qt += parseFloat(q2);
            }
            if (item_length >= 3) {
                var q3 = data['item123'][2][3];
                q3 = setReadyCalculation(q3);
                qt += parseFloat(q3);
            }
            let spacestring = ' ';
            //item_total = item_total + '\n' + 'TOTAL ' + String(spacestring.padEnd(65)) + String(locale(qt) + ' ') + String(data['item123'][0][6]).padStart(70);
            item_total = item_total + '\n' + 'TOTAL ' + String(spacestring.padEnd(58)) + String(locale(qt) + ' ') + String(data['item123'][0][6]);

            var a1 = data['item123'][0][5];
            a1 = setReadyCalculation(a1);
            var amt = parseFloat(a1);
            if (item_length >= 2) {
                var a2 = data['item123'][1][5];
                a2 = setReadyCalculation(a2);
                amt += parseFloat(a2);
            }
            if (item_length >= 3) {
                var a3 = data['item123'][2][5];
                a3 = setReadyCalculation(a3);
                amt += parseFloat(a3);
            }
            item_total = item_total + String(data['item123'][0][7]).padStart(33) + String(locale(dsum));

            $("#shippingdocs_16").val(item_total);
            $("#shipping_comm_invoice_lastnotes").val(item_total);
            // * invoice 

            // end item
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // 17 item    

            var item_NM = 'NM';
            var item_empty = '';

            var item_lin1 = '',
                item_line2 = '',
                item_line3 = '';
            if (data['item123'].length && data['item123'][0].length >= 1 && data['item123'][0][0].length >= 1) item_line1 = data['item123'][0][0][2];
            if (data['item123'].length && data['item123'][0].length >= 1) item_line2 = String(data['item123'][0][1]) + 'D / ' + String(data['item123'][0][2]) + strFmm + String(lusteritem[0][2]);
            item_line3 = '';

            var item_line1_unit = '';
            if (data['item123'].length && data['item123'][0].length >= 4) item_line1_unit = String(locale(data['item123'][0][3])) + String(' ') + String(data['item123'][0][6]);

            var NetG1 = '',
                NetG2 = '',
                NetG3 = '';
            if (data['item123'].length && data['item123'][0].length >= 4) NetG1 = parseFloat(setReadyCalculation(data['item123'][0][3])) + parseFloat(setReadyCalculation(data['item123'][0][3])) * 0.1;
            var item_line1_price = '';
            //if (data['item123'].length && data['item123'][0].length >= 6) item_line1_price = String(locale(NetG1)) + String(' ') + String(data['item123'][0][6]);
            var item_line1_amount = '';

            //var item_total = String(item_NM.padEnd(28)) + String(item_line1.padEnd(37)) + String(item_line1_unit.padEnd(26)) + String(item_line1_price.padEnd(20)) + String(item_line1_amount.padEnd(1));
            var item_total = String(item_NM.padEnd(28)) + String(item_line1.padEnd(37)) + String(item_line1_unit.padEnd(26));
            item_total = item_total + '\n' + String(item_empty.padEnd(28)) + item_line2 + '\n' + String(item_empty.padEnd(28)) + item_line3;

            if (item_length >= 2) {
                item_NM = '';
                if (data['item123'].length >= 2 && data['item123'][1].length >= 1 && data['item123'][1][0].length >= 3) item_line1 = data['item123'][1][0][2];
                if (data['item123'].length >= 2 && data['item123'][1].length >= 3) item_line2 = String(data['item123'][1][1]) + 'D / ' + String(data['item123'][1][2]) + strFmm + String(lusteritem[0][2]);
                item_line3 = '';

                if (data['item123'].length >= 2 && data['item123'][1].length >= 4) item_line1_unit = String(locale(data['item123'][1][3])) + String(' ') + String(data['item123'][1][6]);
                if (data['item123'].length >= 2 && data['item123'][1].length >= 4) NetG2 = parseFloat(data['item123'][1][3]) + parseFloat(data['item123'][1][3]) * 0.1;
                //item_line1_price = String(locale(NetG2)) + String(' ') + String(data['item123'][1][6]);
                item_line1_amount = '';

                //item_total = item_total + '\n' + String(item_NM.padEnd(28)) + String(item_line1.padEnd(37)) + String(item_line1_unit.padEnd(26)) + String(item_line1_price.padEnd(20)) + String(item_line1_amount.padEnd(1));
                item_total = item_total + '\n' + String(item_NM.padEnd(28)) + String(item_line1.padEnd(37)) + String(item_line1_unit.padEnd(26));
                item_total = item_total + '\n' + String(item_empty.padEnd(28)) + item_line2 + '\n' + String(item_empty.padEnd(28)) + item_line3;

                if (item_length >= 3) {
                    item_NM = '';

                    if (data['item123'].length >= 3 && data['item123'][1].length >= 1 && data['item123'][2][0].length >= 3) item_line1 = data['item123'][2][0][2];
                    if (data['item123'].length >= 3 && data['item123'][1].length >= 3) item_line2 = String(data['item123'][2][1]) + 'D / ' + String(data['item123'][2][2]) + strFmm + String(lusteritem[0][2]);
                    item_line3 = '';

                    //item_line1_unit = String(data['item123'][2][3].toLocaleString())+String(' KGS');
                    //NetG3 = parseFloat(data['item123'][2][3])+parseFloat(data['item123'][2][3])*0.1;
                    //item_line1_price = String(NetG3.toLocaleString())+String(' KGS');          
                    if (data['item123'].length >= 3 && data['item123'][1].length >= 4) item_line1_unit = String(locale(data['item123'][2][3])) + String(' ') + String(data['item123'][2][6]);
                    if (data['item123'].length >= 3 && data['item123'][1].length >= 4) NetG3 = parseFloat(data['item123'][2][3]) + parseFloat(data['item123'][2][3]) * 0.1;
                    if (data['item123'].length >= 3 && data['item123'][1].length >= 7) item_line1_price = String(locale(NetG3)) + String(' ') + String(data['item123'][2][6]);
                    if (data['item123'].length >= 3 && data['item123'][1].length >= 8) item_line1_amount = String(data['item123'][2][7]) + String(' ') + String(data['item123'][2][5]);


                    //item_total = item_total + '\n' + String(item_NM.padEnd(28)) + String(item_line1.padEnd(37)) + String(item_line1_unit.padEnd(26)) + String(item_line1_price.padEnd(20)) + String(item_line1_amount.padEnd(1));
                    item_total = item_total + '\n' + String(item_NM.padEnd(28)) + String(item_line1.padEnd(37)) + String(item_line1_unit.padEnd(26));
                    item_total = item_total + '\n' + String(item_empty.padEnd(28)) + item_line2 + '\n' + String(item_empty.padEnd(28)) + item_line3;
                }
            }

            var item_line = '----';
            item_line = item_line.padEnd(120, '-');
            //item_total = item_total + '\n' + item_line;

            var q1 = data['item123'][0][3];
            q1 = setReadyCalculation(q1);
            var qt = parseFloat(q1);
            if (item_length >= 2) {
                var q2 = data['item123'][1][3];
                q2 = setReadyCalculation(q2);
                qt += parseFloat(q2);
            }
            if (item_length >= 3) {
                var q3 = data['item123'][2][3];
                q3 = setReadyCalculation(q3);
                qt += parseFloat(q3);
            }
            var strpallet = 'PALLELT';
            var strinvoice = 'INVOICE NO. ' + invoicedatetext;
            //item_total = item_total + '\n' + strpallet.padEnd(28) + strinvoice.padEnd(37) + String(locale(qt) + ' ') + String(data['item123'][0][6]).padEnd(20);


            var amt = parseFloat(NetG1);
            if (item_length >= 2) {
                amt += parseFloat(NetG2);
            }
            if (item_length >= 3) {
                amt += parseFloat(NetG3);
            }

            var strMeasure = 'CBM';
            //item_total = item_total + (String(locale(amt)) + String(' ') + String(data['item123'][0][6])).padEnd(20) + strMeasure.padEnd(1);


            $("#shippingdocs_17").val(item_total);

            // * packing list
            $("#shipping_packing_list_goods").val(item_total);
            // * certificate 
            $("#shipping_certificate_marks").val(item_total);
            // * request      
            $("#shipping_request_goods").val(item_total);
            // end item
            /////////////////////////////////////////////////////////////   

            /////////////////////////////////////////////////////////////
            // 18
            //var datasplit = data['data_ship_name'].split(';');
            var arr58 = [];
            length = 8;
            length2 = (data['data_ship_name'].match(/;/g) || []).length;

            length3 = length2 / length;
            startindex = 0;



            for (var i = 0; i < length2; i++) {
                var beforestart = startindex;
                startindex = data['data_ship_name'].indexOf(";", startindex);
                var item;
                item = data['data_ship_name'].slice(beforestart, startindex);
                startindex++;
                console.log(item);
                arr58.push(item);
            }
            // * request
            $("#date_shipping_request_job").val(arr58[2]);
            var req18 = item_total + '\n\n' + 'Cont NO: ' + String(arr58[0]) + '\n' + 'FREIGHT PREPAID';
            $("#shipping_request_goods").val(req18);

            for (var i = 0; i < length3; i++) {
                if (i == 0) {
                    $("#shippingdocs_container0").val(arr58[i]);
                    $("#shippingdocs_lotNo0").val(arr58[i + 1]);
                    $("#shippingdocs_date_chul0").val(arr58[i + 2]);
                    $("#shippingdocs_amount0").val(arr58[i + 3]);
                    $("#shippingdocs_company0").val(arr58[i + 4]);
                    $("#shippingdocs_name0").val(arr58[i + 5]);
                    $("#shippingdocs_size0").val(arr58[i + 6]);
                    $("#shippingdocs_forward0").val(arr58[i + 7]);
                    continue;
                }
                c = '';
                c += '<tr>';
                c += '<td><input class="w3-input w3-border ht_25" type="text" id="shippingdocs_container' + (i) + '" placeholder="Enter text">';
                c += '</td>';
                c += '<td><input class="w3-input w3-border ht_25" type="text" id="shippingdocs_lotNo' + (i) + '" placeholder="Enter text">';
                c += '</td>';
                c += '<td><input class="w3-input w3-border ht_25" type="text" id="shippingdocs_date_chul' + (i) + '" placeholder="Enter text">';
                c += '</td>';
                c += '<td><input class="w3-input w3-border ht_25" type="text" id="shippingdocs_amount' + (i) + '" placeholder="Enter text">';
                c += '</td>';
                c += '<td><input class="w3-input w3-border ht_25" type="text" id="shippingdocs_company' + (i) + '" placeholder="Enter text">';
                c += '</td>';
                c += '<td><input class="w3-input w3-border ht_25" type="text" id="shippingdocs_name' + (i) + '" placeholder="Enter text">';
                c += '</td>';
                c += '<td><input class="w3-input w3-border ht_25" type="text" id="shippingdocs_size' + (i) + '" placeholder="Enter text">';
                c += '</td>';
                c += '<td><input class="w3-input w3-border ht_25" type="text" id="shippingdocs_forward' + (i) + '" placeholder="Enter text">';
                c += '</td>';
                c += '</tr>';
                c += '<script> $( function() { $( "#shippingdocs_date_chul' + (i) + '" ).datepicker({changeMonth: true,changeYear: true,dateFormat: "yy-mm-dd"}); }); <\/script>';
                $('#shippingdocs_tableSPL > tbody:last').append(c);

                var c1 = 'shippingdocs_container' + String(i);
                eval(c1).value = arr58[0 + i * length];
                c1 = 'shippingdocs_lotNo' + String(i);
                eval(c1).value = arr58[1 + i * length];
                c1 = 'shippingdocs_date_chul' + String(i);
                eval(c1).value = arr58[2 + i * length];
                c1 = 'shippingdocs_amount' + String(i);
                eval(c1).value = arr58[3 + i * length];
                c1 = 'shippingdocs_company' + String(i);
                eval(c1).value = arr58[4 + i * length];
                c1 = 'shippingdocs_name' + String(i);
                eval(c1).value = arr58[5 + i * length];
                c1 = 'shippingdocs_size' + String(i);
                eval(c1).value = arr58[6 + i * length];
                c1 = 'shippingdocs_forward' + String(i);
                eval(c1).value = arr58[7 + i * length];
            }


            // check alldata_ship      

            inputparam = [];
            inputparam.push(String(data['no'] + data['gubun']));
            //inputparam.push(data['gubun']);

            $.ajax({
                type: "POST",
                url: "{{ url_for('get_shipping_db') }}",
                contentType: "application/json;",
                data: JSON.stringify(inputparam),

                success: function(out) {
                    if (out['msg'] == 'Fail to read data')
                        return;
                    var vorder = out['data'][0][0];
                    var vgubun = out['data'][0][1];
                    var vdoc_1 = out['data'][0][2];
                    var vdate_doc_1 = out['data'][0][3];
                    var vdoc_2 = out['data'][0][4];
                    var vdate_doc_2 = out['data'][0][5];
                    var vdoc_3 = out['data'][0][6];
                    var vdoc_4 = out['data'][0][7];
                    var vdoc_5 = out['data'][0][8];
                    var vdoc_6 = out['data'][0][9];
                    var vdoc_7 = out['data'][0][10];
                    var vdoc_8 = out['data'][0][11];
                    var vdoc_10 = out['data'][0][12];
                    var vdoc_11 = out['data'][0][13];
                    var vdoc_12 = out['data'][0][14];
                    var vdate_doc_13 = out['data'][0][15];
                    var vdoc_14 = out['data'][0][16];
                    var vdoc_15 = out['data'][0][17];
                    var vdoc_16 = out['data'][0][18];
                    var vdoc_17 = out['data'][0][19];
                    var vdate_request = out['data'][0][20];
                    var vshipcompany = out['data'][0][21];
                    var vdate_sailing = out['data'][0][22];
                    var vdate_job = out['data'][0][23];
                    var vfactory = out['data'][0][24];
                    var vmovement = out['data'][0][25];
                    var vdate_sailday = out['data'][0][26];
                    var vdate_BLsailday = out['data'][0][27];
                    var vsunim = out['data'][0][28];
                    var vdamdang = out['data'][0][29];
                    var vTHC = out['data'][0][30];
                    var vremark = out['data'][0][31];
                    var vtel = out['data'][0][32];
                    var vfax = out['data'][0][33];

                    //vdoc_1 = vdoc_1.replace(/nan/gi,"");            
                    //console.log(out['data'][0]);
                    $('#shippingdocs_1').val(vdoc_1);
                    $('#shippingdocs_1').change();
                    $('#date_shippingdocs_1').val(vdate_doc_1);
                    $('#date_shippingdocs_1').change();
                    $('#shippingdocs_2').val(vdoc_2);
                    $('#shippingdocs_2').change();
                    $('#date_shippingdocs_2').val(vdate_doc_2);
                    $('#date_shippingdocs_2').change();
                    $('#shippingdocs_3').val(vdoc_3);
                    $('#shippingdocs_3').change();
                    $('#shippingdocs_4_text').val(vdoc_4);
                    $('#shippingdocs_4_text').change();
                    $('#shippingdocs_5').val(vdoc_5);
                    $('#shippingdocs_5').change();
                    $('#shippingdocs_6_text').val(vdoc_6);
                    $('#shippingdocs_6_text').change();
                    $('#shippingdocs_7').val(vdoc_7);
                    $('#shippingdocs_7').change();
                    $('#shippingdocs_8').val(vdoc_8);
                    $('#shippingdocs_8').change();
                    $('#shippingdocs_10').val(vdoc_10);
                    $('#shippingdocs_10').change();
                    $('#shippingdocs_11_text').val(vdoc_11);
                    $('#shippingdocs_11_text').change();
                    $('#shippingdocs_12').val(vdoc_12);
                    $('#shippingdocs_12').change();
                    $('#date_shippingdocs_13').val(vdate_doc_13);
                    $('#date_shippingdocs_13').change();
                    $('#shippingdocs_14_text').val(vdoc_14);
                    $('#shippingdocs_14_text').change();
                    $('#shippingdocs_15_text').val(vdoc_15);
                    $('#shippingdocs_15_text').change();
                    $('#shippingdocs_16').val(vdoc_16);
                    $('#shippingdocs_16').change();
                    $('#shippingdocs_17').val(vdoc_17);
                    $('#shippingdocs_17').change();

                    /////////////////////////////////////////////////
                    // shipping request
                    $("#date_shipping_request_date").val(vdate_request);
                    $("#shipping_request_shipcompany").val(vshipcompany);
                    $("#date_shipping_request_sailing").val(vdate_sailing);
                    $("#date_shipping_request_job").val(vdate_job);
                    $("#shipping_request_factory").val(vfactory);
                    $("#shipping_request_movement").val(vmovement);
                    $("#date_shipping_request_sailday").val(vdate_sailday);
                    $("#date_shipping_request_BLsailday").val(vdate_BLsailday);
                    $("#shipping_request_sunim").val(vsunim);
                    $("#shipping_request_damdang").val(vdamdang);
                    $("#shipping_request_THC").val(vTHC);
                    $("#shipping_request_remark").val(vremark);
                    $("#shipping_request_tel").val(vtel);
                    $("#shipping_request_fax").val(vfax);

                    alert('Success in Reading of Saved DB');
                },
                error: function(out) {
                    alert("Please check..");
                }
            }); //end of ajax  
        }

        function add_old_db_shippingdocs(data) {

        }

        function clear_deliveryorder() {
            $("#delivery_order_OrderNo").val("");
            $("#delivery_order_OrderGubun").val("");
            $("#delivery_order_to").val("");
            $("#delivery_order_from").val("");
            $("#date_delivery_order_date").val("");
            $("#delivery_order_buyer").val("");
            $("#delivery_order_final_destination").val("");
            $("#delivery_order_item_1").val("");
            $("#delivery_order_item_2").val("");
            $("#delivery_order_item_3").val("");
            $("#delivery_order_item_4").val("NET:      KGS/\nGROSS:    KGS/");
            $("#delivery_order_shipping").val("");
            $("#delivery_order_packing").val("");
            $("#delivery_order_company_sel").val("");
            $("#delivery_order_forwarding_sel").val("");
            $("#delivery_order_booking").val("");
            $("#delivery_order_vessel").val("");
            $("#delivery_order_cont_sel").val("");
            $("#delivery_order_tel").val("");
            $("#delivery_order_damdang").val("");
            $("#delivery_order_customer").val("");
            $("#delivery_order_closing_doc_date").val("");
            $("#delivery_order_closing_doc").val("");
            $("#delivery_order_closing_cont_date").val("");
            $("#delivery_order_closing_cont").val("");
            $("#delivery_order_etd").val("");
            $("#delivery_order_eta").val("");
            $("#delivery_order_deliveryplace").val("");
            $("#delivery_order_localtrucking").val("");
        }

        function add_new_db_deliveryorder(data) {
            clear_deliveryorder();

            /////////////////////////////////////////////////////////////
            // no
            $("#delivery_order_OrderNo").val(data['no']);
            $("#delivery_order_OrderGubun").val(data['gubun']);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // TO      
            console.log(data['supplyname']);
            $("#delivery_order_to").val(data['supplyname']);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // FROM
            $("#delivery_order_from").val(data['user_name']);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // DATE// 현재 날짜 
            $("#delivery_order_from").datepicker('setDate', 'today'); // 초기화            
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // BUYER
            var data1 = data['buyer'][0][2];
            var data2 = data['buyer'][0][3];
            var data3 = data['buyer'][0][4];
            var data4 = data['buyer'][0][5];
            var datat = String(data1);
            $("#delivery_order_buyer").val(datat);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // BUYER
            var datades = data['select_dest'][0][2]
            $("#delivery_order_final_destination").val(datades);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // ITEM
            var item_length = data['item123'].length;

            var lusteritem = data['luster'];

            var item_line1 = data['item123'][0][0][2] + ' ';
            var item_line2 = String(data['item123'][0][1]) + 'D / ' + String(data['item123'][0][2]) + strFmm + String(lusteritem[0][2]);
            var item_total = String(item_line1) + String(item_line2);

            $("#delivery_order_item_1").val(item_total);
            /////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////
            // QTY
            var qtydata = data['item123'][0][3];
            $("#delivery_order_item_2").val(qtydata);
            /////////////////////////////////////////////////////////////




            /////////////////////////////////////////////////////////////
            // check alldata_deliveryorder
            inputparam = [];
            inputparam.push(String(data['no'] + data['gubun']));

            $.ajax({
                type: "POST",
                url: "{{ url_for('get_delivery_order_db') }}",
                contentType: "application/json;",
                data: JSON.stringify(inputparam),

                success: function(out) {
                    if (out['msg'] == 'Fail to read data')
                        return;
                    var vorder = out['data'][0][0];
                    var vgubun = out['data'][0][1];
                    var vto = out['data'][0][2];
                    var vfrom = out['data'][0][3];
                    var vdate_order = out['data'][0][4];
                    var vbuyer = out['data'][0][5];
                    var vdestination = out['data'][0][6];
                    var vitem1 = out['data'][0][7];
                    var vitem2 = out['data'][0][8];
                    var vitem3 = out['data'][0][9];
                    var vitem4 = out['data'][0][10];
                    var vdate_container = out['data'][0][11];
                    var vshipping = out['data'][0][12];
                    var vpacking = out['data'][0][13];
                    var vcompany = out['data'][0][14];
                    var vforwarding = out['data'][0][15];
                    var vbooking = out['data'][0][16];
                    var vvessel = out['data'][0][17];
                    var vcont_sel = out['data'][0][18];
                    var vtel = out['data'][0][19];
                    var vdamdang = out['data'][0][20];
                    var vcustomer = out['data'][0][21];
                    var vclosing_doc_date = out['data'][0][22];
                    var vclosing_doc = out['data'][0][23];
                    var vclosing_cont_date = out['data'][0][24];
                    var vclosing_cont = out['data'][0][25];
                    var vetd = out['data'][0][26];
                    var veta = out['data'][0][27];
                    var vplace = out['data'][0][28];
                    var vlocaltrucking = out['data'][0][29];

                    //vdoc_1 = vdoc_1.replace(/nan/gi,"");            
                    //console.log(out['data'][0]);
                    $('#delivery_order_to').val(vto);
                    $('#delivery_order_from').val(vgubun);
                    $('#date_delivery_order_date').val(vdate_order);
                    $('#delivery_order_buyer').val(vbuyer);
                    $("#delivery_order_final_destination").val(vdestination);
                    $("#delivery_order_item_1").val(vitem1);
                    $("#delivery_order_item_2").val(vitem2);
                    $("#delivery_order_item_3").val(vitem3);
                    $("#delivery_order_item_4").val(vitem4);
                    $("#date_delivery_order_container").val(vdate_container);
                    $("#delivery_order_shipping").val(vshipping);
                    $("#delivery_order_packing").val(vpacking);
                    delivery_order_company_sel.addItem(vcompany);
                    delivery_order_forwarding_sel.addItem(vforwarding);
                    $("#delivery_order_booking").val(vbooking);
                    $("#delivery_order_vessel").val(vvessel);
                    delivery_order_cont_sel.addItem(vcont_sel);
                    $("#delivery_order_tel").val(vtel);
                    $("#delivery_order_damdang").val(vdamdang);
                    $("#delivery_order_customer").val(vcustomer);
                    $("#delivery_order_closing_doc_date").val(vclosing_doc_date);
                    $("#delivery_order_closing_doc").val(vclosing_doc);
                    $("#delivery_order_closing_cont_date").val(vclosing_cont_date);
                    $("#delivery_order_closing_cont").val(vclosing_cont);
                    $("#delivery_order_etd").val(vetd);
                    $("#delivery_order_eta").val(veta);
                    delivery_order_deliveryplace.addItem(vplace);
                    delivery_order_localtrucking.addItem(vlocaltrucking);


                    alert('Success in Reading of Saved DB');
                },
                error: function(out) {
                    alert("Please check..");
                }
            }); //end of ajax  
        }

        function add_old_db_deliveryorder(data) {

        }

        function add_item_selectize(item, data) {
            item.setValue(-1, false);
            item.addItem(data);
        }

        /* 19.11.26 -------------------------  */
        function add_orderInput(data) {

            $('#OrderNo').empty();
            $('#OrderGubun').empty();
            $('#order_LC').empty();
            $('#order_DN').empty();
            $('#order_LF').empty();
            $('#order_remark').empty();
            $('#order_quantity').empty();
            $('#order_dollor').empty();
            $('#nego_won').empty();
            $('#ship_name0').empty();
            $('#local_jukwha').empty();
            $('#local_jukwha2').empty();
            $('#local_su').empty();
            $('#local_su2').empty();
            $('#local_u').empty();
            $('#local_u2').empty();
            $('#local_comm').empty();
            $('#local_comm2').empty();
            $('#local_actual').empty();
            $('#local_actual2').empty();

            $('#nego_m1').empty();
            $('#nego_m3').empty();
            $('#nego_m4').empty();
            $('#nego_ref').empty();
            $('#nego_etc').empty();
            $('#ship_container0').empty();
            $('#ship_BL').empty();

            $('#order_prc').empty();
            $('#order_table_fob_0').empty();
            $('#order_term').empty();

            $('#order_table_com1').empty();
            $('#order_table_com1_amount').empty();

            $('#nego_hwanga').empty();
            $('#order_before_order').empty();
            $('#order_expect_price').empty();
            $('#ship_lotNo0').empty();
            $('#nego_InvNo').empty();
            $('#nego_quantity').empty();
            $('#nego_uwon').empty();

            $('#nego_deposit_amount0').empty();
            $('#nego_deposit_content0').empty();
            $('#nego_incomplete_value').empty();


            $('#BillInvoice1').empty();
            $('#BillInvoice2').empty();
            $('#BillInvoice3').empty();
            $('#BillInvoice4').empty();
            $('#BillMoneyInvoice1').empty();
            $('#BillMoneyInvoice2').empty();
            $('#BillMoneyInvoice3').empty();
            $('#BillMoneyInvoice4').empty();
            $('#BillDollorInvoice1').empty();
            $('#BillDollorInvoice2').empty();
            $('#BillDollorInvoice3').empty();
            $('#BillDollorInvoice4').empty();

            $('#order_com1').empty();
            $('#order_com1_amount').empty();

            $('#nego_etc_dollor').empty();

            $('#nego_com1_rate').empty();
            $('#nego_com2_rate').empty();
            $('#nego_com1_amount').empty();
            $('#nego_com2_amount').empty();

            $('#local_actual').empty();
            $('#local_actual2').empty();


            cInvNo = data['order_InvNo'][0];
            cLC = data['order_LC'][0];
            cDN = data['order_DN'][0];
            cLF = data['order_LF'][0];
            cRemark = data['order_remark'][0];
            cQuantity = data['order_quantity'][0];
            cDollor = data['order_dollor'][0];
            cNegoWon = data['nego_won'][0];
            cShipName = data['ship_name'][0];
            cJukwha = data['local_juk'][0];
            cJukwha2 = data['local_juk2'][0];
            csudollor = data['local_sudollor'][0];
            csuwon = data['local_suwon'][0];
            cudollor = data['local_udollor'][0];
            cuwon = data['local_uwon'][0];
            cComm = data['local_comm'][0];
            cComm2 = data['local_comm2'][0];
            cActual = data['local_actual'][0];
            cActual2 = data['local_actual2'][0];
            cNego_m1 = data['nego_m1'][0];
            cNego_m3 = data['nego_m3'][0];
            cNego_m4 = data['nego_m4'][0];
            cNego_ref = data['nego_ref'][0];
            cNego_etc = data['nego_etc'][0];
            cShip_conNo = data['ship_container'][0];
            cShip_BL = data['ship_BL'][0];
            cOrder_prc = data['order_prc'][0];

            //2020.07.22
            cOrder_prc = setReadyCalculation(String(cOrder_prc));
            cDollor = setReadyCalculation(String(cDollor));
            cNegoWon = setReadyCalculation(String(cNegoWon));
            cJukwha = setReadyCalculation(String(cJukwha));
            cJukwha2 = setReadyCalculation(String(cJukwha2));
            csudollor = setReadyCalculation(String(csudollor));
            csuwon = setReadyCalculation(String(csuwon));
            cudollor = setReadyCalculation(String(cudollor));
            cuwon = setReadyCalculation(String(cuwon));
            cComm = setReadyCalculation(String(cComm));
            cComm2 = setReadyCalculation(String(cComm2));
            cActual = setReadyCalculation(String(cActual));
            cActual2 = setReadyCalculation(String(cActual2));


            corder_table_fob = data['order_table_fob'][0];
            corder_term = data['order_term'][0];

            corder_table_com1 = data['order_com1'][0];
            corder_table_com1_amount = data['order_com1_amount'][0];

            corder_table_com2 = data['order_com2'][0];
            corder_table_com2_amount = data['order_com2_amount'][0];

            corder_table_com3 = data['order_com3'][0];
            corder_table_com3_amount = data['order_com3_amount'][0];

            corder_table_com4 = data['order_com4'][0];
            corder_table_com4_amount = data['order_com4_amount'][0];

            cnego_hwanga = data['nego_hwanga'][0];
            corder_before_order = data['order_before_order'][0];
            corder_expect_price = data['order_expect_price'][0];
            cship_lotNo = data['ship_lotNo'][0];



            cnego_deposit_amount1 = data['nego_deposit_amount1'][0];
            cnego_deposit_amount2 = data['nego_deposit_amount2'][0];
            cnego_deposit_amount3 = data['nego_deposit_amount3'][0];
            cnego_deposit_amount4 = data['nego_deposit_amount4'][0];
            cnego_deposit_amount5 = data['nego_deposit_amount5'][0];

            cnego_incomplete_value = data['LessDollor'][0];


            cBillInvoice1 = data['BillInvoice1'][0];
            cBillInvoice2 = data['BillInvoice2'][0];
            cBillInvoice3 = data['BillInvoice3'][0];
            cBillInvoice4 = data['BillInvoice4'][0];
            cBillMoneyInvoice1 = data['BillMoneyInvoice1'][0];
            cBillMoneyInvoice2 = data['BillMoneyInvoice2'][0];
            cBillMoneyInvoice3 = data['BillMoneyInvoice3'][0];
            cBillMoneyInvoice4 = data['BillMoneyInvoice4'][0];
            cBillDollorInvoice1 = data['BillDollorInvoice1'][0];
            cBillDollorInvoice2 = data['BillDollorInvoice2'][0];
            cBillDollorInvoice3 = data['BillDollorInvoice3'][0];
            cBillDollorInvoice4 = data['BillDollorInvoice4'][0];

            corder_com1 = data['order_com1'][0];
            corder_com2 = data['order_com2'][0];
            corder_com3 = data['order_com3'][0];
            corder_com4 = data['order_com4'][0];

            corder_com1_amount = data['order_com1_amount'][0];
            corder_com2_amount = data['order_com2_amount'][0];
            corder_com3_amount = data['order_com3_amount'][0];
            corder_com4_amount = data['order_com4_amount'][0];

            ////////////////////////////////////
            // table
            for (var index = 0; index < 5; index++) {
                addTable_nego_i = 0;
                $('#table_nego > tbody:last > tr:last').remove();
            }

            if (cnego_deposit_amount2 != '') {
                addTable_nego_i = 1;
            }
            if (cnego_deposit_amount3 != '') {
                addTable_nego_i = 2;
            }
            if (cnego_deposit_amount4 != '') {
                addTable_nego_i = 3;
            }
            if (cnego_deposit_amount5 != '') {
                addTable_nego_i = 4;
            }

            for (var i = 1; i <= addTable_nego_i; i++) {
                c = '';
                c += '<tr>';
                c += '<td><input type="text" id="nego_deposit_date' + i + '" class="w3-input ht_25" placeholder="Select date">';
                c += '</td>';
                c += '<td><input class="w3-input w3-border ht_25" id="nego_deposit_amount' + i + '" type="text" placeholder="Enter text">';
                c += '</td>';
                c += '<td><input class="w3-input w3-border ht_25" id="nego_deposit_content' + i + '" type="text" placeholder="Enter text">';
                c += '</td>';
                c += '</tr>';
                c += '<script>$( "#nego_deposit_date' + i + '" ).datepicker({changeMonth: true,changeYear: true,dateFormat: "yy-mm-dd"});<\/script>';

                $('#table_nego > tbody:last').append(c);

                table_amount = 'nego_deposit_amount' + String(i);

                var content = '';
                if (i == 1) {
                    content = cnego_deposit_amount2;
                } else if (i == 2) {
                    content = cnego_deposit_amount3;
                } else if (i == 3) {
                    content = cnego_deposit_amount4;
                } else if (i == 4) {
                    content = cnego_deposit_amount5;
                }
                if (content != '')
                    document.getElementById(table_amount).value = content;
            }
            // end table
            ////////////////////////////////////////////////////////

            // toLocale
            if (cQuantity != '') {
                cQuantity = parseFloat(cQuantity).toLocaleString();

            }
            if (cDollor != '')
                cDollor = parseFloat(cDollor).toLocaleString();
            if (cNegoWon != '')
                cNegoWon = parseFloat(cNegoWon).toLocaleString();
            if (cJukwha != '')
                cJukwha = parseFloat(cJukwha).toLocaleString();
            if (cJukwha2 != '')
                cJukwha2 = parseFloat(cJukwha2).toLocaleString();

            if (csudollor != '') {

                csudollor = parseFloat(csudollor).toLocaleString();
            }
            if (csuwon != '')
                csuwon = parseFloat(csuwon).toLocaleString();
            if (cudollor != '')
                cudollor = parseFloat(cudollor).toLocaleString();
            if (cuwon != '')
                cuwon = parseFloat(cuwon).toLocaleString();

            if (cComm != '')
                cComm = parseFloat(cComm).toLocaleString();
            if (cComm2 != '')
                cComm2 = parseFloat(cComm2).toLocaleString();
            if (cActual != '')
                cActual = parseFloat(cActual).toLocaleString();
            if (cActual2 != '')
                cActual2 = parseFloat(cActual2).toLocaleString();

            if (cNego_m3 != '')
                cNego_m3 = parseFloat(cNego_m3).toLocaleString();
            if (cNego_m4 != '')
                cNego_m4 = parseFloat(cNego_m4).toLocaleString();
            if (cNego_etc != '')
                cNego_etc = parseFloat(cNego_etc).toLocaleString();
            if (cnego_deposit_amount1 != '')
                cnego_deposit_amount1 = parseFloat(cnego_deposit_amount1).toLocaleString();

            if (cnego_incomplete_value != '')
                cnego_incomplete_value = parseFloat(cnego_incomplete_value).toLocaleString();



            if (cBillInvoice1 != '')
                cBillInvoice1 = parseFloat(cBillInvoice1).toLocaleString();
            if (cBillInvoice2 != '')
                cBillInvoice2 = parseFloat(cBillInvoice2).toLocaleString();
            if (cBillInvoice3 != '')
                cBillInvoice3 = parseFloat(cBillInvoice3).toLocaleString();
            if (cBillInvoice4 != '')
                cBillInvoice4 = parseFloat(cBillInvoice4).toLocaleString();

            if (cBillMoneyInvoice1 != '')
                cBillMoneyInvoice1 = parseFloat(cBillMoneyInvoice1).toLocaleString();
            if (cBillMoneyInvoice2 != '')
                cBillMoneyInvoice2 = parseFloat(cBillMoneyInvoice2).toLocaleString();
            if (cBillMoneyInvoice3 != '')
                cBillMoneyInvoice3 = parseFloat(cBillMoneyInvoice3).toLocaleString();
            if (cBillMoneyInvoice4 != '')
                cBillMoneyInvoice4 = parseFloat(cBillMoneyInvoice4).toLocaleString();

            if (cBillDollorInvoice1 != '')
                cBillDollorInvoice1 = parseFloat(cBillDollorInvoice1).toLocaleString();
            if (cBillDollorInvoice2 != '')
                cBillDollorInvoice2 = parseFloat(cBillDollorInvoice2).toLocaleString();
            if (cBillDollorInvoice3 != '')
                cBillDollorInvoice3 = parseFloat(cBillDollorInvoice3).toLocaleString();
            if (cBillDollorInvoice4 != '')
                cBillDollorInvoice4 = parseFloat(cBillDollorInvoice4).toLocaleString();

            if (corder_com1_amount != '')
                corder_com1_amount = parseFloat(corder_com1_amount).toLocaleString();
            if (corder_com2_amount != '') {
                corder_com2_amount = parseFloat(corder_com2_amount).toLocaleString();
            }
            if (corder_com3_amount != '')
                corder_com3_amount = parseFloat(corder_com3_amount).toLocaleString();
            if (corder_com4_amount != '')
                corder_com4_amount = parseFloat(corder_com4_amount).toLocaleString();


            //////////////////////////////////////////////////////
            var s1 = cInvNo;
            var s2 = String(s1).substring(0, 7);
            var s3 = String(s1).slice(7, 8);


            $('#OrderNo').val(s2);
            //console.log('#OrderNo tet',s2);

            $('#OrderGubun').val(s3);
            $('#order_LC').val(cLC);
            if (cDN != '')
                document.getElementById("order_DN").value = cDN;
            if (cLF != '')
                document.getElementById("order_LF").value = cLF;
            if (cRemark != '')
                document.getElementById("order_remark").value = cRemark;
            if (cQuantity != '') {
                document.getElementById("order_quantity").value = (cQuantity);
                document.getElementById("nego_quantity").value = (cQuantity);
            }
            if (cDollor != '') {
                document.getElementById("order_dollor").value = (cDollor);

                document.getElementById("nego_etc_dollor").value = (cDollor);
            }
            if (cNegoWon != '')
                document.getElementById("nego_won").value = (cNegoWon);
            if (cShipName != '')
                document.getElementById("ship_name0").value = (cShipName);
            if (cJukwha != '')
                document.getElementById("local_jukwha").value = (cJukwha);
            if (cJukwha2 != '')
                document.getElementById("local_jukwha2").value = (cJukwha2);
            if (csudollor != '') {

                document.getElementById("local_su").value = (csudollor);
            }
            if (csuwon != '') {

                document.getElementById("local_su2").value = (csuwon);
            }
            if (cudollor != '')
                document.getElementById("local_u").value = (cudollor);
            if (cuwon != '') {
                document.getElementById("local_u2").value = (cuwon);
                document.getElementById("nego_uwon").value = cuwon;
            }

            if (cComm != '') {
                document.getElementById("local_comm").value = (cComm);
                document.getElementById("local_comm").style.backgroundColor = "yellow";
            }
            if (cComm2 != '') {
                document.getElementById("local_comm2").value = (cComm2);
                document.getElementById("local_comm2").style.backgroundColor = "yellow";
            }
            if (cActual != '') {
                document.getElementById("local_actual").style.backgroundColor = "green";
                document.getElementById("local_actual").value = (cActual);
            }
            if (cActual2 != '') {
                document.getElementById("local_actual2").value = (cActual2);
                document.getElementById("local_actual2").style.backgroundColor = "green";
            }

            if (cNego_m1 != '')
                document.getElementById("nego_m1").value = String(cNego_m1);
            if (cNego_m3 != '')
                document.getElementById("nego_m3").value = String(cNego_m3);
            if (cNego_m4 != '')
                document.getElementById("nego_m4").value = String(cNego_m4);
            if (cNego_ref != '')
                document.getElementById("nego_ref").value = String(cNego_ref);
            if (cNego_etc != '')
                document.getElementById("nego_etc").value = String(cNego_etc);

            if (cShip_conNo != '')
                document.getElementById("ship_container0").value = cShip_conNo;
            if (cShip_BL != '')
                document.getElementById("ship_BL").value = cShip_BL;

            if (cOrder_prc != '')
                document.getElementById("order_prc").value = cOrder_prc;
            if (corder_table_fob != '')
                document.getElementById("order_table_fob_0").value = corder_table_fob;
            if (corder_term != '')
                document.getElementById("order_term").value = corder_term;
            /*
                  if(corder_table_com1 != 'nan')
                    document.getElementById("order_table_com1").value = corder_table_com1;
                  if(corder_table_com1_amount != 'nan')
                    document.getElementById("order_table_com1_amount").value = corder_table_com1_amount;
            */
            if (cnego_hwanga != '')
                document.getElementById("nego_hwanga").value = cnego_hwanga;
            if (corder_before_order != '')
                document.getElementById("order_before_order").value = corder_before_order;
            if (corder_expect_price != '')
                document.getElementById("order_expect_price").value = corder_expect_price;
            if (cship_lotNo != '')
                document.getElementById("ship_lotNo0").value = cship_lotNo;
            if (cInvNo != '')
                document.getElementById("nego_InvNo").value = cInvNo;

            if (cnego_deposit_amount1 != '')
                document.getElementById("nego_deposit_amount0").value = cnego_deposit_amount1;

            if (cnego_incomplete_value != '')
                document.getElementById("nego_incomplete_value").value = cnego_incomplete_value;

            ///////////////////////////////////////////////////////////////////////////////////
            // 입금 내역 => 미입금 내역
            var length = document.getElementById("table_nego").rows.length;
            ///////////////////////////////////////////////////////////////////////////////////

            if (cBillInvoice1 != '')
                document.getElementById("BillInvoice1").value = cBillInvoice1;
            if (cBillInvoice2 != '')
                document.getElementById("BillInvoice2").value = cBillInvoice2;
            if (cBillInvoice3 != '')
                document.getElementById("BillInvoice3").value = cBillInvoice3;
            if (cBillInvoice4 != '')
                document.getElementById("BillInvoice4").value = cBillInvoice4;

            if (cBillMoneyInvoice1 != '')
                document.getElementById("BillMoneyInvoice1").value = cBillMoneyInvoice1;
            if (cBillMoneyInvoice2 != '')
                document.getElementById("BillMoneyInvoice2").value = cBillMoneyInvoice2;
            if (cBillMoneyInvoice3 != '')
                document.getElementById("BillMoneyInvoice3").value = cBillMoneyInvoice3;
            if (cBillMoneyInvoice4 != '')
                document.getElementById("BillMoneyInvoice4").value = cBillMoneyInvoice4;

            if (cBillDollorInvoice1 != '')
                document.getElementById("BillDollorInvoice1").value = cBillDollorInvoice1;
            if (cBillDollorInvoice2 != '')
                document.getElementById("BillDollorInvoice2").value = cBillDollorInvoice2;
            if (cBillDollorInvoice3 != '')
                document.getElementById("BillDollorInvoice3").value = cBillDollorInvoice3;
            if (cBillDollorInvoice4 != '')
                document.getElementById("BillDollorInvoice4").value = cBillDollorInvoice4;


            if (corder_com1 != '')
                document.getElementById("order_com1").value = corder_com1;
            if (corder_com2 != '')
                document.getElementById("order_com2").value = corder_com2;
            if (corder_com3 != '')
                document.getElementById("order_com3").value = corder_com3;
            if (corder_com4 != '')
                document.getElementById("order_com4").value = corder_com4;

            ////////////////////////////////////////////////////////////////////////////
            // nego com1
            var comval1 = document.getElementById("order_com1").value;
            var comval2 = document.getElementById("order_com2").value;

            if (comval1 == '')
                comval1 = '0';
            if (comval2 == '')
                comval2 = '0';


            var total = parseFloat(comval1) + parseFloat(comval2);
            total = parseFloat(total).toLocaleString();

            if (total == '')
                total = '0';
            document.getElementById('nego_com1_rate').value = total;
            ////////////////////////////////////////////////////////////////////////////
            ////////////////////////////////////////////////////////////////////////////
            // nego com2
            var comval3 = document.getElementById("order_com3").value;
            var comval4 = document.getElementById("order_com4").value;

            if (comval3 == '')
                comval3 = '0';
            if (comval4 == '')
                comval4 = '0';


            var total3 = parseFloat(comval3) + parseFloat(comval4);
            total3 = parseFloat(total3).toLocaleString();


            if (total3 == '')
                total3 = '0';
            document.getElementById('nego_com2_rate').value = total3;
            ////////////////////////////////////////////////////////////////////////////


            ////////////////////////////////////////////////////////////////////////////
            // 2020.07.22 Amount(US)
            var quantity = document.getElementById("order_quantity").value;
            var prc = document.getElementById("order_prc").value;
            var cross = document.getElementById("order_cross_rate").value;

            if (quantity == '')
                quantity = '0';
            if (prc == '')
                prc = '0';
            if (cross == '')
                cross = '0';
            quantity = quantity.replace(",", "");

            var total = parseFloat(quantity) * parseFloat(prc) * parseFloat(cross);
            total = parseFloat(total).toLocaleString();

            var localamount = parseFloat(quantity) * parseFloat(prc);
            localamount = parseFloat(localamount);

            if (total == '')
                total = '0';

            document.getElementById('order_dollor').value = total;

            document.getElementById('nego_etc').value = localamount;
            document.getElementById('nego_etc_dollor').value = total;

            // added by 2020-03-18
            quantity = parseFloat(quantity).toLocaleString();
            document.getElementById('nego_quantity').value = quantity;
            ///////////////////////////////////////////////////////////////////////////



            if (corder_com1_amount != '')
                document.getElementById("order_com1_amount").value = corder_com1_amount;
            if (corder_com2_amount != '')
                document.getElementById("order_com2_amount").value = corder_com2_amount;
            if (corder_com3_amount != '')
                document.getElementById("order_com3_amount").value = corder_com3_amount;
            if (corder_com4_amount != '')
                document.getElementById("order_com4_amount").value = corder_com4_amount;

            ////////////////////////////////////////////////////////////////////////////
            // nego com1 amount
            var comval1a = document.getElementById("order_com1_amount").value;
            var comval2a = document.getElementById("order_com2_amount").value;

            if (comval1a == '')
                comval1a = '0';
            if (comval2a == '')
                comval2a = '0';

            comval1a = comval1a.replace(",", "");
            comval2a = comval2a.replace(",", "");

            var negocross = document.getElementById('nego_cross').value;
            if (!negocross) {
                negocross = 1;
            }
            negocross = parseFloat(negocross);

            var totala = (parseFloat(comval1a) + parseFloat(comval2a)) * nego_cross;
            totala = parseFloat(totala).toLocaleString();

            if (totala == '')
                totala = '0';


            document.getElementById('nego_com1_amount').value = totala;
            ////////////////////////////////////////////////////////////////////////////
            ////////////////////////////////////////////////////////////////////////////
            // nego com2 amount
            var comval3a = document.getElementById("order_com3_amount").value;
            var comval4a = document.getElementById("order_com4_amount").value;

            if (comval3a == '')
                comval3a = '0';
            if (comval4a == '')
                comval4a = '0';

            comval3a = comval3a.replace(",", "");
            comval4a = comval4a.replace(",", "");

            var total3a = (parseFloat(comval3a) + parseFloat(comval4a)) * negocross;
            total3a = parseFloat(total3a).toLocaleString();


            if (total3a == '')
                total3a = '0';
            document.getElementById('nego_com2_amount').value = total3a;
            ////////////////////////////////////////////////////////////////////////////

            ////////////////////////////////////////////////////////////////////////////
            // nego com total

            //var nego_com1 = document.getElementById("nego_com1_amount").value;
            var nego_com1 = totala;
            var nego_com2 = total3a;
            //var nego_com2 = document.getElementById("nego_com2_amount").value;

            if (nego_com1 == '')
                nego_com1 = '0';
            if (nego_com2 == '')
                nego_com2 = '0';

            nego_com1 = nego_com1.replace(",", "");
            nego_com2 = nego_com2.replace(",", "");

            var total_nego_com = parseFloat(nego_com1) + parseFloat(nego_com2);
            total_nego_com = parseFloat(total_nego_com).toLocaleString();


            if (total_nego_com == '')
                total_nego_com = '0';

            //console.log('6546 nego_com_total', total_nego_com);
            document.getElementById('nego_com_total').value = total_nego_com;
            //console.log('6569 local_comm', total_nego_com);
            document.getElementById('local_comm').value = total_nego_com;

            ////////////////////////////////////////////////////////////////////////////


            ////////////////////////////////////////////////////////////////////////////
            // local actual margin
            document.getElementById('nego_cross_amount').value; // +

            // local table
            var table = document.getElementById('table_nego');
            for (var r = 0, n = table.rows.length; r < n; r++) {

                //alert(table.rows[r].cells[6].innerHTML);

            }

            //document.getElementById('');
            //document.getElementById('').value;  // -

        }

        function add_orderSelect(data) {


            buyer_order.setValue(-1, false);
            agent_order.setValue(-1, false);
            item_order.setValue(-1, false);
            LS_order.setValue(-1, false);
            //company_order.setValue(-1, false);
            unit_nego_table.setValue(-1, false);
            payment_order.setValue(-1, false);
            PRC_order.setValue(-1, false);
            bank_nego.setValue(-1, false);
            arrive_order.setValue(-1, false);

            order_com1_to.setValue(-1, false);
            order_com2_to.setValue(-1, false);
            order_com3_to.setValue(-1, false);
            order_com4_to.setValue(-1, false);

            corder_Buyer = data['order_Buyer'][0];

            buyer_order.addItem(corder_Buyer);

            corder_Agent = data['order_Agent'][0];
            agent_order.addItem(corder_Agent);

            corder_Item = data['order_Item'][0];
            item_order.addItem(corder_Item);

            corder_LS = data['order_LS'][0];
            LS_order.addItem(corder_LS);

            //corder_Maker = data['order_Maker'][0];
            //company_order.addItem(corder_Maker);

            cnego_unit = data['nego_unit'][0];
            unit_nego_table.addItem(cnego_unit);

            corder_Payment = data['order_Payment'][0];
            payment_order.addItem(corder_Payment);

            corder_prc_unit = data['order_prc_unit'][0];
            PRC_order.addItem(corder_prc_unit);
            //document.getElementById("order_title_com_total").value = 'COM TOTAL(' + corder_prc_unit + ')' ;
            //var title =  document.getElementById("PRC_order").innerHTML;

            cnego_bank = data['nego_bank'][0];
            bank_nego.addItem(cnego_bank);

            corder_arrive = data['order_arrive'][0];
            arrive_order.addItem(corder_arrive);

            corder_com1_agent = data['order_com1_agent'][0];
            order_com1_to.addItem(corder_com1_agent);
            corder_com2_agent = data['order_com2_agent'][0];
            order_com2_to.addItem(corder_com2_agent);
            corder_com3_agent = data['order_com3_agent'][0];
            order_com3_to.addItem(corder_com3_agent);
            corder_com4_agent = data['order_com4_agent'][0];
            order_com4_to.addItem(corder_com4_agent);


            //check2 = data['order_com2'][0];
            //if(check2 != 'nan')
            //{
            //  c = data['order_com2_agent'][0];
            //  com_to_1.addItem(c);
            //}

            //check3 = data['order_com3'][0];
            //if(check3 != 'nan')
            //{
            //  c = data['order_com3_agent'][0];
            //  com_to_2.addItem(c);
            //}

            //check4 = data['order_com4'][0];
            //if(check4 != 'nan')
            //{
            //  c = data['order_com4_agent'][0];
            //  com_to_3.addItem(c);
            //}

        }

        function add_negoDate(data) {

            cnego_DueDate = data['nego_DueDate'][0];
            if (cnego_DueDate != 'NaT') {
                var s1 = String(cnego_DueDate).substring(0, 4);
                var s2 = String(cnego_DueDate).substring(5, 7);
                var s3 = String(cnego_DueDate).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#DueDate_nego').datepicker('setDate', s4);
            }

            cship_docu_date = data['ship_docu_date'][0];
            if (cship_docu_date != 'NaT') {
                var s1 = String(cship_docu_date).substring(0, 4);
                var s2 = String(cship_docu_date).substring(5, 7);
                var s3 = String(cship_docu_date).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#inv_ship').datepicker('setDate', s4);
            }


            cship_ship_date = data['ship_ship_date'][0];
            if (cship_ship_date != 'NaT') {
                var s1 = String(cship_ship_date).substring(0, 4);
                var s2 = String(cship_ship_date).substring(5, 7);
                var s3 = String(cship_ship_date).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#actual_ship').datepicker('setDate', s4);
            }


            cnego_m2 = data['nego_m2'][0];
            if (cnego_m2 != 'NaT') {
                var s1 = String(cnego_m2).substring(0, 4);
                var s2 = String(cnego_m2).substring(5, 7);
                var s3 = String(cnego_m2).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#report_nego').datepicker('setDate', s4);
            }


            cnego_date = data['nego_date'][0];
            if (cnego_date != 'NaT') {
                var s1 = String(cnego_date).substring(0, 4);
                var s2 = String(cnego_date).substring(5, 7);
                var s3 = String(cnego_date).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#day_nego').datepicker('setDate', s4);
            }


            cship_chulgo = data['ship_chulgo'][0];
            if (cship_chulgo != 'NaT') {
                var s1 = String(cship_chulgo).substring(0, 4);
                var s2 = String(cship_chulgo).substring(5, 7);
                var s3 = String(cship_chulgo).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#ship_date_chul0').datepicker('setDate', s4);
            }

            cnego_deposit_date1 = data['nego_deposit_date1'][0];
            if (cnego_deposit_date1 != 'NaT') {
                var s1 = String(cnego_deposit_date1).substring(0, 4);
                var s2 = String(cnego_deposit_date1).substring(5, 7);
                var s3 = String(cnego_deposit_date1).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#nego_deposit_date0').datepicker('setDate', s4);
            }
            cnego_deposit_date2 = data['nego_deposit_date2'][0];
            if (cnego_deposit_date2 != 'NaT') {
                var s1 = String(cnego_deposit_date2).substring(0, 4);
                var s2 = String(cnego_deposit_date2).substring(5, 7);
                var s3 = String(cnego_deposit_date2).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#nego_deposit_date1').datepicker('setDate', s4);
            }
            cnego_deposit_date3 = data['nego_deposit_date3'][0];
            if (cnego_deposit_date3 != 'NaT') {
                var s1 = String(cnego_deposit_date3).substring(0, 4);
                var s2 = String(cnego_deposit_date3).substring(5, 7);
                var s3 = String(cnego_deposit_date3).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#nego_deposit_date2').datepicker('setDate', s4);
            }
            cnego_deposit_date4 = data['nego_deposit_date4'][0];
            if (cnego_deposit_date4 != 'NaT') {
                var s1 = String(cnego_deposit_date4).substring(0, 4);
                var s2 = String(cnego_deposit_date4).substring(5, 7);
                var s3 = String(cnego_deposit_date4).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#nego_deposit_date3').datepicker('setDate', s4);
            }
            cnego_deposit_date5 = data['nego_deposit_date5'][0];
            if (cnego_deposit_date5 != 'NaT') {
                var s1 = String(cnego_deposit_date5).substring(0, 4);
                var s2 = String(cnego_deposit_date5).substring(5, 7);
                var s3 = String(cnego_deposit_date5).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#nego_deposit_date4').datepicker('setDate', s4);
            }

            cDateInvoice1 = data['DateInvoice1'][0];
            if (cDateInvoice1 != 'NaT') {
                var s1 = String(cDateInvoice1).substring(0, 4);
                var s2 = String(cDateInvoice1).substring(5, 7);
                var s3 = String(cDateInvoice1).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#paydate1_local').datepicker('setDate', s4);
            }

            cDateInvoice2 = data['DateInvoice2'][0];
            if (cDateInvoice2 != 'NaT' && cDateInvoice2 != 'nan') {

                var s1 = String(cDateInvoice2).substring(0, 4);
                var s2 = String(cDateInvoice2).substring(5, 7);
                var s3 = String(cDateInvoice2).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#paydate2_local').datepicker('setDate', s4);
            }
            cDateInvoice3 = data['DateInvoice3'][0];
            if (cDateInvoice3 != 'NaT') {
                var s1 = String(cDateInvoice3).substring(0, 4);
                var s2 = String(cDateInvoice3).substring(5, 7);
                var s3 = String(cDateInvoice3).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#paydate3_local').datepicker('setDate', s4);
            }
            cDateInvoice4 = data['DateInvoice4'][0];
            if (cDateInvoice4 != 'NaT') {
                var s1 = String(cDateInvoice4).substring(0, 4);
                var s2 = String(cDateInvoice4).substring(5, 7);
                var s3 = String(cDateInvoice4).substring(8, 10);
                var s4 = s1 + '-' + s2 + '-' + s3;
                $('#paydate4_local').datepicker('setDate', s4);
            }


        }
        /* 19.11.26 -------------------------- */

        function add_orderagent(data) {

            $('#order_agent').empty();
            //      c =,'<option selected value="">Select</option>';
            c = '<option selected value="0">' + data['order_agent'][0] + '</option>';
            for (i = 1; i < data['order_agent'].length; i++) {
                c += '<option>' + data['order_agent'][i] + '</option>';
            }
            $('#order_agent').remove();
            $('#order_agent').append(c);
            $('#order_agent').val('0');
            $('#order_agent').material_select();
        }
        // item 
        function add_orderitem(data) {

            $('#order_item').empty();
            c = '<option selected value="0">' + data['order_item'][0] + '</option>';
            for (i = 1; i < data['order_item'].length; i++) {
                c += '<option>' + data['order_item'][i] + '</option>';
            }

            $('#order_item').append(c);
            $('#order_item').val('0');
            $('#order_item').material_select();
        }

        function add_orderDN(data) {

            $('#order_DN').empty();
            c = data['order_DN'][0];

            $('#order_DN').val(c);

        }

        function add_orderLF(data) {


            $('#order_LF').empty();
            c = data['order_LF'][0];

            $('#order_LF').val(c);

        }

        // Luster
        function add_orderLS(data) {


            $('#order_LS').empty();
            c = '<option selected value="0">' + data['order_LS'][0] + '</option>';


            for (i = 1; i < data['order_LS'].length; i++) {
                c += '<option>' + data['order_LS'][i] + '</option>';
            }


            $('#order_LS').append(c);
            $('#order_LS').val('0');
            $('#order_LS').material_select();
        }
        // remark
        function add_orderremark(data) {



            $('#order_remark').empty();
            c = data['order_remark'][0];

            $('#order_remark').val(c);
        }
        // qty
        function add_orderqty(data) {



            $('#order_qty').empty();
            c = data['order_qty'][0];

            c = parseFloat(c);
            $('#order_qty').val(c);


        }


        // unit
        function add_orderunit(data) {


            $('#order_unit').empty();
            c = '<option selected value="0">' + data['order_unit'][0] + '</option>';


            for (i = 1; i < data['order_unit'].length; i++) {
                c += '<option>' + data['order_unit'][i] + '</option>';
            }


            $('#order_unit').append(c);
            $('#order_unit').val('0');
            $('#order_unit').material_select();
        }

        // unit
        function add_ordercurrency(data) {


            $('#order_currency').empty();
            c = '<option selected value="0">' + data['order_currency'][0] + '</option>';


            for (i = 1; i < data['order_currency'].length; i++) {
                c += '<option>' + data['order_currency'][i] + '</option>';
            }

            $('#order_currency').append(c);
            $('#order_currency').val('0');
            $('#order_currency').material_select();
        }
        // PRC
        function add_orderPRC(data) {



            $('#order_PRC').empty();
            c = data['order_PRC'][0];

            $('#order_PRC').val(c);
        }

        // amount
        function add_orderamount(data) {

            $('#order_amount').empty();
            c = data['order_amount'][0];

            $('#order_amount').val(c);
        }
    }); //end of ready



    ///////////////////////////////////////////////////////////
    // shipping docs
    $(document).ready(function() {

        $(document).on('change', '#shippingdocs_1,#date_shippingdocs_1', function() {
            var v1 = $("#shippingdocs_1").val();
            var v2 = $("#date_shippingdocs_1").val();
            // * packing list    
            $("#shipping_packing_list_invoice").val(v1);
            $("#date_shipping_packing_list_invoice").val(v2);
            // * invoice 
            $("#shipping_comm_invoice_invoice").val(v1);
            $("#date_shipping_comm_invoice_invoice").val(v2);
            // * certificate    
            var cer1 = 'NO. DATE OF INVOICE : \n' + String(v1) + ' ' + String(v2);
            $("#shipping_certificate_remarks").val(cer1);
        });

        $(document).on('change', '#shippingdocs_2,#date_shippingdocs_2', function() {
            var v1 = $("#shippingdocs_2").val();
            var v2 = $("#date_shippingdocs_2").val();

            // * invoice
            $("#shipping_comm_invoice_LC").val(v1);
            $("#date_shipping_comm_invoice_LC").val(v2);
        });

        $(document).on('change', '#shippingdocs_3', function() {
            var v1 = $("#shippingdocs_3").val();
            // * invoice     
            $("#shipping_comm_invoice_bank").val(v1);
        });

        $(document).on('change', '#shippingdocs_4_text', function() {
            var v1 = $("#shippingdocs_4_text").val();
            // * invoice 
            $("#shipping_comm_invoice_term").val(v1);
        });

        $(document).on('change', '#shippingdocs_5', function() {
            var v1 = $("#shippingdocs_5").val();

            // *packing list
            $("#shipping_packing_list_shipper").val(v1);
            // *commercial invoice 
            $("#shipping_comm_invoice_shipper").val(v1);
            // *certificate 
            $("#shipping_certificate_seller").val(v1);
            // *request
            $("#shipping_request_shipper").val(v1);

        });

        $(document).on('change', '#shippingdocs_6', function() {

            var v1 = $("#shippingdocs_6").val();
            TotalData = v1;
            $.ajax({
                type: "POST",
                url: "{{ url_for('get_buyer_db') }}",
                contentType: "application/json;",
                data: JSON.stringify(TotalData),

                success: function(out) {
                    var data1 = out['select_buyer'][0][2];
                    var data2 = out['select_buyer'][0][3];
                    var data3 = out['select_buyer'][0][4];
                    var data4 = out['select_buyer'][0][5];

                    var datat = String(data1) + '\n' + String(data2) + '\n' + String(data3) + '\n' + String(data4);

                    datat = datat.replace(/nan/gi, "");
                    $("#shippingdocs_6_text").val(datat);
                    $("#shippingdocs_8").val(datat);

                    // * packing list
                    $("#shipping_packing_list_account").val(datat);
                    // * invoice 
                    $("#shipping_comm_invoice_account").val(datat);

                    // * packing list
                    $("#shipping_packing_list_Notify").val(datat);
                    // * invoice 
                    $("#shipping_comm_invoice_Notify").val(datat);
                    // * request
                    $("#shipping_request_Notify").val(datat);

                },
                error: function(out) {
                    alert("Please check..");
                }
            }); //end of ajax  
        });

        var before14 = '';
        $(document).on('focus click', 'input', function(e) {

            if (e.target.id == 'shippingdocs_4-selectized') {

                before14 = $("#shippingdocs_4").val();
                //console.log(before14);
            }


        });

        $(document).on('change', '#shippingdocs_4', function() {

            let v1current = $("#shippingdocs_4").val();

            var v1 = $("#shippingdocs_4_text").val();
            v1 = String(v1).replace(String(before14), String(v1current));
            console.log(v1);
            $("#shippingdocs_4_text").val(v1);
            $("#shippingdocs_4_text").change();

            //console.log("v1 ", v1current);
            //console.log("v2before ", before14);
        });

        $(document).on('change', '#shippingdocs_6_text', function() {
            var v1 = $("#shippingdocs_6_text").val();
            // * packing list
            $("#shipping_packing_list_account").val(v1);
            // * invoice 
            $("#shipping_comm_invoice_account").val(v1);
        });

        $(document).on('change', '#shippingdocs_8', function() {
            var v1 = $("#shippingdocs_8").val();
            // * packing list
            $("#shipping_packing_list_Notify").val(v1);
            // * invoice 
            $("#shipping_comm_invoice_Notify").val(v1);
            // * request
            $("#shipping_request_Notify").val(v1);
        });

        $(document).on('change', '#shippingdocs_7', function() {
            var v1 = $("#shippingdocs_7").val();
            // * certificate    
            $("#shipping_certificate_consignee").val(v1);
            // * request
            $("#shipping_request_consingnee").val(v1);
        });

        $(document).on('change', '#shippingdocs_10', function() {
            var v1 = $("#shippingdocs_10").val();
            // * packing list
            $("#shipping_packing_list_Loading").val(v1);
            // * invoice 
            $("#shipping_comm_invoice_Loading").val(v1);
            // * certificate
            var cer10 = 'PORT OF LOADING : ' + v1;
            var v11 = $("#shippingdocs_11_text").val();
            cer10 = cer10 + '\n' + 'FINAL DESTINATION : ' + String(v11);
            var v12 = $("#shippingdocs_12").val();
            cer10 = cer10 + '\n' + 'VESSEL : ' + String(v12);
            $("#shipping_certificate_particulars").val(cer10);
            // * request
            $("#shipping_request_Loading").val(v1);
        });

        $(document).on('change', '#shippingdocs_11', function() {
            var v1 = $("#shippingdocs_11").val();
            TotalData = v1;
            $.ajax({
                type: "POST",
                url: "{{ url_for('get_finaldestination_db') }}",
                contentType: "application/json;",
                data: JSON.stringify(TotalData),

                success: function(out) {
                    var data1 = out['destination'][0][2];

                    data1 = data1.replace(/nan/gi, "");
                    $("#shippingdocs_11_text").val(data1);

                    // * pakcing list
                    $("#shipping_packing_list_Destination").val(data1);
                    // * invoice 
                    $("#shipping_comm_invoice_Destination").val(data1);
                    // * certificate
                    var v10 = $("#shippingdocs_10").val();
                    var cer10 = 'PORT OF LOADING : ' + v10;
                    var v11 = $("#shippingdocs_11_text").val();
                    cer10 = cer10 + '\n' + 'FINAL DESTINATION : ' + String(data1);
                    var v12 = $("#shippingdocs_12").val();
                    cer10 = cer10 + '\n' + 'VESSEL : ' + String(v12);
                    var v13 = $("#date_shippingdocs_13").val();
                    cer10 = cer10 + '\n' + 'ON BOARD : ' + String(v13);
                    $("#shipping_certificate_particulars").val(cer10);
                    // * request
                    $("#shipping_request_destination").val(data1);
                },
                error: function(out) {
                    alert("Please check..");
                }
            }); //end of ajax  
        });

        $(document).on('change', '#shippingdocs_11_text', function() {

            var v11 = $("#shippingdocs_11_text").val();

            // * pakcing list
            $("#shipping_packing_list_Destination").val(v11);
            // * invoice 
            $("#shipping_comm_invoice_Destination").val(v11);
            // * certificate
            var v10 = $("#shippingdocs_10").val();
            var cer10 = 'PORT OF LOADING : ' + v10;
            cer10 = cer10 + '\n' + 'FINAL DESTINATION : ' + String(v11);
            var v12 = $("#shippingdocs_12").val();
            cer10 = cer10 + '\n' + 'VESSEL : ' + String(v12);
            var v13 = $("#date_shippingdocs_13").val();
            cer10 = cer10 + '\n' + 'ON BOARD : ' + String(v13);
            $("#shipping_certificate_particulars").val(cer10);
            // * request
            $("#shipping_request_destination").val(v11);
        });

        $(document).on('change', '#shippingdocs_12', function() {
            var v1 = $("#shippingdocs_12").val();

            // *packing list
            $("#shipping_packing_list_Vessel").val(v1);
            // *invoice 
            $("#shipping_comm_invoice_Vessel").val(v1);
            // * certificate
            var v10 = $("#shippingdocs_10").val();
            var cer10 = 'PORT OF LOADING : ' + v10;
            var v11 = $("#shippingdocs_11_text").val();
            cer10 = cer10 + '\n' + 'FINAL DESTINATION : ' + String(v11);
            cer10 = cer10 + '\n' + 'VESSEL : ' + String(v1);
            var v13 = $("#date_shippingdocs_13").val();
            cer10 = cer10 + '\n' + 'ON BOARD : ' + String(v13);
            $("#shipping_certificate_particulars").val(cer10);
            // * request
            $("#shipping_request_Vessel").val(v1);

            // 18 table
            $("#shippingdocs_name0").val(v1);
        });

        $(document).on('change', '#date_shippingdocs_13', function() {
            var v1 = $("#date_shippingdocs_13").val();
            // *packing list
            $("#date_shipping_packing_list_sailing").val(v1);
            // * invoice 
            $("#date_shipping_comm_invoice_sailing").val(v1);
            // * certificate
            var v10 = $("#shippingdocs_10").val();
            var cer10 = 'PORT OF LOADING : ' + v10;
            var v11 = $("#shippingdocs_11_text").val();
            cer10 = cer10 + '\n' + 'FINAL DESTINATION : ' + String(v11);
            var v12 = $("#shippingdocs_12").val();
            cer10 = cer10 + '\n' + 'VESSEL : ' + String(v12);
            cer10 = cer10 + '\n' + 'ON BOARD : ' + String(v1);
            $("#shipping_certificate_particulars").val(cer10);

            // * request
            $("#date_shipping_request_sailing").val(v1);
        });

        $(document).on('change', '#shippingdocs_14_text', function() {
            var v1 = $("#shippingdocs_14_text").val();
            // *invoice
            $("#shipping_comm_invoice_remark").val(v1);
        });

        $(document).on('change', '#shippingdocs_15_text', function() {
            var v1 = $("#shippingdocs_15_text").val();
            // *invoice
            $("#shipping_packing_list_remark").val(v1);
        });

        $(document).on('change', '#shippingdocs_16', function() {
            var v1 = $("#shippingdocs_16").val();

            // * invoice
            $("#shipping_comm_invoice_lastnotes").val(v1);
        });

        $(document).on('change', '#shippingdocs_17', function() {
            var v1 = $("#shippingdocs_17").val();
            // * packing list
            $("#shipping_packing_list_goods").val(v1);
            // * certificate 
            $("#shipping_certificate_marks").val(v1);
            // * request      
            $("#shipping_request_goods").val(v1);
        });

        $(document).on('change', '#shippingdocs_tableSPL', function() {

            var table = document.getElementById("shippingdocs_tableSPL");
            rowCount = table.rows.length;
            colCount = table.rows[0].cells.length;


            var v1 = $("#shippingdocs_name0").val();

            // *shipping docs 
            $("#shippingdocs_12").val(v1);
            // *packing list
            $("#shipping_packing_list_Vessel").val(v1);
            // *invoice 
            $("#shipping_comm_invoice_Vessel").val(v1);
            // * certificate
            var v10 = $("#shippingdocs_10").val();
            var cer10 = 'PORT OF LOADING : ' + v10;
            var v11 = $("#shippingdocs_11_text").val();
            cer10 = cer10 + '\n' + 'FINAL DESTINATION : ' + String(v11);
            cer10 = cer10 + '\n' + 'VESSEL : ' + String(v1);
            var v13 = $("#date_shippingdocs_13").val();
            cer10 = cer10 + '\n' + 'ON BOARD : ' + String(v13);
            $("#shipping_certificate_particulars").val(cer10);
            // * request
            $("#shipping_request_Vessel").val(v1);


            var v2 = $("#shippingdocs_date_chul0").val();
            $("#date_shipping_request_job").val(String(v2));

            v3 = $("#shippingdocs_container0").val();

            var item_total = $("#shippingdocs_17").val();
            var req18 = item_total + '\n\n' + 'Cont NO: ' + String(v3) + '\n' + 'FREIGHT PREPAID';
            $("#shipping_request_goods").val(req18);
        });
    });



    ///////////////////////////////////////////////////////////
    // shipping docs packing list bottom 
    $(document).ready(function() {

        $(document).on('change', '#shipping_packing_list_kind', function() {

            var vcheck = $("#shipping_packing_list_kind").val();

            var v1 = '=WEIGHT DETAILS=\n';
            var v2 = vcheck;
            var v3 = '     NET WEIGHT OF      TOTAL OF     GROSS WEIGHT OF        TOTAL OF\n';
            var v4 = '  NO.      EACH ' + v2;
            var v5 = '        NET WEIGHT';
            var v6 = '   EACH ' + v2;
            var v7 = '            GROSS WEIGHT';

            var v8 = '\n=============================================================================='

            var vt = v1 + String(v2).padStart(6) + v3 + String(v4).padEnd(22) + v5 + String(v6).padEnd(14) + v7 + v8;
            $("#shipping_packing_list_kind_contents").val(vt);
        });

        $("#shipping_packing_list_check_weight").change(function() {
            $("#shipping_packing_list_kind").trigger("change");
        });

    });
</script>




<script>
    ///////////////////////////////////////////////////////////
    // shipping docs side save 
    function save_shippingdata() {
        /////////////////////////////////////////////////
        // variable
        var vshippingdocs_OrderNo = $("#shippingdocs_OrderNo").val();
        var vshippingdocs_OrderGubun = $("#shippingdocs_OrderGubun").val();
        var vshippingdocs_1 = $('#shippingdocs_1').val();
        var vdate_shippingdocs_1 = $('#date_shippingdocs_1').val();
        var vshippingdocs_2 = $('#shippingdocs_2').val();
        var vdate_shippingdocs_2 = $('#date_shippingdocs_2').val();
        var vshippingdocs_3 = $('#shippingdocs_3').val();
        var vshippingdocs_4_text = $('#shippingdocs_4_text').val();
        var vshippingdocs_5 = $('#shippingdocs_5').val();
        var vshippingdocs_6_text = $('#shippingdocs_6_text').val();
        var vshippingdocs_7 = $('#shippingdocs_7').val();
        var vshippingdocs_8 = $('#shippingdocs_8').val();
        var vshippingdocs_10 = $('#shippingdocs_10').val();
        var vshippingdocs_11_text = $('#shippingdocs_11_text').val();
        var vshippingdocs_12 = $('#shippingdocs_12').val();
        var vdate_shippingdocs_13 = $('#date_shippingdocs_13').val();
        var vshippingdocs_14_text = $('#shippingdocs_14_text').val();
        var vshippingdocs_15_text = $('#shippingdocs_15_text').val();
        var vshippingdocs_16 = $('#shippingdocs_16').val();
        var vshippingdocs_17 = $('#shippingdocs_17').val();
        /////////////////////////////////////////////////
        // packing list  
        //var vshipping_packing_list_shipper = $("#shipping_packing_list_shipper").val();
        //var vshipping_packing_list_account = $("#shipping_packing_list_account").val();
        //var vshipping_packing_list_Notify = $("#shipping_packing_list_Notify").val();
        //var vshipping_packing_list_Loading = $("#shipping_packing_list_Loading").val();
        //var vshipping_packing_list_Destination = $("#shipping_packing_list_Destination").val();
        //var vshipping_packing_list_Vessel = $("#shipping_packing_list_Vessel").val();
        //var vdate_shipping_packing_list_sailing = $("#date_shipping_packing_list_sailing").val();
        //var vshipping_packing_list_invoice = $("#shipping_packing_list_invoice").val();
        //var vdate_shipping_packing_list_invoice = $("#date_shipping_packing_list_invoice").val();
        //var vshipping_packing_list_remark = $("#shipping_packing_list_remark").val();
        //var vshipping_packing_list_goods = $("#shipping_packing_list_goods").val();
        //var vshipping_packing_list_kind = $("#shipping_packing_list_kind").val();
        //var vshipping_packing_list_kind_contents = $("#shipping_packing_list_kind_contents").val();
        /////////////////////////////////////////////////
        // commercial invoice  
        //var vshipping_comm_invoice_shipper = $("#shipping_comm_invoice_shipper").val();
        //var vshipping_comm_invoice_account = $("#shipping_comm_invoice_account").val();
        //var vshipping_comm_invoice_Notify = $("#shipping_comm_invoice_Notify").val();
        //var vshipping_comm_invoice_Loading = $("#shipping_comm_invoice_Loading").val();
        //var vshipping_comm_invoice_Destination = $("#shipping_comm_invoice_Destination").val();
        //var vshipping_comm_invoice_Vessel = $("#shipping_comm_invoice_Vessel").val();
        //var vdate_shipping_comm_invoice_sailing = $("#date_shipping_comm_invoice_sailing").val();
        //var vdate_shipping_comm_invoice_sailing = $("#date_shipping_comm_invoice_sailing").val();
        /////////////////////////////////////////////////
        // shipping request
        var vdate_shipping_request_date = $("#date_shipping_request_date").val();
        var vshipping_request_shipcompany = $("#shipping_request_shipcompany").val();
        var vdate_shipping_request_sailing = $("#date_shipping_request_sailing").val();
        var vdate_shipping_request_job = $("#date_shipping_request_job").val();
        var vshipping_request_factory = $("#shipping_request_factory").val();
        var vshipping_request_movement = $("#shipping_request_movement").val();
        var vdate_shipping_request_sailday = $("#date_shipping_request_sailday").val();
        var vdate_shipping_request_BLsailday = $("#date_shipping_request_BLsailday").val();
        var vshipping_request_sunim = $("#shipping_request_sunim").val();
        var vshipping_request_damdang = $("#shipping_request_damdang").val();
        var vshipping_request_THC = $("#shipping_request_THC").val();
        var vshipping_request_remark = $("#shipping_request_remark").val();
        var vshipping_request_tel = $("#shipping_request_tel").val();
        var vshipping_request_fax = $("#shipping_request_fax").val();
        TotalData = [];
        TotalData.push(vshippingdocs_OrderNo);
        TotalData.push(vshippingdocs_OrderGubun);
        TotalData.push(vshippingdocs_1);
        TotalData.push(vdate_shippingdocs_1);
        TotalData.push(vshippingdocs_2);
        TotalData.push(vdate_shippingdocs_2);
        TotalData.push(vshippingdocs_3);
        TotalData.push(vshippingdocs_4_text);
        TotalData.push(vshippingdocs_5);
        TotalData.push(vshippingdocs_6_text);
        TotalData.push(vshippingdocs_7);
        TotalData.push(vshippingdocs_8);
        TotalData.push(vshippingdocs_10);
        TotalData.push(vshippingdocs_11_text);
        TotalData.push(vshippingdocs_12);
        TotalData.push(vdate_shippingdocs_13);
        TotalData.push(vshippingdocs_14_text);
        TotalData.push(vshippingdocs_15_text);
        TotalData.push(vshippingdocs_16);
        TotalData.push(vshippingdocs_17);
        TotalData.push(vdate_shipping_request_date);
        TotalData.push(vshipping_request_shipcompany);
        TotalData.push(vdate_shipping_request_sailing);
        TotalData.push(vdate_shipping_request_job);
        TotalData.push(vshipping_request_factory);
        TotalData.push(vshipping_request_movement);
        TotalData.push(vdate_shipping_request_sailday);
        TotalData.push(vdate_shipping_request_BLsailday);
        TotalData.push(vshipping_request_sunim);
        TotalData.push(vshipping_request_damdang);
        TotalData.push(vshipping_request_THC);
        TotalData.push(vshipping_request_remark);
        TotalData.push(vshipping_request_tel);
        TotalData.push(vshipping_request_fax);

        /////////////////////////////////////////////////

        ///////////////////////
        // ajax
        $.ajax({
            type: "POST",
            url: "{{ url_for('save_shipping_db') }}",
            contentType: "application/json;",
            data: JSON.stringify(TotalData),

            success: function(out) {
                alert(out['msg']);
            },
            error: function(out) {
                alert("Please check error..");
            }
        }); //end of ajax
    }

    ///////////////////////////////////////////////////////////
    // delivery order save
    function save_deliveryorder() {
        /////////////////////////////////////////////////
        // variable

        var vdelivery_order_OrderNo = $("#delivery_order_OrderNo").val();
        var vdelivery_order_OrderGubun = $("#delivery_order_OrderGubun").val();

        var vdelivery_order_to = $("#delivery_order_to").val();
        var vdelivery_order_from = $("#delivery_order_from").val();
        var vdate_delivery_order_date = $("#date_delivery_order_date").val();
        var vdelivery_order_buyer = $("#delivery_order_buyer").val();
        var vdelivery_order_final_destination = $("#delivery_order_final_destination").val();
        var vdelivery_order_item_1 = $("#delivery_order_item_1").val();
        var vdelivery_order_item_2 = $("#delivery_order_item_2").val();
        var vdelivery_order_item_3 = $("#delivery_order_item_3").val();
        var vdelivery_order_item_4 = $("#delivery_order_item_4").val();
        var vdate_delivery_order_container = $("#date_delivery_order_container").val();
        var vdelivery_order_shipping = $("#delivery_order_shipping").val();
        var vdelivery_order_packing = $("#delivery_order_packing").val();
        var vdelivery_order_company_sel = $("#delivery_order_company_sel").val();
        var vdelivery_order_forwarding_sel = $("#delivery_order_forwarding_sel").val();
        var vdelivery_order_booking = $("#delivery_order_booking").val();
        var vdelivery_order_vessel = $("#delivery_order_vessel").val();
        var vdelivery_order_cont_sel = $("#delivery_order_cont_sel").val();
        var vdelivery_order_tel = $("#delivery_order_tel").val();
        var vdelivery_order_damdang = $("#delivery_order_damdang").val();
        var vdelivery_order_customer = $("#delivery_order_customer").val();
        var vdelivery_order_closing_doc_date = $("#delivery_order_closing_doc_date").val();
        var vdelivery_order_closing_doc = $("#delivery_order_closing_doc").val();
        var vdelivery_order_closing_cont_date = $("#delivery_order_closing_cont_date").val();
        var vdelivery_order_closing_cont = $("#delivery_order_closing_cont").val();
        var vdelivery_order_etd = $("#delivery_order_etd").val();
        var vdelivery_order_eta = $("#delivery_order_eta").val();
        var vdelivery_order_deliveryplace = $("#delivery_order_deliveryplace").val();
        var vdelivery_order_localtrucking = $("#delivery_order_localtrucking").val();

        TotalData = [];
        TotalData.push(vdelivery_order_OrderNo); // 0
        TotalData.push(vdelivery_order_OrderGubun); // 1
        TotalData.push(vdelivery_order_to); // 2
        TotalData.push(vdelivery_order_from); // 3
        TotalData.push(vdate_delivery_order_date); // 4
        TotalData.push(vdelivery_order_buyer); // 5
        TotalData.push(vdelivery_order_final_destination); // 6
        TotalData.push(vdelivery_order_item_1); // 7
        TotalData.push(vdelivery_order_item_2); // 8
        TotalData.push(vdelivery_order_item_3); // 9
        TotalData.push(vdelivery_order_item_4); // 10
        TotalData.push(vdate_delivery_order_container); // 11
        TotalData.push(vdelivery_order_shipping); // 12 
        TotalData.push(vdelivery_order_packing); // 13
        TotalData.push(vdelivery_order_company_sel); // 14
        TotalData.push(vdelivery_order_forwarding_sel); // 15
        TotalData.push(vdelivery_order_booking); // 16
        TotalData.push(vdelivery_order_vessel); // 17
        TotalData.push(vdelivery_order_cont_sel);
        TotalData.push(vdelivery_order_tel);
        TotalData.push(vdelivery_order_damdang);
        TotalData.push(vdelivery_order_customer);
        TotalData.push(vdelivery_order_closing_doc_date);
        TotalData.push(vdelivery_order_closing_doc);
        TotalData.push(vdelivery_order_closing_cont_date);
        TotalData.push(vdelivery_order_closing_cont);
        TotalData.push(vdelivery_order_etd);
        TotalData.push(vdelivery_order_eta);
        TotalData.push(vdelivery_order_deliveryplace);
        TotalData.push(vdelivery_order_localtrucking);
        /////////////////////////////////////////////////

        ///////////////////////
        // ajax
        $.ajax({
            type: "POST",
            url: "{{ url_for('save_delivery_order_db') }}",
            contentType: "application/json;",
            data: JSON.stringify(TotalData),

            success: function(out) {
                alert(out['msg']);
            },
            error: function(out) {
                alert("Please check error..");
            }
        }); //end of ajax
    }


    $(document).on('change', '#VGMDB', function() {

        var data1 = $('#VGMDB').val();
        beforeStr = data1;
        var afterStr = beforeStr.split('/');
        var lastStr = '';
        //for( var e =0 ; e < afterStr.length ; e++)
        //{
        // if(afterStr[e].search("DBB") != -1 )
        //{
        //  lastStr = afterStr[e];
        // break;
        //}
        //}
        lastStr = afterStr[0];

        $.ajax({
            type: "POST",
            url: "{{ url_for('get_VGM_DB') }}",
            contentType: "application/json;",
            data: JSON.stringify(lastStr),

            success: function(out) {
                if (out["check_new"]) {
                    add_new_db_VGM(out);
                } else {
                    add_old_db_VGM(out);
                }

            },
            error: function(out) {
                //alert(out);
            }
        }); //end of ajax 

    });

    function clear_VGM() {
        $("#VGM_OrderNo").val('');
        $("#VGM_OrderGubun").val('');
        $("#VGM_cont").val('');
        $("#VGM_total").val('26,938.00');
        $("#VGM_unit").val('KGS');
        $("#VGM_val").val('방법2');
        $("#VGM_charge").val('JONGKOOK PARK');
        $("#VGM_BK").val('');
    }

    function add_new_db_VGM(data) {
        clear_VGM();

        /////////////////////////////////////////////////////////////
        // no
        $("#VGM_OrderNo").val(data['no']);
        $("#VGM_OrderGubun").val(data['gubun']);

        $("#VGM_cont").val(data['container']);
        $("#VGM_BK").val(data['book']);
        /////////////////////////////////////////////////////////////
    }

    function add_old_db_VGM(data) {

    }


    // standing payment instruction 
    $(document).on('change', '#standing_payment_inst_DB', function() {

        var data1 = $('#standing_payment_inst_DB').val();
        beforeStr = data1;
        var afterStr = beforeStr.split('/');
        var lastStr = '';
        //for( var e =0 ; e < afterStr.length ; e++)
        //{
        //        if(afterStr[e].search("DBB") != -1 )
        //{
        //lastStr = afterStr[e];
        //break;
        //}
        //}
        lastStr = afterStr[0];

        $.ajax({
            type: "POST",
            url: "{{ url_for('get_standing_payment_inst_DB') }}",
            contentType: "application/json;",
            data: JSON.stringify(lastStr),

            success: function(out) {
                if (out["check_new"]) {
                    add_new_db_standing_payment_inst(out);
                } else {
                    add_old_db_standing_payment_inst(out);
                }

            },
            error: function(out) {
                //alert(out);
            }
        }); //end of ajax 

    });

    function clear_standing_payment_inst() {
        $("#standing_payment_inst_OrderNo").val('');
        $("#standing_payment_inst_OrderGubun").val('');
        $("#standing_payment_inst_buyer").val('');
        $("#standing_payment_inst_buyer2").val('');
        $("#standing_payment_inst_date").val('');
        $("#standing_payment_inst_bank").val('keb');
        $("#standing_payment_inst_sign").val('두베스트');
        //standing_payment_inst_sign.addItem('두베스트');



    }

    function add_new_db_standing_payment_inst(data) {
        clear_standing_payment_inst();

        /////////////////////////////////////////////////////////////
        // no
        $("#standing_payment_inst_OrderNo").val(data['no']);
        $("#standing_payment_inst_OrderGubun").val(data['gubun']);

        //$("#VGM_cont").val(data['container']);
        //$("#VGM_BK").val(data['book']);
        /////////////////////////////////////////////////////////////
        var data0 = data['select_buyer'][0][1];
        var data1 = data['select_buyer'][0][2];
        var data2 = data['select_buyer'][0][3];
        var data3 = data['select_buyer'][0][4];
        var data4 = data['select_buyer'][0][5];
        //$("#standing_payment_inst_buyer").val(data1)
        //console.log(data['select_buyer'][0][1]);

        //console.log(data2);
        //console.log(data3);
        //console.log(data4);
        standing_payment_inst_buyer.addItem(data0);

        $("#standing_payment_inst_buyer2").val(data1);
    }

    function add_old_db_standing_payment_inst(data) {

    }


    $(document).on('change', '#standing_payment_inst_sign', function() {
        var v1 = $("#standing_payment_inst_sign").val();
        var vstr = "../static/images/sign/" + v1;
        console.log(vstr);
        document.getElementById("doimage_sign").src = vstr;
    });

    $(document).on('change', '#standing_payment_inst_bank', function() {


        var lastStr = $("#standing_payment_inst_bank").val();

        $.ajax({
            type: "POST",
            url: "{{ url_for('get_standing_payment_inst_bank') }}",
            contentType: "application/json;",
            data: JSON.stringify(lastStr),

            success: function(out) {

                $("#standing_payment_inst_bank2").val(out['select_bank'][0][1]);
                $("#standing_payment_inst_bank3").val(out['select_bank'][0][2]);
                $("#standing_payment_inst_bank4").val(out['select_bank'][0][3]);
                $("#standing_payment_inst_bank5").val(out['select_bank'][0][4]);
                $("#standing_payment_inst_bank6").val(out['select_bank'][0][5]);

            },
            error: function(out) {
                //alert(out);
            }
        }); //end of ajax 

    });


    $(document).on('change', '#standing_payment_inst_buyer', function() {

        var lastStr = $("#standing_payment_inst_buyer").val();

        $.ajax({
            type: "POST",
            url: "{{ url_for('get_standing_payment_inst_buyer') }}",
            contentType: "application/json;",
            data: JSON.stringify(lastStr),

            success: function(out) {


                $("#standing_payment_inst_buyer2").val(out['select_buyer'][0][2]);


            },
            error: function(out) {
                //alert(out);
            }
        }); //end of ajax 

    });


    //////////////////////////////////////////////////
    // for payment instruction for buyer

    $(document).on('change', '#standing_payment_inst_buyer_DB', function() {

        var data1 = $('#standing_payment_inst_buyer_DB').val();
        beforeStr = data1;
        var afterStr = beforeStr.split('/');
        var lastStr = '';

        lastStr = afterStr[0];

        $.ajax({
            type: "POST",
            url: "{{ url_for('get_standing_payment_inst_buyer_DB') }}",
            contentType: "application/json;",
            data: JSON.stringify(lastStr),

            success: function(out) {
                if (out["check_new"]) {
                    add_new_db_standing_payment_inst_buyer(out);
                } else {
                    add_old_db_standing_payment_inst_buyer(out);
                }

            },
            error: function(out) {
                //alert(out);
            }
        }); //end of ajax 

    });

    function clear_standing_payment_inst_buyer() {
        $("#standing_payment_inst_buyer_OrderNo").val('');
        $("#standing_payment_inst_buyer_OrderGubun").val('');
        $("#standing_payment_inst_buyer_buyer").val('');
        $("#standing_payment_inst_buyer_buyer2").val('');
        $("#standing_payment_inst_buyer_date").val('');
        $("#standing_payment_inst_buyer_bank").val('keb');

        var companystr = '';
        if (check_company == 'DB')
            companystr = 'deborah@dobest.co.kr';
        else if (check_company == 'EI')
            companystr = 'alisha@dobest.co.kr';
        $("#standing_payment_inst_buyer_email").val(companystr);
        $("#standing_payment_inst_buyer_amount").val('');
    }

    function add_new_db_standing_payment_inst_buyer(data) {
        clear_standing_payment_inst_buyer();

        /////////////////////////////////////////////////////////////
        // no
        $("#standing_payment_inst_buyer_OrderNo").val(data['no']);
        $("#standing_payment_inst_buyer_OrderGubun").val(data['gubun']);
        /////////////////////////////////////////////////////////////
        var data0 = data['select_buyer'][0][1];
        var data1 = data['select_buyer'][0][2];
        var data2 = data['select_buyer'][0][3];
        var data3 = data['select_buyer'][0][4];
        var data4 = data['select_buyer'][0][5];

        standing_payment_inst_buyer_buyer.addItem(data0);
        $("#standing_payment_inst_buyer_buyer2").val(data1);

        var vamount = data['dataAmount'];
        //console.log(vamount);
        $("#standing_payment_inst_buyer_amount").val(vamount);
    }

    function add_old_db_standing_payment_inst_buyer(data) {

    }

    $(document).on('change', '#standing_payment_inst_buyer_bank', function() {

        var lastStr = $("#standing_payment_inst_buyer_bank").val();
        $.ajax({
            type: "POST",
            url: "{{ url_for('get_standing_payment_inst_buyer_bank') }}",
            contentType: "application/json;",
            data: JSON.stringify(lastStr),

            success: function(out) {

                $("#standing_payment_inst_buyer_bank2").val(out['select_bank'][0][1]);
                $("#standing_payment_inst_buyer_bank3").val(out['select_bank'][0][2]);
                $("#standing_payment_inst_buyer_bank4").val(out['select_bank'][0][3]);
                $("#standing_payment_inst_buyer_bank5").val(out['select_bank'][0][4]);
                $("#standing_payment_inst_buyer_bank6").val(out['select_bank'][0][5]);

            },
            error: function(out) {
                //alert(out);
            }
        }); //end of ajax 

    });


    $(document).on('change', '#standing_payment_inst_buyer_buyer', function() {
        var lastStr = $("#standing_payment_inst_buyer_buyer").val();
        $.ajax({
            type: "POST",
            url: "{{ url_for('get_standing_payment_inst_buyer_buyer') }}",
            contentType: "application/json;",
            data: JSON.stringify(lastStr),

            success: function(out) {
                $("#standing_payment_inst_buyer_buyer2").val(out['select_buyer'][0][2]);
            },
            error: function(out) {

            }
        }); //end of ajax 

    });


    function SelectionChange(data) {
        SelectNego.clearOptions();
        ContractDB.clearOptions();
        shippingdocsDB.clearOptions();
        deliveryorderDB.clearOptions();
        VGMDB.clearOptions();
        standing_payment_inst_buyer_DB.clearOptions();
        standing_payment_inst_DB.clearOptions();


        $.ajax({
            type: "POST",
            url: "{{ url_for('remakeSelect') }}",
            contentType: "application/json;",
            data: JSON.stringify(data),

            success: function(out) {
                data = out['all_data'];
                //console.log(data);
                var il = data.length;
                for (var i = 0; i < il; i++) {
                    //console.log(data[i]);
                    SelectNego.addOption({
                        value: String(data[i]),
                        text: String(data[i])
                    });
                    ContractDB.addOption({
                        value: data[i],
                        text: data[i]
                    });
                    shippingdocsDB.addOption({
                        value: data[i],
                        text: data[i]
                    });
                    deliveryorderDB.addOption({
                        value: data[i],
                        text: data[i]
                    });
                    VGMDB.addOption({
                        value: data[i],
                        text: data[i]
                    });
                    standing_payment_inst_buyer_DB.addOption({
                        value: data[i],
                        text: data[i]
                    });
                    standing_payment_inst_DB.addOption({
                        value: data[i],
                        text: data[i]
                    });
                }

                data2 = out['nego_data'];
                var il2 = data2.length;
                for (var i = 0; i < il2; i++) {
                    //console.log(data[i]);
                    SelectNego.addOption({
                        value: String(data2[i]),
                        text: String(data2[i])
                    });
                    ContractDB.addOption({
                        value: data2[i],
                        text: data2[i]
                    });
                    shippingdocsDB.addOption({
                        value: data2[i],
                        text: data2[i]
                    });
                    deliveryorderDB.addOption({
                        value: data2[i],
                        text: data2[i]
                    });
                    VGMDB.addOption({
                        value: data2[i],
                        text: data2[i]
                    });
                    standing_payment_inst_buyer_DB.addOption({
                        value: data2[i],
                        text: data2[i]
                    });
                    standing_payment_inst_DB.addOption({
                        value: data2[i],
                        text: data2[i]
                    });
                }

                testNew();
            },
            error: function(out) {

            }
        }); //end of ajax 

    }
</script>